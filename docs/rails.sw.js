var _s=Object.defineProperty;var ds=(h,o,u)=>o in h?_s(h,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):h[o]=u;var Tn=(h,o,u)=>(ds(h,typeof o!="symbol"?o+"":o,u),u),$t=(h,o,u)=>{if(!o.has(h))throw TypeError("Cannot "+u)};var _e=(h,o,u)=>($t(h,o,"read from private field"),u?u.call(h):o.get(h)),ze=(h,o,u)=>{if(o.has(h))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(h):o.set(h,u)},Ye=(h,o,u,e)=>($t(h,o,"write to private field"),e?e.call(h,u):o.set(h,u),u);var Pt=(h,o,u)=>($t(h,o,"access private method"),u);class zn{constructor(){this.listeners=new Set,this.currentStep="Initializing...",this.currentValue=0}async attach(o){const u=await o.clients.matchAll({includeUncontrolled:!0});for(const e of u)this.addListener(e)}addListener(o){this.listeners.add(o)}removeListener(o){this.listeners.delete(o)}notifyProgress(){for(const o of this.listeners)o.postMessage({type:"progress",step:this.currentStep,value:this.currentValue})}notify(o){for(const u of this.listeners)u.postMessage({type:"console",message:o})}updateStep(o){this.currentStep=o,this.currentValue=0,this.notifyProgress()}updateProgress(o){this.currentValue=o,this.notifyProgress()}}let Jt=new DataView(new ArrayBuffer);function Se(h){return Jt.buffer!==h.buffer&&(Jt=new DataView(h.buffer)),Jt}function ps(h){return h>>>0}const nt=new TextDecoder("utf-8"),ms=new TextEncoder("utf-8");function mt(h,o,u){if(typeof h!="string")throw new TypeError("expected a string");if(h.length===0)return ot=0,1;let e=0,T=0,_=0;for(;h.length>0;){T=o(T,e,1,e+h.length),e+=h.length;const{read:m,written:A}=ms.encodeInto(h,new Uint8Array(u.buffer,T+_,e-_));_+=A,h=h.slice(m)}return e>_&&(T=o(T,e,1,_)),ot=_,T}let ot=0;class Wn{constructor(){this.list=[],this.head=0}insert(o){this.head>=this.list.length&&this.list.push({next:this.list.length+1,val:void 0});const u=this.head,e=this.list[u];return this.head=e.next,e.next=-1,e.val=o,u}get(o){if(o>=this.list.length)throw new RangeError("handle index not valid");const u=this.list[o];if(u.next===-1)return u.val;throw new RangeError("handle index not valid")}remove(o){const u=this.get(o),e=this.list[o];return e.val=void 0,e.next=this.head,this.head=o,u}}function Rt(){throw new RangeError("invalid variant discriminant for bool")}class Vn{constructor(){this._resource0_slab=new Wn}addToImports(o){"canonical_abi"in o||(o.canonical_abi={}),o.canonical_abi["resource_drop_rb-abi-value"]=u=>{this._resource0_slab.remove(u).drop()},o.canonical_abi["resource_clone_rb-abi-value"]=u=>{const e=this._resource0_slab.get(u);return this._resource0_slab.insert(e.clone())},o.canonical_abi["resource_get_rb-abi-value"]=u=>this._resource0_slab.get(u)._wasm_val,o.canonical_abi["resource_new_rb-abi-value"]=u=>(this._registry0,this._resource0_slab.insert(new vt(u,this)))}async instantiate(o,u){if(u=u||{},this.addToImports(u),o instanceof WebAssembly.Instance)this.instance=o;else if(o instanceof WebAssembly.Module)this.instance=await WebAssembly.instantiate(o,u);else if(o instanceof ArrayBuffer||o instanceof Uint8Array){const{instance:e}=await WebAssembly.instantiate(o,u);this.instance=e}else{const{instance:e}=await WebAssembly.instantiateStreaming(o,u);this.instance=e}this._exports=this.instance.exports,this._registry0=new FinalizationRegistry(this._exports["canonical_abi_drop_rb-abi-value"])}rubyShowVersion(){this._exports["ruby-show-version: func() -> ()"]()}rubyInit(o){const u=this._exports.memory,e=this._exports.cabi_realloc,T=o,_=T.length,m=e(0,0,4,_*8);for(let A=0;A<T.length;A++){const O=T[A],D=m+A*8,z=mt(O,e,u),M=ot;Se(u).setInt32(D+4,M,!0),Se(u).setInt32(D+0,z,!0)}this._exports["ruby-init: func(args: list<string>) -> ()"](m,_)}rubyInitLoadpath(){this._exports["ruby-init-loadpath: func() -> ()"]()}rbEvalStringProtect(o){const u=this._exports.memory,e=this._exports.cabi_realloc,T=mt(o,e,u),_=ot,m=this._exports["rb-eval-string-protect: func(str: string) -> tuple<handle<rb-abi-value>, s32>"](T,_);return[this._resource0_slab.remove(Se(u).getInt32(m+0,!0)),Se(u).getInt32(m+4,!0)]}rbFuncallvProtect(o,u,e){const T=this._exports.memory,_=this._exports.cabi_realloc,m=o;if(!(m instanceof vt))throw new TypeError("expected instance of RbAbiValue");const A=e,O=A.length,D=_(0,0,4,O*4);for(let M=0;M<A.length;M++){const ne=A[M],ae=D+M*4,ue=ne;if(!(ue instanceof vt))throw new TypeError("expected instance of RbAbiValue");Se(T).setInt32(ae+0,this._resource0_slab.insert(ue.clone()),!0)}const z=this._exports["rb-funcallv-protect: func(recv: handle<rb-abi-value>, mid: u32, args: list<handle<rb-abi-value>>) -> tuple<handle<rb-abi-value>, s32>"](this._resource0_slab.insert(m.clone()),ps(u),D,O);return[this._resource0_slab.remove(Se(T).getInt32(z+0,!0)),Se(T).getInt32(z+4,!0)]}rbIntern(o){const u=this._exports.memory,e=this._exports.cabi_realloc,T=mt(o,e,u),_=ot;return this._exports["rb-intern: func(name: string) -> u32"](T,_)>>>0}rbErrinfo(){const o=this._exports["rb-errinfo: func() -> handle<rb-abi-value>"]();return this._resource0_slab.remove(o)}rbClearErrinfo(){this._exports["rb-clear-errinfo: func() -> ()"]()}rstringPtr(o){const u=this._exports.memory,e=o;if(!(e instanceof vt))throw new TypeError("expected instance of RbAbiValue");const T=this._exports["rstring-ptr: func(value: handle<rb-abi-value>) -> string"](this._resource0_slab.insert(e.clone())),_=Se(u).getInt32(T+0,!0),m=Se(u).getInt32(T+4,!0),A=nt.decode(new Uint8Array(u.buffer,_,m));return this._exports["cabi_post_rstring-ptr"](T),A}rbVmBugreport(){this._exports["rb-vm-bugreport: func() -> ()"]()}rbGcEnable(){const u=this._exports["rb-gc-enable: func() -> bool"]();return u==0?!1:u==1?!0:Rt()}rbGcDisable(){const u=this._exports["rb-gc-disable: func() -> bool"]();return u==0?!1:u==1?!0:Rt()}rbSetShouldProhibitRewind(o){const e=this._exports["rb-set-should-prohibit-rewind: func(new-value: bool) -> bool"](o?1:0);return e==0?!1:e==1?!0:Rt()}}class vt{constructor(o,u){this._wasm_val=o,this._obj=u,this._refcnt=1,u._registry0.register(this,o,this)}clone(){return this._refcnt+=1,this}drop(){if(this._refcnt-=1,this._refcnt!==0)return;this._obj._registry0.unregister(this);const o=this._obj._exports["canonical_abi_drop_rb-abi-value"],u=this._wasm_val;delete this._obj,delete this._refcnt,delete this._wasm_val,o(u)}}function hs(h,o,u){"rb-js-abi-host"in h||(h["rb-js-abi-host"]={}),h["rb-js-abi-host"]["eval-js: func(code: string) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }"]=function(T,_,m){const A=u("memory"),O=T,D=_,z=nt.decode(new Uint8Array(A.buffer,O,D)),ne=o.evalJs(z);switch(ne.tag){case"success":{const ae=ne.val;Se(A).setInt8(m+0,0,!0),Se(A).setInt32(m+4,e.insert(ae),!0);break}case"failure":{const ae=ne.val;Se(A).setInt8(m+0,1,!0),Se(A).setInt32(m+4,e.insert(ae),!0);break}default:throw new RangeError("invalid variant specified for JsAbiResult")}},h["rb-js-abi-host"]["is-js: func(value: handle<js-abi-value>) -> bool"]=function(T){return o.isJs(e.get(T))?1:0},h["rb-js-abi-host"]["instance-of: func(value: handle<js-abi-value>, klass: handle<js-abi-value>) -> bool"]=function(T,_){return o.instanceOf(e.get(T),e.get(_))?1:0},h["rb-js-abi-host"]["global-this: func() -> handle<js-abi-value>"]=function(){const T=o.globalThis();return e.insert(T)},h["rb-js-abi-host"]["int-to-js-number: func(value: s32) -> handle<js-abi-value>"]=function(T){const _=o.intToJsNumber(T);return e.insert(_)},h["rb-js-abi-host"]["float-to-js-number: func(value: float64) -> handle<js-abi-value>"]=function(T){const _=o.floatToJsNumber(T);return e.insert(_)},h["rb-js-abi-host"]["string-to-js-string: func(value: string) -> handle<js-abi-value>"]=function(T,_){const m=u("memory"),A=T,O=_,D=nt.decode(new Uint8Array(m.buffer,A,O)),z=o.stringToJsString(D);return e.insert(z)},h["rb-js-abi-host"]["bool-to-js-bool: func(value: bool) -> handle<js-abi-value>"]=function(T){const _=T,m=o.boolToJsBool(_==0?!1:_==1?!0:Rt());return e.insert(m)},h["rb-js-abi-host"]["proc-to-js-function: func(value: u32) -> handle<js-abi-value>"]=function(T){const _=o.procToJsFunction(T>>>0);return e.insert(_)},h["rb-js-abi-host"]["rb-object-to-js-rb-value: func(raw-rb-abi-value: u32) -> handle<js-abi-value>"]=function(T){const _=o.rbObjectToJsRbValue(T>>>0);return e.insert(_)},h["rb-js-abi-host"]["js-value-to-string: func(value: handle<js-abi-value>) -> string"]=function(T,_){const m=u("memory"),A=u("cabi_realloc"),O=o.jsValueToString(e.get(T)),D=mt(O,A,m),z=ot;Se(m).setInt32(_+4,z,!0),Se(m).setInt32(_+0,D,!0)},h["rb-js-abi-host"]["js-value-to-integer: func(value: handle<js-abi-value>) -> variant { as-float(float64), bignum(string) }"]=function(T,_){const m=u("memory"),A=u("cabi_realloc"),D=o.jsValueToInteger(e.get(T));switch(D.tag){case"as-float":{const z=D.val;Se(m).setInt8(_+0,0,!0),Se(m).setFloat64(_+8,+z,!0);break}case"bignum":{const z=D.val;Se(m).setInt8(_+0,1,!0);const M=mt(z,A,m),ne=ot;Se(m).setInt32(_+12,ne,!0),Se(m).setInt32(_+8,M,!0);break}default:throw new RangeError("invalid variant specified for RawInteger")}},h["rb-js-abi-host"]["export-js-value-to-host: func(value: handle<js-abi-value>) -> ()"]=function(T){o.exportJsValueToHost(e.get(T))},h["rb-js-abi-host"]["import-js-value-from-host: func() -> handle<js-abi-value>"]=function(){const T=o.importJsValueFromHost();return e.insert(T)},h["rb-js-abi-host"]["js-value-typeof: func(value: handle<js-abi-value>) -> string"]=function(T,_){const m=u("memory"),A=u("cabi_realloc"),O=o.jsValueTypeof(e.get(T)),D=mt(O,A,m),z=ot;Se(m).setInt32(_+4,z,!0),Se(m).setInt32(_+0,D,!0)},h["rb-js-abi-host"]["js-value-equal: func(lhs: handle<js-abi-value>, rhs: handle<js-abi-value>) -> bool"]=function(T,_){return o.jsValueEqual(e.get(T),e.get(_))?1:0},h["rb-js-abi-host"]["js-value-strictly-equal: func(lhs: handle<js-abi-value>, rhs: handle<js-abi-value>) -> bool"]=function(T,_){return o.jsValueStrictlyEqual(e.get(T),e.get(_))?1:0},h["rb-js-abi-host"]["reflect-apply: func(target: handle<js-abi-value>, this-argument: handle<js-abi-value>, arguments: list<handle<js-abi-value>>) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }"]=function(T,_,m,A,O){const D=u("memory"),z=A,M=m,ne=[];for(let ce=0;ce<z;ce++){const ve=M+ce*4;ne.push(e.get(Se(D).getInt32(ve+0,!0)))}const ue=o.reflectApply(e.get(T),e.get(_),ne);switch(ue.tag){case"success":{const ce=ue.val;Se(D).setInt8(O+0,0,!0),Se(D).setInt32(O+4,e.insert(ce),!0);break}case"failure":{const ce=ue.val;Se(D).setInt8(O+0,1,!0),Se(D).setInt32(O+4,e.insert(ce),!0);break}default:throw new RangeError("invalid variant specified for JsAbiResult")}},h["rb-js-abi-host"]["reflect-construct: func(target: handle<js-abi-value>, arguments: list<handle<js-abi-value>>) -> handle<js-abi-value>"]=function(T,_,m){const A=u("memory"),O=m,D=_,z=[];for(let ne=0;ne<O;ne++){const ae=D+ne*4;z.push(e.get(Se(A).getInt32(ae+0,!0)))}const M=o.reflectConstruct(e.get(T),z);return e.insert(M)},h["rb-js-abi-host"]["reflect-delete-property: func(target: handle<js-abi-value>, property-key: string) -> bool"]=function(T,_,m){const A=u("memory"),O=_,D=m,z=nt.decode(new Uint8Array(A.buffer,O,D));return o.reflectDeleteProperty(e.get(T),z)?1:0},h["rb-js-abi-host"]["reflect-get: func(target: handle<js-abi-value>, property-key: string) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }"]=function(T,_,m,A){const O=u("memory"),D=_,z=m,M=nt.decode(new Uint8Array(O.buffer,D,z)),ae=o.reflectGet(e.get(T),M);switch(ae.tag){case"success":{const ue=ae.val;Se(O).setInt8(A+0,0,!0),Se(O).setInt32(A+4,e.insert(ue),!0);break}case"failure":{const ue=ae.val;Se(O).setInt8(A+0,1,!0),Se(O).setInt32(A+4,e.insert(ue),!0);break}default:throw new RangeError("invalid variant specified for JsAbiResult")}},h["rb-js-abi-host"]["reflect-get-own-property-descriptor: func(target: handle<js-abi-value>, property-key: string) -> handle<js-abi-value>"]=function(T,_,m){const A=u("memory"),O=_,D=m,z=nt.decode(new Uint8Array(A.buffer,O,D)),M=o.reflectGetOwnPropertyDescriptor(e.get(T),z);return e.insert(M)},h["rb-js-abi-host"]["reflect-get-prototype-of: func(target: handle<js-abi-value>) -> handle<js-abi-value>"]=function(T){const _=o.reflectGetPrototypeOf(e.get(T));return e.insert(_)},h["rb-js-abi-host"]["reflect-has: func(target: handle<js-abi-value>, property-key: string) -> bool"]=function(T,_,m){const A=u("memory"),O=_,D=m,z=nt.decode(new Uint8Array(A.buffer,O,D));return o.reflectHas(e.get(T),z)?1:0},h["rb-js-abi-host"]["reflect-is-extensible: func(target: handle<js-abi-value>) -> bool"]=function(T){return o.reflectIsExtensible(e.get(T))?1:0},h["rb-js-abi-host"]["reflect-own-keys: func(target: handle<js-abi-value>) -> list<handle<js-abi-value>>"]=function(T,_){const m=u("memory"),A=u("cabi_realloc"),D=o.reflectOwnKeys(e.get(T)),z=D.length,M=A(0,0,4,z*4);for(let ne=0;ne<D.length;ne++){const ae=D[ne],ue=M+ne*4;Se(m).setInt32(ue+0,e.insert(ae),!0)}Se(m).setInt32(_+4,z,!0),Se(m).setInt32(_+0,M,!0)},h["rb-js-abi-host"]["reflect-prevent-extensions: func(target: handle<js-abi-value>) -> bool"]=function(T){return o.reflectPreventExtensions(e.get(T))?1:0},h["rb-js-abi-host"]["reflect-set: func(target: handle<js-abi-value>, property-key: string, value: handle<js-abi-value>) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }"]=function(T,_,m,A,O){const D=u("memory"),z=_,M=m,ne=nt.decode(new Uint8Array(D.buffer,z,M)),ue=o.reflectSet(e.get(T),ne,e.get(A));switch(ue.tag){case"success":{const ce=ue.val;Se(D).setInt8(O+0,0,!0),Se(D).setInt32(O+4,e.insert(ce),!0);break}case"failure":{const ce=ue.val;Se(D).setInt8(O+0,1,!0),Se(D).setInt32(O+4,e.insert(ce),!0);break}default:throw new RangeError("invalid variant specified for JsAbiResult")}},h["rb-js-abi-host"]["reflect-set-prototype-of: func(target: handle<js-abi-value>, prototype: handle<js-abi-value>) -> bool"]=function(T,_){return o.reflectSetPrototypeOf(e.get(T),e.get(_))?1:0},"canonical_abi"in h||(h.canonical_abi={});const e=new Wn;h.canonical_abi["resource_drop_js-abi-value"]=T=>{const _=e.remove(T);o.dropJsAbiValue&&o.dropJsAbiValue(_)}}class gs extends Vn{async setInstance(o){await this.instantiate(o)}}class bs{constructor(){}setUnderlying(o){this.underlying=o}rubyShowVersion(){this.underlying.rubyShowVersion()}rubyInit(o){this.underlying.rubyInit(o)}rubyInitLoadpath(){this.underlying.rubyInitLoadpath()}rbEvalStringProtect(o){return this.underlying.rbEvalStringProtect(o)}rbFuncallvProtect(o,u,e){return this.underlying.rbFuncallvProtect(o,u,e)}rbIntern(o){return this.underlying.rbIntern(o)}rbErrinfo(){return this.underlying.rbErrinfo()}rbClearErrinfo(){return this.underlying.rbClearErrinfo()}rstringPtr(o){return this.underlying.rstringPtr(o)}rbVmBugreport(){this.underlying.rbVmBugreport()}rbGcEnable(){return this.underlying.rbGcEnable()}rbGcDisable(){return this.underlying.rbGcDisable()}rbSetShouldProhibitRewind(o){return this.underlying.rbSetShouldProhibitRewind(o)}async setInstance(o){}addToImports(o){}}class jt{static async instantiateModule(o){var u,e;const{module:T,wasip1:_}=o,m=new jt,A={wasi_snapshot_preview1:_.wasiImport};m.addToImports(A),(u=o.addToImports)===null||u===void 0||u.call(o,A);const O=await WebAssembly.instantiate(T,A);try{await m.setInstance(O)}catch(D){throw console.error('Failed to instantiate Ruby VM. Please make sure that you have added `gem "js"` to your Gemfile.'),D}return(e=o.setMemory)===null||e===void 0||e.call(o,O.exports.memory),_.initialize(O),m.initialize(o.args),{vm:m,instance:O}}static async instantiateComponent(o){let u;return"getCoreModule"in o?u=async T=>{const{instantiate:_,getCoreModule:m,wasip2:A}=o,{cli:O,clocks:D,filesystem:z,io:M,random:ne,sockets:ae,http:ue}=A,ce={"ruby:js/js-runtime":T,"wasi:cli/environment":O.environment,"wasi:cli/exit":O.exit,"wasi:cli/stderr":O.stderr,"wasi:cli/stdin":O.stdin,"wasi:cli/stdout":O.stdout,"wasi:cli/terminal-input":O.terminalInput,"wasi:cli/terminal-output":O.terminalOutput,"wasi:cli/terminal-stderr":O.terminalStderr,"wasi:cli/terminal-stdin":O.terminalStdin,"wasi:cli/terminal-stdout":O.terminalStdout,"wasi:clocks/monotonic-clock":D.monotonicClock,"wasi:clocks/wall-clock":D.wallClock,"wasi:filesystem/preopens":z.preopens,"wasi:filesystem/types":z.types,"wasi:io/error":M.error,"wasi:io/poll":M.poll,"wasi:io/streams":M.streams,"wasi:random/random":ne.random,"wasi:sockets/tcp":ae.tcp,"wasi:http/types":ue.types,"wasi:http/incoming-handler":ue.incomingHandler,"wasi:http/outgoing-handler":ue.outgoingHandler};return(await _(m,ce,o.instantiateCore)).rubyRuntime}:u=o.instantiate,{vm:await this._instantiate({},u)}}constructor(o){this.instance=null,this.interfaceState={hasJSFrameAfterRbFrame:!1};const u=e=>{const T=["setInstance","addToImports","instantiate","rbSetShouldProhibitRewind","rbGcDisable","rbGcEnable"],_=["constructor"].concat(T);for(const m of Object.getOwnPropertyNames(Vn.prototype)){if(_.includes(m))continue;const A=e[m];typeof A=="function"&&(e[m]=(...O)=>{if(this.interfaceState.hasJSFrameAfterRbFrame){const z=this.guest.rbSetShouldProhibitRewind(!0),M=this.guest.rbGcDisable(),ne=Reflect.apply(A,e,O);return this.guest.rbSetShouldProhibitRewind(z),M||this.guest.rbGcEnable(),ne}else return Reflect.apply(A,e,O)})}return e};this.guest=u(o??new gs),this.transport=new ys,this.exceptionFormatter=new ws}static async _instantiate(o,u){const e=new bs,T=new jt(e);class _{constructor(D){this.underlying=D}}const m=T.getImports(O=>new _(O),O=>O.underlying),A=await u(Object.assign(Object.assign({},m),{throwProhibitRewindException:O=>{T.throwProhibitRewindException(O)},procToJsFunction:()=>{const O=new st(A.exportRbValueToJs(),T,T.privateObject());return new _((...D)=>O.call("call",...D.map(z=>T.wrap(z))).toJS())},rbObjectToJsRbValue:()=>{const O=new st(A.exportRbValueToJs(),T,T.privateObject());return new _(O)},JsAbiValue:_}));return e.setUnderlying(A),T.initialize(o.args),T}initialize(o=["ruby.wasm","-EUTF-8","-e_=0"]){const u=o.map(e=>e+"\0");this.guest.rubyInit(u);try{this.eval(`
        # Require Bundler standalone setup
        if File.exist?("/bundle/bundler/setup.rb")
          require "/bundle/bundler/setup.rb"
        elsif File.exist?("/bundle/setup.rb")
          # For non-CM builds, which doesn't use Bundler's standalone mode
          require "/bundle/setup.rb"
        end
      `)}catch(e){console.warn("Failed to load /bundle/setup",e)}}async setInstance(o){this.instance=o,await this.guest.setInstance(o)}addToImports(o){this.guest.addToImports(o),o["rb-js-abi-host"]={rb_wasm_throw_prohibit_rewind_exception:(u,e)=>{const T=this.instance.exports.memory,_=new TextDecoder().decode(new Uint8Array(T.buffer,u,e));this.throwProhibitRewindException(_)}},hs(o,this.getImports(u=>u,u=>u),u=>this.instance.exports[u])}throwProhibitRewindException(o){let u=`Ruby APIs that may rewind the VM stack are prohibited under nested VM operation (${o})
Nested VM operation means that the call stack has sandwitched JS frames like JS -> Ruby -> JS -> Ruby caused by something like \`window.rubyVM.eval("JS.global[:rubyVM].eval('Fiber.yield')")\`

Please check your call stack and make sure that you are **not** doing any of the following inside the nested Ruby frame:
  1. Switching fibers (e.g. Fiber#resume, Fiber.yield, and Fiber#transfer)
     Note that \`evalAsync\` JS API switches fibers internally
  2. Raising uncaught exceptions
     Please catch all exceptions inside the nested operation
  3. Calling Continuation APIs
`;const e=new st(this.guest.rbErrinfo(),this,this.privateObject());throw e.call("nil?").toString()==="false"&&(u+=`
`+this.exceptionFormatter.format(e,this,this.privateObject())),new On(u)}getImports(o,u){const e=_=>{for(const[m,A]of Object.entries(_))typeof A=="function"&&(_[m]=(...O)=>{const D=this.interfaceState.hasJSFrameAfterRbFrame;this.interfaceState.hasJSFrameAfterRbFrame=!0;const z=Reflect.apply(A,_,O);return this.interfaceState.hasJSFrameAfterRbFrame=D,z});return _};function T(_){return(...m)=>{try{return{tag:"success",val:_(...m)}}catch(A){if(A instanceof On)throw A;return{tag:"failure",val:o(A)}}}}return e({evalJs:T(_=>o(Function(_)())),isJs:_=>!0,globalThis:()=>{if(typeof globalThis<"u")return o(globalThis);if(typeof global<"u")return o(global);if(typeof window<"u")return o(window);throw new Error("unable to locate global object")},intToJsNumber:_=>o(_),floatToJsNumber:_=>o(_),stringToJsString:_=>o(_),boolToJsBool:_=>o(_),procToJsFunction:_=>{const m=this.rbValueOfPointer(_);return o((...A)=>m.call("call",...A.map(O=>this.wrap(O))).toJS())},rbObjectToJsRbValue:_=>o(this.rbValueOfPointer(_)),jsValueToString:_=>(_=u(_),String(_)),jsValueToInteger(_){return _=u(_),typeof _=="number"?{tag:"as-float",val:_}:typeof _=="bigint"?{tag:"bignum",val:BigInt(_).toString(10)+"\0"}:typeof _=="string"?{tag:"bignum",val:_+"\0"}:typeof _>"u"?{tag:"as-float",val:0}:{tag:"as-float",val:Number(_)}},exportJsValueToHost:_=>{this.transport.takeJsValue(u(_))},importJsValueFromHost:()=>o(this.transport.consumeJsValue()),instanceOf:(_,m)=>(m=u(m),typeof m=="function"?u(_)instanceof m:!1),jsValueTypeof(_){return typeof u(_)},jsValueEqual(_,m){return u(_)==u(m)},jsValueStrictlyEqual(_,m){return u(_)===u(m)},reflectApply:T((_,m,A)=>{const O=A.map(D=>u(D));return o(Reflect.apply(u(_),u(m),O))}),reflectConstruct:function(_,m){throw new Error("Function not implemented.")},reflectDeleteProperty:function(_,m){throw new Error("Function not implemented.")},reflectGet:T((_,m)=>o(u(_)[m])),reflectGetOwnPropertyDescriptor:function(_,m){throw new Error("Function not implemented.")},reflectGetPrototypeOf:function(_){throw new Error("Function not implemented.")},reflectHas:function(_,m){throw new Error("Function not implemented.")},reflectIsExtensible:function(_){throw new Error("Function not implemented.")},reflectOwnKeys:function(_){throw new Error("Function not implemented.")},reflectPreventExtensions:function(_){throw new Error("Function not implemented.")},reflectSet:T((_,m,A)=>o(Reflect.set(u(_),m,u(A)))),reflectSetPrototypeOf:function(_,m){throw new Error("Function not implemented.")}})}printVersion(){this.guest.rubyShowVersion()}eval(o){return Lt(this,this.privateObject(),o)}evalAsync(o){const u=this.eval("require 'js'; JS");return Gn(this,this.privateObject(),e=>{u.call("__eval_async_rb",this.wrap(o),e)})}wrap(o){return this.transport.importJsValue(o,this)}privateObject(){return{transport:this.transport,exceptionFormatter:this.exceptionFormatter}}rbValueOfPointer(o){const u=new vt(o,this.guest);return new st(u,this,this.privateObject())}}class ys{constructor(){this._takenJsValue=null}takeJsValue(o){this._takenJsValue=o}consumeJsValue(){return this._takenJsValue}exportJsValue(o){return o.call("__export_to_js"),this._takenJsValue}importJsValue(o,u){return this._takenJsValue=o,u.eval('require "js"; JS::Object').call("__import_from_js")}}class st{constructor(o,u,e){this.inner=o,this.vm=u,this.privateObject=e}call(o,...u){const e=u.map(T=>T.inner);return new st(Fn(this.vm,this.privateObject,this.inner,o,e),this.vm,this.privateObject)}callAsync(o,...u){const e=this.vm.eval("require 'js'; JS");return Gn(this.vm,this.privateObject,T=>{e.call("__call_async_method",this,this.vm.wrap(o),T,...u)})}[Symbol.toPrimitive](o){return o==="string"||o==="default"?this.toString():null}toString(){const o=Fn(this.vm,this.privateObject,this.inner,"to_s",[]);return this.vm.guest.rstringPtr(o)}toJS(){const u=this.vm.eval("JS").call("try_convert",this);return u.call("nil?").toString()==="true"?null:this.privateObject.transport.exportJsValue(u)}}var Ke;(function(h){h[h.None=0]="None",h[h.Return=1]="Return",h[h.Break=2]="Break",h[h.Next=3]="Next",h[h.Retry=4]="Retry",h[h.Redo=5]="Redo",h[h.Raise=6]="Raise",h[h.Throw=7]="Throw",h[h.Fatal=8]="Fatal",h[h.Mask=15]="Mask"})(Ke||(Ke={}));class ws{constructor(){this.literalsCache=null,this.isFormmatting=!1}format(o,u,e){class T extends Error{}if(this.isFormmatting)throw new T("Unexpected exception occurred during formatting exception message");this.isFormmatting=!0;try{return this._format(o,u,e)}finally{this.isFormmatting=!1}}_format(o,u,e){const[T,_,m]=(()=>{if(this.literalsCache==null){const z=[Lt(u,e,"0"),Lt(u,e,"1"),Lt(u,e,`"
"`)];return this.literalsCache=z,z}else return this.literalsCache})();let A,O,D;try{A=o.call("class").toString()}catch{A="unknown"}try{D=o.call("message").toString()}catch{D="unknown"}try{O=o.call("backtrace")}catch{return this.formatString(A,D)}if(O.call("nil?").toString()==="true")return this.formatString(A,D);try{const z=O.call("at",T),M=O.call("drop",_).call("join",m);return this.formatString(A,D,[z.toString(),M.toString()])}catch{return this.formatString(A,D)}}formatString(o,u,e){return e?`${e[0]}: ${u} (${o})
${e[1]}`:`${o}: ${u}`}}const Qn=(h,o,u)=>{switch(h&Ke.Mask){case Ke.None:break;case Ke.Return:throw new Ge("unexpected return");case Ke.Next:throw new Ge("unexpected next");case Ke.Break:throw new Ge("unexpected break");case Ke.Redo:throw new Ge("unexpected redo");case Ke.Retry:throw new Ge("retry outside of rescue clause");case Ke.Throw:throw new Ge("unexpected throw");case Ke.Raise:case Ke.Fatal:const e=new st(o.guest.rbErrinfo(),o,u);throw e.call("nil?").toString()==="true"?new Ge("no exception object"):(o.guest.rbClearErrinfo(),new Ge(u.exceptionFormatter.format(e,o,u)));default:throw new Ge(`unknown error tag: ${h}`)}};function Hn(h,o){try{return o()}catch(u){if(u instanceof Ge)throw u;try{h.guest.rbVmBugreport()}catch(e){console.error("Tried to report internal Ruby VM state but failed: ",e)}if(u instanceof WebAssembly.RuntimeError&&u.message==="unreachable"){const e=new Ge(`Something went wrong in Ruby VM: ${u}`);throw e.stack=u.stack,e}else throw u}}const Fn=(h,o,u,e,T)=>{const _=h.guest.rbIntern(e+"\0");return Hn(h,()=>{const[m,A]=h.guest.rbFuncallvProtect(u,_,T);return Qn(A,h,o),m})},Lt=(h,o,u)=>Hn(h,()=>{const[e,T]=h.guest.rbEvalStringProtect(u+"\0");return Qn(T,h,o),new st(e,h,o)});function Gn(h,o,u){return new Promise((e,T)=>{const _=h.wrap({resolve:e,reject:m=>{const A=new Ge(o.exceptionFormatter.format(m,h,o));T(A)}});u(_)})}class Ge extends Error{constructor(o){super(o)}}class On extends Ge{constructor(o){super("Ruby Fatal Error: "+o)}}const Pn=0,Rn=1,Re=0,qe=8,Dt=20,Nt=28,Ln=31,qs=37,ct=44,vs=52,it=54,Dn=55,Le=58,Yt=63,Cn=76,Zt=64;class Et{static read_bytes(o,u){const e=new Et;return e.buf=o.getUint32(u,!0),e.buf_len=o.getUint32(u+4,!0),e}static read_bytes_array(o,u,e){const T=[];for(let _=0;_<e;_++)T.push(Et.read_bytes(o,u+8*_));return T}}class xt{static read_bytes(o,u){const e=new xt;return e.buf=o.getUint32(u,!0),e.buf_len=o.getUint32(u+4,!0),e}static read_bytes_array(o,u,e){const T=[];for(let _=0;_<e;_++)T.push(xt.read_bytes(o,u+8*_));return T}}const Es=0,xs=1,$n=2,jn=2,Xe=3,Mt=4;class Kt{head_length(){return 24}name_length(){return this.dir_name.byteLength}write_head_bytes(o,u){o.setBigUint64(u,this.d_next,!0),o.setBigUint64(u+8,this.d_ino,!0),o.setUint32(u+16,this.dir_name.length,!0),o.setUint8(u+20,this.d_type)}write_name_bytes(o,u,e){o.set(this.dir_name.slice(0,Math.min(this.dir_name.byteLength,e)),u)}constructor(o,u,e){this.d_ino=0n;const T=new TextEncoder().encode(u);this.d_next=o,this.d_namlen=T.byteLength,this.d_type=e,this.dir_name=T}}const Ss=1;class nn{write_bytes(o,u){o.setUint8(u,this.fs_filetype),o.setUint16(u+2,this.fs_flags,!0),o.setBigUint64(u+8,this.fs_rights_base,!0),o.setBigUint64(u+16,this.fs_rights_inherited,!0)}constructor(o,u){this.fs_rights_base=0n,this.fs_rights_inherited=0n,this.fs_filetype=o,this.fs_flags=u}}const Xt=1,qt=2,Nn=4,Mn=8;class rn{write_bytes(o,u){o.setBigUint64(u,this.dev,!0),o.setBigUint64(u+8,this.ino,!0),o.setUint8(u+16,this.filetype),o.setBigUint64(u+24,this.nlink,!0),o.setBigUint64(u+32,this.size,!0),o.setBigUint64(u+38,this.atim,!0),o.setBigUint64(u+46,this.mtim,!0),o.setBigUint64(u+52,this.ctim,!0)}constructor(o,u){this.dev=0n,this.ino=0n,this.nlink=0n,this.atim=0n,this.mtim=0n,this.ctim=0n,this.filetype=o,this.size=u}}const As=0;class Is{write_bytes(o,u){o.setUint32(u,this.pr_name.byteLength,!0)}constructor(o){this.pr_name=new TextEncoder().encode(o)}}class sn{static dir(o){const u=new sn;return u.tag=As,u.inner=new Is(o),u}write_bytes(o,u){o.setUint32(u,this.tag,!0),this.inner.write_bytes(o,u+4)}}let ks=class{enable(o){this.log=Ts(o===void 0?!0:o,this.prefix)}get enabled(){return this.isEnabled}constructor(o){this.isEnabled=o,this.prefix="wasi:",this.enable(o)}};function Ts(h,o){return h?console.log.bind(console,"%c%s","color: #265BA0",o):()=>{}}const We=new ks(!1);class Un extends Error{constructor(o){super("exit with exit code "+o),this.code=o}}let Fs=class{start(o){this.inst=o;try{return o.exports._start(),0}catch(u){if(u instanceof Un)return u.code;throw u}}initialize(o){this.inst=o,o.exports._initialize&&o.exports._initialize()}constructor(o,u,e,T={}){this.args=[],this.env=[],this.fds=[],We.enable(T.debug),this.args=o,this.env=u,this.fds=e;const _=this;this.wasiImport={args_sizes_get(m,A){const O=new DataView(_.inst.exports.memory.buffer);O.setUint32(m,_.args.length,!0);let D=0;for(const z of _.args)D+=z.length+1;return O.setUint32(A,D,!0),We.log(O.getUint32(m,!0),O.getUint32(A,!0)),0},args_get(m,A){const O=new DataView(_.inst.exports.memory.buffer),D=new Uint8Array(_.inst.exports.memory.buffer),z=A;for(let M=0;M<_.args.length;M++){O.setUint32(m,A,!0),m+=4;const ne=new TextEncoder().encode(_.args[M]);D.set(ne,A),O.setUint8(A+ne.length,0),A+=ne.length+1}return We.enabled&&We.log(new TextDecoder("utf-8").decode(D.slice(z,A))),0},environ_sizes_get(m,A){const O=new DataView(_.inst.exports.memory.buffer);O.setUint32(m,_.env.length,!0);let D=0;for(const z of _.env)D+=z.length+1;return O.setUint32(A,D,!0),We.log(O.getUint32(m,!0),O.getUint32(A,!0)),0},environ_get(m,A){const O=new DataView(_.inst.exports.memory.buffer),D=new Uint8Array(_.inst.exports.memory.buffer),z=A;for(let M=0;M<_.env.length;M++){O.setUint32(m,A,!0),m+=4;const ne=new TextEncoder().encode(_.env[M]);D.set(ne,A),O.setUint8(A+ne.length,0),A+=ne.length+1}return We.enabled&&We.log(new TextDecoder("utf-8").decode(D.slice(z,A))),0},clock_res_get(m,A){let O;switch(m){case Rn:{O=5000n;break}case Pn:{O=1000000n;break}default:return vs}return new DataView(_.inst.exports.memory.buffer).setBigUint64(A,O,!0),Re},clock_time_get(m,A,O){const D=new DataView(_.inst.exports.memory.buffer);if(m===Pn)D.setBigUint64(O,BigInt(new Date().getTime())*1000000n,!0);else if(m==Rn){let z;try{z=BigInt(Math.round(performance.now()*1e6))}catch{z=0n}D.setBigUint64(O,z,!0)}else D.setBigUint64(O,0n,!0);return 0},fd_advise(m,A,O,D){return _.fds[m]!=null?Re:qe},fd_allocate(m,A,O){return _.fds[m]!=null?_.fds[m].fd_allocate(A,O):qe},fd_close(m){if(_.fds[m]!=null){const A=_.fds[m].fd_close();return _.fds[m]=void 0,A}else return qe},fd_datasync(m){return _.fds[m]!=null?_.fds[m].fd_sync():qe},fd_fdstat_get(m,A){if(_.fds[m]!=null){const{ret:O,fdstat:D}=_.fds[m].fd_fdstat_get();return D!=null&&D.write_bytes(new DataView(_.inst.exports.memory.buffer),A),O}else return qe},fd_fdstat_set_flags(m,A){return _.fds[m]!=null?_.fds[m].fd_fdstat_set_flags(A):qe},fd_fdstat_set_rights(m,A,O){return _.fds[m]!=null?_.fds[m].fd_fdstat_set_rights(A,O):qe},fd_filestat_get(m,A){if(_.fds[m]!=null){const{ret:O,filestat:D}=_.fds[m].fd_filestat_get();return D!=null&&D.write_bytes(new DataView(_.inst.exports.memory.buffer),A),O}else return qe},fd_filestat_set_size(m,A){return _.fds[m]!=null?_.fds[m].fd_filestat_set_size(A):qe},fd_filestat_set_times(m,A,O,D){return _.fds[m]!=null?_.fds[m].fd_filestat_set_times(A,O,D):qe},fd_pread(m,A,O,D,z){const M=new DataView(_.inst.exports.memory.buffer),ne=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const ae=Et.read_bytes_array(M,A,O);let ue=0;for(const ce of ae){const{ret:ve,data:Fe}=_.fds[m].fd_pread(ce.buf_len,D);if(ve!=Re)return M.setUint32(z,ue,!0),ve;if(ne.set(Fe,ce.buf),ue+=Fe.length,D+=BigInt(Fe.length),Fe.length!=ce.buf_len)break}return M.setUint32(z,ue,!0),Re}else return qe},fd_prestat_get(m,A){const O=new DataView(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const{ret:D,prestat:z}=_.fds[m].fd_prestat_get();return z!=null&&z.write_bytes(O,A),D}else return qe},fd_prestat_dir_name(m,A,O){if(_.fds[m]!=null){const{ret:D,prestat:z}=_.fds[m].fd_prestat_get();if(z==null)return D;const M=z.inner.pr_name;return new Uint8Array(_.inst.exports.memory.buffer).set(M.slice(0,O),A),M.byteLength>O?qs:Re}else return qe},fd_pwrite(m,A,O,D,z){const M=new DataView(_.inst.exports.memory.buffer),ne=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const ae=xt.read_bytes_array(M,A,O);let ue=0;for(const ce of ae){const ve=ne.slice(ce.buf,ce.buf+ce.buf_len),{ret:Fe,nwritten:je}=_.fds[m].fd_pwrite(ve,D);if(Fe!=Re)return M.setUint32(z,ue,!0),Fe;if(ue+=je,D+=BigInt(je),je!=ve.byteLength)break}return M.setUint32(z,ue,!0),Re}else return qe},fd_read(m,A,O,D){const z=new DataView(_.inst.exports.memory.buffer),M=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const ne=Et.read_bytes_array(z,A,O);let ae=0;for(const ue of ne){const{ret:ce,data:ve}=_.fds[m].fd_read(ue.buf_len);if(ce!=Re)return z.setUint32(D,ae,!0),ce;if(M.set(ve,ue.buf),ae+=ve.length,ve.length!=ue.buf_len)break}return z.setUint32(D,ae,!0),Re}else return qe},fd_readdir(m,A,O,D,z){const M=new DataView(_.inst.exports.memory.buffer),ne=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){let ae=0;for(;;){const{ret:ue,dirent:ce}=_.fds[m].fd_readdir_single(D);if(ue!=0)return M.setUint32(z,ae,!0),ue;if(ce==null)break;if(O-ae<ce.head_length()){ae=O;break}const ve=new ArrayBuffer(ce.head_length());if(ce.write_head_bytes(new DataView(ve),0),ne.set(new Uint8Array(ve).slice(0,Math.min(ve.byteLength,O-ae)),A),A+=ce.head_length(),ae+=ce.head_length(),O-ae<ce.name_length()){ae=O;break}ce.write_name_bytes(ne,A,O-ae),A+=ce.name_length(),ae+=ce.name_length(),D=ce.d_next}return M.setUint32(z,ae,!0),0}else return qe},fd_renumber(m,A){if(_.fds[m]!=null&&_.fds[A]!=null){const O=_.fds[A].fd_close();return O!=0?O:(_.fds[A]=_.fds[m],_.fds[m]=void 0,0)}else return qe},fd_seek(m,A,O,D){const z=new DataView(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const{ret:M,offset:ne}=_.fds[m].fd_seek(A,O);return z.setBigInt64(D,ne,!0),M}else return qe},fd_sync(m){return _.fds[m]!=null?_.fds[m].fd_sync():qe},fd_tell(m,A){const O=new DataView(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const{ret:D,offset:z}=_.fds[m].fd_tell();return O.setBigUint64(A,z,!0),D}else return qe},fd_write(m,A,O,D){const z=new DataView(_.inst.exports.memory.buffer),M=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const ne=xt.read_bytes_array(z,A,O);let ae=0;for(const ue of ne){const ce=M.slice(ue.buf,ue.buf+ue.buf_len),{ret:ve,nwritten:Fe}=_.fds[m].fd_write(ce);if(ve!=Re)return z.setUint32(D,ae,!0),ve;if(ae+=Fe,Fe!=ce.byteLength)break}return z.setUint32(D,ae,!0),Re}else return qe},path_create_directory(m,A,O){const D=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const z=new TextDecoder("utf-8").decode(D.slice(A,A+O));return _.fds[m].path_create_directory(z)}else return qe},path_filestat_get(m,A,O,D,z){const M=new DataView(_.inst.exports.memory.buffer),ne=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const ae=new TextDecoder("utf-8").decode(ne.slice(O,O+D)),{ret:ue,filestat:ce}=_.fds[m].path_filestat_get(A,ae);return ce!=null&&ce.write_bytes(M,z),ue}else return qe},path_filestat_set_times(m,A,O,D,z,M,ne){const ae=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const ue=new TextDecoder("utf-8").decode(ae.slice(O,O+D));return _.fds[m].path_filestat_set_times(A,ue,z,M,ne)}else return qe},path_link(m,A,O,D,z,M,ne){const ae=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null&&_.fds[z]!=null){const ue=new TextDecoder("utf-8").decode(ae.slice(O,O+D)),ce=new TextDecoder("utf-8").decode(ae.slice(M,M+ne)),{ret:ve,inode_obj:Fe}=_.fds[m].path_lookup(ue,A);return Fe==null?ve:_.fds[z].path_link(ce,Fe,!1)}else return qe},path_open(m,A,O,D,z,M,ne,ae,ue){const ce=new DataView(_.inst.exports.memory.buffer),ve=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const Fe=new TextDecoder("utf-8").decode(ve.slice(O,O+D));We.log(Fe);const{ret:je,fd_obj:Be}=_.fds[m].path_open(A,Fe,z,M,ne,ae);if(je!=0)return je;_.fds.push(Be);const Ve=_.fds.length-1;return ce.setUint32(ue,Ve,!0),0}else return qe},path_readlink(m,A,O,D,z,M){const ne=new DataView(_.inst.exports.memory.buffer),ae=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const ue=new TextDecoder("utf-8").decode(ae.slice(A,A+O));We.log(ue);const{ret:ce,data:ve}=_.fds[m].path_readlink(ue);if(ve!=null){const Fe=new TextEncoder().encode(ve);if(Fe.length>z)return ne.setUint32(M,0,!0),qe;ae.set(Fe,D),ne.setUint32(M,Fe.length,!0)}return ce}else return qe},path_remove_directory(m,A,O){const D=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const z=new TextDecoder("utf-8").decode(D.slice(A,A+O));return _.fds[m].path_remove_directory(z)}else return qe},path_rename(m,A,O,D,z,M){const ne=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null&&_.fds[D]!=null){const ae=new TextDecoder("utf-8").decode(ne.slice(A,A+O)),ue=new TextDecoder("utf-8").decode(ne.slice(z,z+M));let{ret:ce,inode_obj:ve}=_.fds[m].path_unlink(ae);if(ve==null)return ce;if(ce=_.fds[D].path_link(ue,ve,!0),ce!=Re&&_.fds[m].path_link(ae,ve,!0)!=Re)throw"path_link should always return success when relinking an inode back to the original place";return ce}else return qe},path_symlink(m,A,O,D,z){const M=new Uint8Array(_.inst.exports.memory.buffer);return _.fds[O]!=null?(new TextDecoder("utf-8").decode(M.slice(m,m+A)),new TextDecoder("utf-8").decode(M.slice(D,D+z)),Le):qe},path_unlink_file(m,A,O){const D=new Uint8Array(_.inst.exports.memory.buffer);if(_.fds[m]!=null){const z=new TextDecoder("utf-8").decode(D.slice(A,A+O));return _.fds[m].path_unlink_file(z)}else return qe},poll_oneoff(m,A,O){throw"async io not supported"},proc_exit(m){throw new Un(m)},proc_raise(m){throw"raised signal "+m},sched_yield(){},random_get(m,A){const O=new Uint8Array(_.inst.exports.memory.buffer);for(let D=0;D<A;D++)O[m+D]=Math.random()*256|0},sock_recv(m,A,O){throw"sockets not supported"},sock_send(m,A,O){throw"sockets not supported"},sock_shutdown(m,A){throw"sockets not supported"},sock_accept(m,A){throw"sockets not supported"}}}};class on{fd_allocate(o,u){return Le}fd_close(){return 0}fd_fdstat_get(){return{ret:Le,fdstat:null}}fd_fdstat_set_flags(o){return Le}fd_fdstat_set_rights(o,u){return Le}fd_filestat_get(){return{ret:Le,filestat:null}}fd_filestat_set_size(o){return Le}fd_filestat_set_times(o,u,e){return Le}fd_pread(o,u){return{ret:Le,data:new Uint8Array}}fd_prestat_get(){return{ret:Le,prestat:null}}fd_pwrite(o,u){return{ret:Le,nwritten:0}}fd_read(o){return{ret:Le,data:new Uint8Array}}fd_readdir_single(o){return{ret:Le,dirent:null}}fd_seek(o,u){return{ret:Le,offset:0n}}fd_sync(){return 0}fd_tell(){return{ret:Le,offset:0n}}fd_write(o){return{ret:Le,nwritten:0}}path_create_directory(o){return Le}path_filestat_get(o,u){return{ret:Le,filestat:null}}path_filestat_set_times(o,u,e,T,_){return Le}path_link(o,u,e){return Le}path_unlink(o){return{ret:Le,inode_obj:null}}path_lookup(o,u){return{ret:Le,inode_obj:null}}path_open(o,u,e,T,_,m){return{ret:it,fd_obj:null}}path_readlink(o){return{ret:Le,data:null}}path_remove_directory(o){return Le}path_rename(o,u,e){return Le}path_unlink_file(o){return Le}}class Jn{}class Kn extends on{fd_allocate(o,u){if(!(this.file.size>o+u)){const e=new Uint8Array(Number(o+u));e.set(this.file.data,0),this.file.data=e}return Re}fd_fdstat_get(){return{ret:0,fdstat:new nn(Mt,0)}}fd_filestat_set_size(o){if(this.file.size>o)this.file.data=new Uint8Array(this.file.data.buffer.slice(0,Number(o)));else{const u=new Uint8Array(Number(o));u.set(this.file.data,0),this.file.data=u}return Re}fd_read(o){const u=this.file.data.slice(Number(this.file_pos),Number(this.file_pos+BigInt(o)));return this.file_pos+=BigInt(u.length),{ret:0,data:u}}fd_pread(o,u){return{ret:0,data:this.file.data.slice(Number(u),Number(u+BigInt(o)))}}fd_seek(o,u){let e;switch(u){case Es:e=o;break;case xs:e=this.file_pos+o;break;case $n:e=BigInt(this.file.data.byteLength)+o;break;default:return{ret:Nt,offset:0n}}return e<0?{ret:Nt,offset:0n}:(this.file_pos=e,{ret:0,offset:this.file_pos})}fd_tell(){return{ret:0,offset:this.file_pos}}fd_write(o){if(this.file.readonly)return{ret:qe,nwritten:0};if(this.file_pos+BigInt(o.byteLength)>this.file.size){const u=this.file.data;this.file.data=new Uint8Array(Number(this.file_pos+BigInt(o.byteLength))),this.file.data.set(u)}return this.file.data.set(o,Number(this.file_pos)),this.file_pos+=BigInt(o.byteLength),{ret:0,nwritten:o.byteLength}}fd_pwrite(o,u){if(this.file.readonly)return{ret:qe,nwritten:0};if(u+BigInt(o.byteLength)>this.file.size){const e=this.file.data;this.file.data=new Uint8Array(Number(u+BigInt(o.byteLength))),this.file.data.set(e)}return this.file.data.set(o,Number(u)),{ret:0,nwritten:o.byteLength}}fd_filestat_get(){return{ret:0,filestat:this.file.stat()}}constructor(o){super(),this.file_pos=0n,this.file=o}}class Xn extends on{fd_seek(o,u){return{ret:qe,offset:0n}}fd_tell(){return{ret:qe,offset:0n}}fd_allocate(o,u){return qe}fd_fdstat_get(){return{ret:0,fdstat:new nn(Xe,0)}}fd_readdir_single(o){if(We.enabled&&(We.log("readdir_single",o),We.log(o,this.dir.contents.keys())),o==0n)return{ret:Re,dirent:new Kt(1n,".",Xe)};if(o==1n)return{ret:Re,dirent:new Kt(2n,"..",Xe)};if(o>=BigInt(this.dir.contents.size)+2n)return{ret:0,dirent:null};const[u,e]=Array.from(this.dir.contents.entries())[Number(o-2n)];return{ret:0,dirent:new Kt(o+1n,u,e.stat().filetype)}}path_filestat_get(o,u){const{ret:e,path:T}=rt.from(u);if(T==null)return{ret:e,filestat:null};const{ret:_,entry:m}=this.dir.get_entry_for_path(T);return m==null?{ret:_,filestat:null}:{ret:0,filestat:m.stat()}}path_lookup(o,u){const{ret:e,path:T}=rt.from(o);if(T==null)return{ret:e,inode_obj:null};const{ret:_,entry:m}=this.dir.get_entry_for_path(T);return m==null?{ret:_,inode_obj:null}:{ret:Re,inode_obj:m}}path_open(o,u,e,T,_,m){const{ret:A,path:O}=rt.from(u);if(O==null)return{ret:A,fd_obj:null};let{ret:D,entry:z}=this.dir.get_entry_for_path(O);if(z==null){if(D!=ct)return{ret:D,fd_obj:null};if((e&Xt)==Xt){const{ret:M,entry:ne}=this.dir.create_entry_for_path(u,(e&qt)==qt);if(ne==null)return{ret:M,fd_obj:null};z=ne}else return{ret:ct,fd_obj:null}}else if((e&Nn)==Nn)return{ret:Dt,fd_obj:null};return(e&qt)==qt&&z.stat().filetype!==Xe?{ret:it,fd_obj:null}:z.path_open(e,T,m)}path_create_directory(o){return this.path_open(0,o,Xt|qt,0n,0n,0).ret}path_link(o,u,e){const{ret:T,path:_}=rt.from(o);if(_==null)return T;if(_.is_dir)return ct;const{ret:m,parent_entry:A,filename:O,entry:D}=this.dir.get_parent_dir_and_entry_for_path(_,!0);if(A==null||O==null)return m;if(D!=null){const z=u.stat().filetype==Xe,M=D.stat().filetype==Xe;if(z&&M)if(e&&D instanceof ut){if(D.contents.size!=0)return Dn}else return Dt;else{if(z&&!M)return it;if(!z&&M)return Ln;if(!(u.stat().filetype==Mt&&D.stat().filetype==Mt))return Dt}}return!e&&u.stat().filetype==Xe?Yt:(A.contents.set(O,u),Re)}path_unlink(o){const{ret:u,path:e}=rt.from(o);if(e==null)return{ret:u,inode_obj:null};const{ret:T,parent_entry:_,filename:m,entry:A}=this.dir.get_parent_dir_and_entry_for_path(e,!0);return _==null||m==null?{ret:T,inode_obj:null}:A==null?{ret:ct,inode_obj:null}:(_.contents.delete(m),{ret:Re,inode_obj:A})}path_unlink_file(o){const{ret:u,path:e}=rt.from(o);if(e==null)return u;const{ret:T,parent_entry:_,filename:m,entry:A}=this.dir.get_parent_dir_and_entry_for_path(e,!1);return _==null||m==null||A==null?T:A.stat().filetype===Xe?Ln:(_.contents.delete(m),Re)}path_remove_directory(o){const{ret:u,path:e}=rt.from(o);if(e==null)return u;const{ret:T,parent_entry:_,filename:m,entry:A}=this.dir.get_parent_dir_and_entry_for_path(e,!1);return _==null||m==null||A==null?T:!(A instanceof ut)||A.stat().filetype!==Xe?it:A.contents.size!==0?Dn:_.contents.delete(m)?Re:ct}fd_filestat_get(){return{ret:0,filestat:this.dir.stat()}}fd_filestat_set_size(o){return qe}fd_read(o){return{ret:qe,data:new Uint8Array}}fd_pread(o,u){return{ret:qe,data:new Uint8Array}}fd_write(o){return{ret:qe,nwritten:0}}fd_pwrite(o,u){return{ret:qe,nwritten:0}}constructor(o){super(),this.dir=o}}class Bn extends Xn{fd_prestat_get(){return{ret:0,prestat:sn.dir(this.prestat_name)}}constructor(o,u){super(new ut(u)),this.prestat_name=o}}let Yn=class extends Jn{path_open(o,u,e){if(this.readonly&&(u&BigInt(Zt))==BigInt(Zt))return{ret:Yt,fd_obj:null};if((o&Mn)==Mn){if(this.readonly)return{ret:Yt,fd_obj:null};this.data=new Uint8Array([])}const T=new Kn(this);return e&Ss&&T.fd_seek(0n,$n),{ret:Re,fd_obj:T}}get size(){return BigInt(this.data.byteLength)}stat(){return new rn(Mt,this.size)}constructor(o,u){super(),this.data=new Uint8Array(o),this.readonly=!!(u!=null&&u.readonly)}},rt=class Zn{static from(o){const u=new Zn;if(u.is_dir=o.endsWith("/"),o.startsWith("/"))return{ret:Cn,path:null};if(o.includes("\0"))return{ret:Nt,path:null};for(const e of o.split("/"))if(!(e===""||e===".")){if(e===".."){if(u.parts.pop()==null)return{ret:Cn,path:null};continue}u.parts.push(e)}return{ret:Re,path:u}}to_path_string(){let o=this.parts.join("/");return this.is_dir&&(o+="/"),o}constructor(){this.parts=[],this.is_dir=!1}};class ut extends Jn{path_open(o,u,e){return{ret:Re,fd_obj:new Xn(this)}}stat(){return new rn(Xe,0n)}get_entry_for_path(o){let u=this;for(const e of o.parts){if(!(u instanceof ut))return{ret:it,entry:null};const T=u.contents.get(e);if(T!==void 0)u=T;else return We.log(e),{ret:ct,entry:null}}return o.is_dir&&u.stat().filetype!=Xe?{ret:it,entry:null}:{ret:Re,entry:u}}get_parent_dir_and_entry_for_path(o,u){const e=o.parts.pop();if(e===void 0)return{ret:Nt,parent_entry:null,filename:null,entry:null};const{ret:T,entry:_}=this.get_entry_for_path(o);if(_==null)return{ret:T,parent_entry:null,filename:null,entry:null};if(!(_ instanceof ut))return{ret:it,parent_entry:null,filename:null,entry:null};const m=_.contents.get(e);return m===void 0?u?{ret:Re,parent_entry:_,filename:e,entry:null}:{ret:ct,parent_entry:null,filename:null,entry:null}:o.is_dir&&m.stat().filetype!=Xe?{ret:it,parent_entry:null,filename:null,entry:null}:{ret:Re,parent_entry:_,filename:e,entry:m}}create_entry_for_path(o,u){const{ret:e,path:T}=rt.from(o);if(T==null)return{ret:e,entry:null};let{ret:_,parent_entry:m,filename:A,entry:O}=this.get_parent_dir_and_entry_for_path(T,!0);if(m==null||A==null)return{ret:_,entry:null};if(O!=null)return{ret:Dt,entry:null};We.log("create",T);let D;return u?D=new ut(new Map):D=new Yn(new ArrayBuffer(0)),m.contents.set(A,D),O=D,{ret:Re,entry:O}}constructor(o){super(),o instanceof Array?this.contents=new Map(o):this.contents=o}}class Ut extends on{fd_filestat_get(){return{ret:0,filestat:new rn(jn,BigInt(0))}}fd_fdstat_get(){const o=new nn(jn,0);return o.fs_rights_base=BigInt(Zt),{ret:0,fdstat:o}}fd_write(o){return this.write(o),{ret:0,nwritten:o.byteLength}}static lineBuffered(o){const u=new TextDecoder("utf-8",{fatal:!1});let e="";return new Ut(T=>{e+=u.decode(T,{stream:!0});const _=e.split(`
`);for(const[m,A]of _.entries())m<_.length-1?o(A):e=A})}constructor(o){super(),this.write=o}}const Os=async(h,o={})=>{var gt;const u=o.progressCallback,e=o.outputCallback,T=o.debug||!1,_=o.env||[],m=o.async||!1,A=o.skipInitialize||!1,O=typeof h=="string"?h:void 0;let D;O?(u==null||u(`Loading WebAssembly module from ${O}...`),D=await WebAssembly.compileStreaming(fetch(O))):D=h;const z=((gt=o.database)==null?void 0:gt.adapter)||"sqlite3_wasm",M=o.storageDir||"/rails/storage",ne=function($e){console.log($e),e==null||e($e)},ae=function($e){console.warn($e),e==null||e($e)},ue=new Map,ce=new Bn(M,ue),ve=new Bn("/",ue),Fe=[new Kn(new Yn([])),Ut.lineBuffered(ne),Ut.lineBuffered(ae),ve,ce],je=new Fs([],_,Fe,{debug:!1}),Be=new jt,Ve={wasi_snapshot_preview1:je.wasiImport};Be.addToImports(Ve),u==null||u("Instantiating WebAssembly module..");const ht=await WebAssembly.instantiate(D,Ve);await Be.setInstance(ht),je.initialize(ht),Be.initialize(["app.wasm","-W0","-e_=0","-EUTF-8","-r/bundle/setup"]);const At=`
    require "js"

    ENV["RAILS_ENV"] = "wasm"
    ENV["ACTIVE_RECORD_ADAPTER"] = "${z}"

    ENV["DEBUG"] = "1" if ${T}

    if ${T}
      puts "Initializing Rails application in debug mode..."
    else
      puts "Initializing Rails application..."
    end

    # hack /dev/null https://github.com/ruby/ruby.wasm/issues/556
    require "fileutils"
    FileUtils.mkdir_p("/dev")
    File.write("/dev/null", "")

    if ${A}
      puts "Rails application has been loaded but not initialized"
    else
      require "/rails/config/application.rb"
      Rails.application.initialize!

      puts "Rails application #{Rails.application.class.name.sub("::Application", "")} (#{Rails::VERSION::STRING}) has been initialized"
    end
  `;return m?await Be.evalAsync(At):Be.eval(At),Be};function Ps(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var St={exports:{}},Bt={decodeValues:!0,map:!1,silent:!1};function en(h){return typeof h=="string"&&!!h.trim()}function tn(h,o){var u=h.split(";").filter(en),e=u.shift(),T=Rs(e),_=T.name,m=T.value;o=o?Object.assign({},Bt,o):Bt;try{m=o.decodeValues?decodeURIComponent(m):m}catch(O){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+m+"'. Set options.decodeValues to false to disable this feature.",O)}var A={name:_,value:m};return u.forEach(function(O){var D=O.split("="),z=D.shift().trimLeft().toLowerCase(),M=D.join("=");z==="expires"?A.expires=new Date(M):z==="max-age"?A.maxAge=parseInt(M,10):z==="secure"?A.secure=!0:z==="httponly"?A.httpOnly=!0:z==="samesite"?A.sameSite=M:z==="partitioned"?A.partitioned=!0:A[z]=M}),A}function Rs(h){var o="",u="",e=h.split("=");return e.length>1?(o=e.shift(),u=e.join("=")):u=h,{name:o,value:u}}function er(h,o){if(o=o?Object.assign({},Bt,o):Bt,!h)return o.map?{}:[];if(h.headers)if(typeof h.headers.getSetCookie=="function")h=h.headers.getSetCookie();else if(h.headers["set-cookie"])h=h.headers["set-cookie"];else{var u=h.headers[Object.keys(h.headers).find(function(T){return T.toLowerCase()==="set-cookie"})];!u&&h.headers.cookie&&!o.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),h=u}if(Array.isArray(h)||(h=[h]),o.map){var e={};return h.filter(en).reduce(function(T,_){var m=tn(_,o);return T[m.name]=m,T},e)}else return h.filter(en).map(function(T){return tn(T,o)})}function Ls(h){if(Array.isArray(h))return h;if(typeof h!="string")return[];var o=[],u=0,e,T,_,m,A;function O(){for(;u<h.length&&/\s/.test(h.charAt(u));)u+=1;return u<h.length}function D(){return T=h.charAt(u),T!=="="&&T!==";"&&T!==","}for(;u<h.length;){for(e=u,A=!1;O();)if(T=h.charAt(u),T===","){for(_=u,u+=1,O(),m=u;u<h.length&&D();)u+=1;u<h.length&&h.charAt(u)==="="?(A=!0,u=m,o.push(h.substring(e,_)),e=u):u=_+1}else u+=1;(!A||u>=h.length)&&o.push(h.substring(e,h.length))}return o}St.exports=er;St.exports.parse=er;St.exports.parseString=tn;St.exports.splitCookiesString=Ls;var Ds=St.exports;const Cs=Ps(Ds);class js{constructor(o){this._respond=o,this.isProcessing=!1,this.queue=[]}async respond(o){if(this.isProcessing)return new Promise(e=>{this.queue.push({request:o,resolve:e})});const u=await this.process(o);return queueMicrotask(()=>this.tick()),u}async process(o){this.isProcessing=!0;let u;try{u=await this._respond(o)}catch(e){console.error(e),u=new Response(`Application Error: ${e.message}`,{status:500})}finally{this.isProcessing=!1}return u}async tick(){if(this.queue.length===0)return;const{request:o,resolve:u}=this.queue.shift(),e=await this.process(o);u(e),queueMicrotask(()=>this.tick())}}const Ns="BbC14y",Ms=async h=>new Promise((o,u)=>{const e=new FileReader;e.onload=()=>{o(e.result)},e.onerror=T=>{u(T)},e.readAsDataURL(h)}),Us=async(h,o)=>{const u=await caches.match(h);if(u){const _=new Headers(u.headers);return _.append("X-Cache","HIT"),console.log("[rails-web] Cache hit",h.url),new Response(u.body,{status:u.status,statusText:u.statusText,headers:_})}const e=await o(h),T=e.headers.get("Cache-Control");return T&&!T.includes("no-store")&&!T.includes("no-cache")&&T.match(/max-age=(\d{5,})/)&&(await caches.open("rails-wasm")).put(h,e.clone()),e};class Bs{constructor(o,u={}){this.logger=u.logger||console,this.cache=u.cache||!0,this.quiteAssets=u.quiteAssets||!0,this.assumeSSL=u.assumeSSL||!1,this.async=u.async||!1,this.vmSetup=o,this.cookiesEnabled=!!globalThis.cookieStore,this.queue=new js(this.process.bind(this))}handle(o){return o.url.includes("/assets/")||this.logger.log("[rails-web] Enqueue request: ",o),this.cache?Us(o,u=>this.queue.respond(u)):this.queue.respond(o)}async process(o){var _;let u=await this.vmSetup();const e=this.assumeSSL?o.url:o.url.replace("https://","http://"),T={};for(const[m,A]of o.headers.entries())T[`HTTP_${m.toUpperCase().replaceAll("-","_")}`]=A;try{if(this.cookiesEnabled){const ue=(await cookieStore.getAll()).map(ce=>`${ce.name}=${ce.value}`).join("; ");T.HTTP_COOKIE=ue}let m=null;if(o.method==="POST"||o.method==="PUT"||o.method==="PATCH")if(o.headers.get("content-type").includes("multipart/form-data")){const ue=await o.formData();for(const[ce,ve]of ue.entries())if(ve instanceof File)try{const Fe=await Ms(ve);ue.set(ce,Ns+Fe)}catch(Fe){console.warn(`[rails-wasm] Failed to convert file into data URI: ${Fe.message}. Ignoring file form input ${ce}`),ue.delete(ce)}m=new URLSearchParams(ue).toString()}else m=await o.text();e.includes("/assets/")||this.logger.log("[rails-web] Rails request",{url:e,headers:T,input:!!m});const A=`
        has_input = ${!!m}
        request = Rack::MockRequest.env_for(
          "${e}",
          JSON.parse(%q[${JSON.stringify(T)}]).merge(
            method: :${o.method}
          ).tap do
            _1.merge!(input: %q[${m}]) if has_input
          end
        )

        response = Rack::Response[*Rails.application.call(request)]
        status, headers, bodyiter = *response.finish

        body = ""
        body_is_set = false

        bodyiter.each do |part|
          body += part
          body_is_set = true
        end

        # Serve images as base64 from Ruby and decode back in JS
        if headers["Content-Type"]&.start_with?("image/")
          body = Base64.strict_encode64(body)
        end

        {
          status: status,
          headers: headers,
          body: body_is_set ? body : nil
        }
      `;let O;this.async?O=await u.eval(`proc do
${A}
end`).callAsync("call"):O=u.eval(A).toJS(),e.includes("/assets/")||this.logger.log("[rails-web] Rails response",O);let{status:D,headers:z,body:M}=O;if(this.cookiesEnabled){const ae=z["set-cookie"];ae&&Cs.parse(ae,{decodeValues:!1}).forEach(async ce=>{await cookieStore.set({name:ce.name,value:ce.value,domain:ce.domain,path:ce.path,expires:ce.expires,sameSite:ce.sameSite.toLowerCase()})})}(_=z["content-type"])!=null&&_.startsWith("image/")&&(this.logger.log("[rails-web]",`Converting ${z["content-type"]} image into blob`),M=await fetch(`data:${z["content-type"]};base64,${M}`).then(ae=>ae.blob()));const ne=new Response(M,{headers:z,status:D});return e.includes("/assets/")||this.logger.log("[rails-web] Response:",ne),ne}catch(m){return this.logger.error(m),new Response(`Application Error: ${m.message}`,{status:500})}}}function zs(h,o,u={}){const e=u.name||"sqlite4rails";h[e]={exec:function(T){let _=[],m=o.exec(T,{columnNames:_,returnValue:"resultRows"});return{cols:_,rows:m}},changes:function(){return o.changes()}}}var an=(()=>{var h=import.meta.url;return function(o){var u=o||{},e=typeof u<"u"?u:{},T,_;e.ready=new Promise(function(n,t){T=n,_=t});const m=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,m.debugModule("globalThis.location =",globalThis.location);const A="emscripten-bug-17951";e[A]=function n(t,s){t.env.foo=function(){};const r=e.locateFile(n.uri,typeof ne>"u"?"":ne);m.debugModule("instantiateWasm() uri =",r);const i=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),t).then(b=>s(b.instance,b.module)):async()=>i().then(b=>b.arrayBuffer()).then(b=>WebAssembly.instantiate(b,t)).then(b=>s(b.instance,b.module)))(),{}},e[A].uri="sqlite3.wasm";var O=Object.assign({},e),D="./this.program",z=typeof window=="object",M=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var ne="";function ae(n){return e.locateFile?e.locateFile(n,ne):ne+n}var ue,ce,ve;(z||M)&&(M?ne=self.location.href:typeof document<"u"&&document.currentScript&&(ne=document.currentScript.src),h&&(ne=h),ne.indexOf("blob:")!==0?ne=ne.substr(0,ne.replace(/[?#].*/,"").lastIndexOf("/")+1):ne="",ue=n=>{var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText},M&&(ve=n=>{var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ce=(n,t,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){t(r.response);return}s()},r.onerror=s,r.send(null)});var Fe=e.print||console.log.bind(console),je=e.printErr||console.warn.bind(console);Object.assign(e,O),O=null,e.arguments&&e.arguments,e.thisProgram&&(D=e.thisProgram),e.quit&&e.quit;var Be;e.wasmBinary&&(Be=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&_t("no native wasm support detected");var Ve,ht=!1;function At(n,t){n||_t(t)}var gt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function $e(n,t,s){for(var r=t+s,i=t;n[i]&&!(i>=r);)++i;if(i-t>16&&n.buffer&&gt)return gt.decode(n.subarray(t,i));for(var l="";t<i;){var b=n[t++];if(!(b&128)){l+=String.fromCharCode(b);continue}var E=n[t++]&63;if((b&224)==192){l+=String.fromCharCode((b&31)<<6|E);continue}var W=n[t++]&63;if((b&240)==224?b=(b&15)<<12|E<<6|W:b=(b&7)<<18|E<<12|W<<6|n[t++]&63,b<65536)l+=String.fromCharCode(b);else{var V=b-65536;l+=String.fromCharCode(55296|V>>10,56320|V&1023)}}return l}function nr(n,t){return n?$e(ft,n,t):""}function It(n,t,s,r){if(!(r>0))return 0;for(var i=s,l=s+r-1,b=0;b<n.length;++b){var E=n.charCodeAt(b);if(E>=55296&&E<=57343){var W=n.charCodeAt(++b);E=65536+((E&1023)<<10)|W&1023}if(E<=127){if(s>=l)break;t[s++]=E}else if(E<=2047){if(s+1>=l)break;t[s++]=192|E>>6,t[s++]=128|E&63}else if(E<=65535){if(s+2>=l)break;t[s++]=224|E>>12,t[s++]=128|E>>6&63,t[s++]=128|E&63}else{if(s+3>=l)break;t[s++]=240|E>>18,t[s++]=128|E>>12&63,t[s++]=128|E>>6&63,t[s++]=128|E&63}}return t[s]=0,s-i}function cn(n,t,s){return It(n,ft,t,s)}function bt(n){for(var t=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++s):t+=3}return t}var Qe,ft,un,xe,Ce;function fn(){var n=Ve.buffer;e.HEAP8=Qe=new Int8Array(n),e.HEAP16=un=new Int16Array(n),e.HEAP32=xe=new Int32Array(n),e.HEAPU8=ft=new Uint8Array(n),e.HEAPU16=new Uint16Array(n),e.HEAPU32=Ce=new Uint32Array(n),e.HEAPF32=new Float32Array(n),e.HEAPF64=new Float64Array(n),e.HEAP64=new BigInt64Array(n),e.HEAPU64=new BigUint64Array(n)}var _n=e.INITIAL_MEMORY||16777216;e.wasmMemory?Ve=e.wasmMemory:Ve=new WebAssembly.Memory({initial:_n/65536,maximum:2147483648/65536}),fn(),_n=Ve.buffer.byteLength;var dn=[],pn=[],mn=[];function rr(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)or(e.preRun.shift());Wt(dn)}function sr(){!e.noFSInit&&!a.init.initialized&&a.init(),a.ignorePermissions=!1,Wt(pn)}function ir(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)lr(e.postRun.shift());Wt(mn)}function or(n){dn.unshift(n)}function ar(n){pn.unshift(n)}function lr(n){mn.unshift(n)}var at=0,yt=null;function Js(n){return n}function zt(n){at++,e.monitorRunDependencies&&e.monitorRunDependencies(at)}function kt(n){if(at--,e.monitorRunDependencies&&e.monitorRunDependencies(at),at==0&&yt){var t=yt;yt=null,t()}}function _t(n){e.onAbort&&e.onAbort(n),n="Aborted("+n+")",je(n),ht=!0,n+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(n);throw _(t),t}var cr="data:application/octet-stream;base64,";function hn(n){return n.startsWith(cr)}var Je;e.locateFile?(Je="sqlite3.wasm",hn(Je)||(Je=ae(Je))):Je=new URL("/assets/sqlite3-65004f8d.wasm",self.location).href;function gn(n){try{if(n==Je&&Be)return new Uint8Array(Be);if(ve)return ve(n);throw"both async and sync fetching of the wasm failed"}catch(t){_t(t)}}function ur(){return!Be&&(z||M)&&typeof fetch=="function"?fetch(Je,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Je+"'";return n.arrayBuffer()}).catch(function(){return gn(Je)}):Promise.resolve().then(function(){return gn(Je)})}function fr(){var n={env:En,wasi_snapshot_preview1:En};function t(b,E){var W=b.exports;e.asm=W,e.asm.__indirect_function_table,ar(e.asm.__wasm_call_ctors),kt()}zt();function s(b){t(b.instance)}function r(b){return ur().then(function(E){return WebAssembly.instantiate(E,n)}).then(function(E){return E}).then(b,function(E){je("failed to asynchronously prepare wasm: "+E),_t(E)})}function i(){return!Be&&typeof WebAssembly.instantiateStreaming=="function"&&!hn(Je)&&typeof fetch=="function"?fetch(Je,{credentials:"same-origin"}).then(function(b){var E=WebAssembly.instantiateStreaming(b,n);return E.then(s,function(W){return je("wasm streaming compile failed: "+W),je("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(e.instantiateWasm)try{var l=e.instantiateWasm(n,t);return l}catch(b){je("Module.instantiateWasm callback failed with error: "+b),_(b)}return i().catch(_),{}}var Ie,Ne;function Wt(n){for(;n.length>0;)n.shift()(e)}var Te={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(n).slice(1)},normalizeArray:(n,t)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(t)for(;s;s--)n.unshift("..");return n},normalize:n=>{var t=Te.isAbs(n),s=n.substr(-1)==="/";return n=Te.normalizeArray(n.split("/").filter(r=>!!r),!t).join("/"),!n&&!t&&(n="."),n&&s&&(n+="/"),(t?"/":"")+n},dirname:n=>{var t=Te.splitPath(n),s=t[0],r=t[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=Te.normalize(n),n=n.replace(/\/$/,"");var t=n.lastIndexOf("/");return t===-1?n:n.substr(t+1)},join:function(){var n=Array.prototype.slice.call(arguments);return Te.normalize(n.join("/"))},join2:(n,t)=>Te.normalize(n+"/"+t)};function _r(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>_t("randomDevice")}var et={resolve:function(){for(var n="",t=!1,s=arguments.length-1;s>=-1&&!t;s--){var r=s>=0?arguments[s]:a.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,t=Te.isAbs(r)}return n=Te.normalizeArray(n.split("/").filter(i=>!!i),!t).join("/"),(t?"/":"")+n||"."},relative:(n,t)=>{n=et.resolve(n).substr(1),t=et.resolve(t).substr(1);function s(V){for(var K=0;K<V.length&&V[K]==="";K++);for(var re=V.length-1;re>=0&&V[re]==="";re--);return K>re?[]:V.slice(K,re-K+1)}for(var r=s(n.split("/")),i=s(t.split("/")),l=Math.min(r.length,i.length),b=l,E=0;E<l;E++)if(r[E]!==i[E]){b=E;break}for(var W=[],E=b;E<r.length;E++)W.push("..");return W=W.concat(i.slice(b)),W.join("/")}};function Vt(n,t,s){var r=s>0?s:bt(n)+1,i=new Array(r),l=It(n,i,0,i.length);return t&&(i.length=l),i}var lt={ttys:[],init:function(){},shutdown:function(){},register:function(n,t){lt.ttys[n]={input:[],output:[],ops:t},a.registerDevice(n,lt.stream_ops)},stream_ops:{open:function(n){var t=lt.ttys[n.node.rdev];if(!t)throw new a.ErrnoError(43);n.tty=t,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,t,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new a.ErrnoError(60);for(var l=0,b=0;b<r;b++){var E;try{E=n.tty.ops.get_char(n.tty)}catch{throw new a.ErrnoError(29)}if(E===void 0&&l===0)throw new a.ErrnoError(6);if(E==null)break;l++,t[s+b]=E}return l&&(n.node.timestamp=Date.now()),l},write:function(n,t,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new a.ErrnoError(60);try{for(var l=0;l<r;l++)n.tty.ops.put_char(n.tty,t[s+l])}catch{throw new a.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),l}},default_tty_ops:{get_char:function(n){if(!n.input.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;n.input=Vt(t,!0)}return n.input.shift()},put_char:function(n,t){t===null||t===10?(Fe($e(n.output,0)),n.output=[]):t!=0&&n.output.push(t)},fsync:function(n){n.output&&n.output.length>0&&(Fe($e(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,t){t===null||t===10?(je($e(n.output,0)),n.output=[]):t!=0&&n.output.push(t)},fsync:function(n){n.output&&n.output.length>0&&(je($e(n.output,0)),n.output=[])}}};function dr(n,t){return ft.fill(0,n,n+t),n}function pr(n,t){return Math.ceil(n/t)*t}function bn(n){n=pr(n,65536);var t=An(65536,n);return t?dr(t,n):0}var we={ops_table:null,mount:function(n){return we.createNode(null,"/",16895,0)},createNode:function(n,t,s,r){if(a.isBlkdev(s)||a.isFIFO(s))throw new a.ErrnoError(63);we.ops_table||(we.ops_table={dir:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr,lookup:we.node_ops.lookup,mknod:we.node_ops.mknod,rename:we.node_ops.rename,unlink:we.node_ops.unlink,rmdir:we.node_ops.rmdir,readdir:we.node_ops.readdir,symlink:we.node_ops.symlink},stream:{llseek:we.stream_ops.llseek}},file:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr},stream:{llseek:we.stream_ops.llseek,read:we.stream_ops.read,write:we.stream_ops.write,allocate:we.stream_ops.allocate,mmap:we.stream_ops.mmap,msync:we.stream_ops.msync}},link:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr,readlink:we.node_ops.readlink},stream:{}},chrdev:{node:{getattr:we.node_ops.getattr,setattr:we.node_ops.setattr},stream:a.chrdev_stream_ops}});var i=a.createNode(n,t,s,r);return a.isDir(i.mode)?(i.node_ops=we.ops_table.dir.node,i.stream_ops=we.ops_table.dir.stream,i.contents={}):a.isFile(i.mode)?(i.node_ops=we.ops_table.file.node,i.stream_ops=we.ops_table.file.stream,i.usedBytes=0,i.contents=null):a.isLink(i.mode)?(i.node_ops=we.ops_table.link.node,i.stream_ops=we.ops_table.link.stream):a.isChrdev(i.mode)&&(i.node_ops=we.ops_table.chrdev.node,i.stream_ops=we.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[t]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,t){var s=n.contents?n.contents.length:0;if(!(s>=t)){var r=1024*1024;t=Math.max(t,s*(s<r?2:1.125)>>>0),s!=0&&(t=Math.max(t,256));var i=n.contents;n.contents=new Uint8Array(t),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,t){if(n.usedBytes!=t)if(t==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(t),s&&n.contents.set(s.subarray(0,Math.min(t,n.usedBytes))),n.usedBytes=t}},node_ops:{getattr:function(n){var t={};return t.dev=a.isChrdev(n.mode)?n.id:1,t.ino=n.id,t.mode=n.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=n.rdev,a.isDir(n.mode)?t.size=4096:a.isFile(n.mode)?t.size=n.usedBytes:a.isLink(n.mode)?t.size=n.link.length:t.size=0,t.atime=new Date(n.timestamp),t.mtime=new Date(n.timestamp),t.ctime=new Date(n.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(n,t){t.mode!==void 0&&(n.mode=t.mode),t.timestamp!==void 0&&(n.timestamp=t.timestamp),t.size!==void 0&&we.resizeFileStorage(n,t.size)},lookup:function(n,t){throw a.genericErrors[44]},mknod:function(n,t,s,r){return we.createNode(n,t,s,r)},rename:function(n,t,s){if(a.isDir(n.mode)){var r;try{r=a.lookupNode(t,s)}catch{}if(r)for(var i in r.contents)throw new a.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,t.contents[s]=n,t.timestamp=n.parent.timestamp,n.parent=t},unlink:function(n,t){delete n.contents[t],n.timestamp=Date.now()},rmdir:function(n,t){var s=a.lookupNode(n,t);for(var r in s.contents)throw new a.ErrnoError(55);delete n.contents[t],n.timestamp=Date.now()},readdir:function(n){var t=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&t.push(s);return t},symlink:function(n,t,s){var r=we.createNode(n,t,41471,0);return r.link=s,r},readlink:function(n){if(!a.isLink(n.mode))throw new a.ErrnoError(28);return n.link}},stream_ops:{read:function(n,t,s,r,i){var l=n.node.contents;if(i>=n.node.usedBytes)return 0;var b=Math.min(n.node.usedBytes-i,r);if(b>8&&l.subarray)t.set(l.subarray(i,i+b),s);else for(var E=0;E<b;E++)t[s+E]=l[i+E];return b},write:function(n,t,s,r,i,l){if(t.buffer===Qe.buffer&&(l=!1),!r)return 0;var b=n.node;if(b.timestamp=Date.now(),t.subarray&&(!b.contents||b.contents.subarray)){if(l)return b.contents=t.subarray(s,s+r),b.usedBytes=r,r;if(b.usedBytes===0&&i===0)return b.contents=t.slice(s,s+r),b.usedBytes=r,r;if(i+r<=b.usedBytes)return b.contents.set(t.subarray(s,s+r),i),r}if(we.expandFileStorage(b,i+r),b.contents.subarray&&t.subarray)b.contents.set(t.subarray(s,s+r),i);else for(var E=0;E<r;E++)b.contents[i+E]=t[s+E];return b.usedBytes=Math.max(b.usedBytes,i+r),r},llseek:function(n,t,s){var r=t;if(s===1?r+=n.position:s===2&&a.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new a.ErrnoError(28);return r},allocate:function(n,t,s){we.expandFileStorage(n.node,t+s),n.node.usedBytes=Math.max(n.node.usedBytes,t+s)},mmap:function(n,t,s,r,i){if(!a.isFile(n.node.mode))throw new a.ErrnoError(43);var l,b,E=n.node.contents;if(!(i&2)&&E.buffer===Qe.buffer)b=!1,l=E.byteOffset;else{if((s>0||s+t<E.length)&&(E.subarray?E=E.subarray(s,s+t):E=Array.prototype.slice.call(E,s,s+t)),b=!0,l=bn(t),!l)throw new a.ErrnoError(48);Qe.set(E,l)}return{ptr:l,allocated:b}},msync:function(n,t,s,r,i){return we.stream_ops.write(n,t,0,r,s,!1),0}}};function mr(n,t,s,r){var i=r?"":"al "+n;ce(n,l=>{At(l,'Loading data file "'+n+'" failed (no arrayBuffer).'),t(new Uint8Array(l)),i&&kt()},l=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&zt()}var a={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,t={})=>{if(n=et.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(t=Object.assign(s,t),t.recurse_count>8)throw new a.ErrnoError(32);for(var r=n.split("/").filter(re=>!!re),i=a.root,l="/",b=0;b<r.length;b++){var E=b===r.length-1;if(E&&t.parent)break;if(i=a.lookupNode(i,r[b]),l=Te.join2(l,r[b]),a.isMountpoint(i)&&(!E||E&&t.follow_mount)&&(i=i.mounted.root),!E||t.follow)for(var W=0;a.isLink(i.mode);){var V=a.readlink(l);l=et.resolve(Te.dirname(l),V);var K=a.lookupPath(l,{recurse_count:t.recurse_count+1});if(i=K.node,W++>40)throw new a.ErrnoError(32)}}return{path:l,node:i}},getPath:n=>{for(var t;;){if(a.isRoot(n)){var s=n.mount.mountpoint;return t?s[s.length-1]!=="/"?s+"/"+t:s+t:s}t=t?n.name+"/"+t:n.name,n=n.parent}},hashName:(n,t)=>{for(var s=0,r=0;r<t.length;r++)s=(s<<5)-s+t.charCodeAt(r)|0;return(n+s>>>0)%a.nameTable.length},hashAddNode:n=>{var t=a.hashName(n.parent.id,n.name);n.name_next=a.nameTable[t],a.nameTable[t]=n},hashRemoveNode:n=>{var t=a.hashName(n.parent.id,n.name);if(a.nameTable[t]===n)a.nameTable[t]=n.name_next;else for(var s=a.nameTable[t];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,t)=>{var s=a.mayLookup(n);if(s)throw new a.ErrnoError(s,n);for(var r=a.hashName(n.id,t),i=a.nameTable[r];i;i=i.name_next){var l=i.name;if(i.parent.id===n.id&&l===t)return i}return a.lookup(n,t)},createNode:(n,t,s,r)=>{var i=new a.FSNode(n,t,s,r);return a.hashAddNode(i),i},destroyNode:n=>{a.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var t=a.flagModes[n];if(typeof t>"u")throw new Error("Unknown file open mode: "+n);return t},flagsToPermissionString:n=>{var t=["r","w","rw"][n&3];return n&512&&(t+="w"),t},nodePermissions:(n,t)=>a.ignorePermissions?0:t.includes("r")&&!(n.mode&292)||t.includes("w")&&!(n.mode&146)||t.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var t=a.nodePermissions(n,"x");return t||(n.node_ops.lookup?0:2)},mayCreate:(n,t)=>{try{var s=a.lookupNode(n,t);return 20}catch{}return a.nodePermissions(n,"wx")},mayDelete:(n,t,s)=>{var r;try{r=a.lookupNode(n,t)}catch(l){return l.errno}var i=a.nodePermissions(n,"wx");if(i)return i;if(s){if(!a.isDir(r.mode))return 54;if(a.isRoot(r)||a.getPath(r)===a.cwd())return 10}else if(a.isDir(r.mode))return 31;return 0},mayOpen:(n,t)=>n?a.isLink(n.mode)?32:a.isDir(n.mode)&&(a.flagsToPermissionString(t)!=="r"||t&512)?31:a.nodePermissions(n,a.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,t=a.MAX_OPEN_FDS)=>{for(var s=n;s<=t;s++)if(!a.streams[s])return s;throw new a.ErrnoError(33)},getStream:n=>a.streams[n],createStream:(n,t,s)=>{a.FSStream||(a.FSStream=function(){this.shared={}},a.FSStream.prototype={},Object.defineProperties(a.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new a.FSStream,n);var r=a.nextfd(t,s);return n.fd=r,a.streams[r]=n,n},closeStream:n=>{a.streams[n]=null},chrdev_stream_ops:{open:n=>{var t=a.getDevice(n.node.rdev);n.stream_ops=t.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new a.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,t)=>n<<8|t,registerDevice:(n,t)=>{a.devices[n]={stream_ops:t}},getDevice:n=>a.devices[n],getMounts:n=>{for(var t=[],s=[n];s.length;){var r=s.pop();t.push(r),s.push.apply(s,r.mounts)}return t},syncfs:(n,t)=>{typeof n=="function"&&(t=n,n=!1),a.syncFSRequests++,a.syncFSRequests>1&&je("warning: "+a.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=a.getMounts(a.root.mount),r=0;function i(b){return a.syncFSRequests--,t(b)}function l(b){if(b)return l.errored?void 0:(l.errored=!0,i(b));++r>=s.length&&i(null)}s.forEach(b=>{if(!b.type.syncfs)return l(null);b.type.syncfs(b,n,l)})},mount:(n,t,s)=>{var r=s==="/",i=!s,l;if(r&&a.root)throw new a.ErrnoError(10);if(!r&&!i){var b=a.lookupPath(s,{follow_mount:!1});if(s=b.path,l=b.node,a.isMountpoint(l))throw new a.ErrnoError(10);if(!a.isDir(l.mode))throw new a.ErrnoError(54)}var E={type:n,opts:t,mountpoint:s,mounts:[]},W=n.mount(E);return W.mount=E,E.root=W,r?a.root=W:l&&(l.mounted=E,l.mount&&l.mount.mounts.push(E)),W},unmount:n=>{var t=a.lookupPath(n,{follow_mount:!1});if(!a.isMountpoint(t.node))throw new a.ErrnoError(28);var s=t.node,r=s.mounted,i=a.getMounts(r);Object.keys(a.nameTable).forEach(b=>{for(var E=a.nameTable[b];E;){var W=E.name_next;i.includes(E.mount)&&a.destroyNode(E),E=W}}),s.mounted=null;var l=s.mount.mounts.indexOf(r);s.mount.mounts.splice(l,1)},lookup:(n,t)=>n.node_ops.lookup(n,t),mknod:(n,t,s)=>{var r=a.lookupPath(n,{parent:!0}),i=r.node,l=Te.basename(n);if(!l||l==="."||l==="..")throw new a.ErrnoError(28);var b=a.mayCreate(i,l);if(b)throw new a.ErrnoError(b);if(!i.node_ops.mknod)throw new a.ErrnoError(63);return i.node_ops.mknod(i,l,t,s)},create:(n,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,a.mknod(n,t,0)),mkdir:(n,t)=>(t=t!==void 0?t:511,t&=1023,t|=16384,a.mknod(n,t,0)),mkdirTree:(n,t)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{a.mkdir(r,t)}catch(l){if(l.errno!=20)throw l}}},mkdev:(n,t,s)=>(typeof s>"u"&&(s=t,t=438),t|=8192,a.mknod(n,t,s)),symlink:(n,t)=>{if(!et.resolve(n))throw new a.ErrnoError(44);var s=a.lookupPath(t,{parent:!0}),r=s.node;if(!r)throw new a.ErrnoError(44);var i=Te.basename(t),l=a.mayCreate(r,i);if(l)throw new a.ErrnoError(l);if(!r.node_ops.symlink)throw new a.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,t)=>{var s=Te.dirname(n),r=Te.dirname(t),i=Te.basename(n),l=Te.basename(t),b,E,W;if(b=a.lookupPath(n,{parent:!0}),E=b.node,b=a.lookupPath(t,{parent:!0}),W=b.node,!E||!W)throw new a.ErrnoError(44);if(E.mount!==W.mount)throw new a.ErrnoError(75);var V=a.lookupNode(E,i),K=et.relative(n,r);if(K.charAt(0)!==".")throw new a.ErrnoError(28);if(K=et.relative(t,s),K.charAt(0)!==".")throw new a.ErrnoError(55);var re;try{re=a.lookupNode(W,l)}catch{}if(V!==re){var C=a.isDir(V.mode),L=a.mayDelete(E,i,C);if(L)throw new a.ErrnoError(L);if(L=re?a.mayDelete(W,l,C):a.mayCreate(W,l),L)throw new a.ErrnoError(L);if(!E.node_ops.rename)throw new a.ErrnoError(63);if(a.isMountpoint(V)||re&&a.isMountpoint(re))throw new a.ErrnoError(10);if(W!==E&&(L=a.nodePermissions(E,"w"),L))throw new a.ErrnoError(L);a.hashRemoveNode(V);try{E.node_ops.rename(V,W,l)}catch(G){throw G}finally{a.hashAddNode(V)}}},rmdir:n=>{var t=a.lookupPath(n,{parent:!0}),s=t.node,r=Te.basename(n),i=a.lookupNode(s,r),l=a.mayDelete(s,r,!0);if(l)throw new a.ErrnoError(l);if(!s.node_ops.rmdir)throw new a.ErrnoError(63);if(a.isMountpoint(i))throw new a.ErrnoError(10);s.node_ops.rmdir(s,r),a.destroyNode(i)},readdir:n=>{var t=a.lookupPath(n,{follow:!0}),s=t.node;if(!s.node_ops.readdir)throw new a.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var t=a.lookupPath(n,{parent:!0}),s=t.node;if(!s)throw new a.ErrnoError(44);var r=Te.basename(n),i=a.lookupNode(s,r),l=a.mayDelete(s,r,!1);if(l)throw new a.ErrnoError(l);if(!s.node_ops.unlink)throw new a.ErrnoError(63);if(a.isMountpoint(i))throw new a.ErrnoError(10);s.node_ops.unlink(s,r),a.destroyNode(i)},readlink:n=>{var t=a.lookupPath(n),s=t.node;if(!s)throw new a.ErrnoError(44);if(!s.node_ops.readlink)throw new a.ErrnoError(28);return et.resolve(a.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,t)=>{var s=a.lookupPath(n,{follow:!t}),r=s.node;if(!r)throw new a.ErrnoError(44);if(!r.node_ops.getattr)throw new a.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>a.stat(n,!0),chmod:(n,t,s)=>{var r;if(typeof n=="string"){var i=a.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new a.ErrnoError(63);r.node_ops.setattr(r,{mode:t&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,t)=>{a.chmod(n,t,!0)},fchmod:(n,t)=>{var s=a.getStream(n);if(!s)throw new a.ErrnoError(8);a.chmod(s.node,t)},chown:(n,t,s,r)=>{var i;if(typeof n=="string"){var l=a.lookupPath(n,{follow:!r});i=l.node}else i=n;if(!i.node_ops.setattr)throw new a.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,t,s)=>{a.chown(n,t,s,!0)},fchown:(n,t,s)=>{var r=a.getStream(n);if(!r)throw new a.ErrnoError(8);a.chown(r.node,t,s)},truncate:(n,t)=>{if(t<0)throw new a.ErrnoError(28);var s;if(typeof n=="string"){var r=a.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new a.ErrnoError(63);if(a.isDir(s.mode))throw new a.ErrnoError(31);if(!a.isFile(s.mode))throw new a.ErrnoError(28);var i=a.nodePermissions(s,"w");if(i)throw new a.ErrnoError(i);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate:(n,t)=>{var s=a.getStream(n);if(!s)throw new a.ErrnoError(8);if(!(s.flags&2097155))throw new a.ErrnoError(28);a.truncate(s.node,t)},utime:(n,t,s)=>{var r=a.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(t,s)})},open:(n,t,s)=>{if(n==="")throw new a.ErrnoError(44);t=typeof t=="string"?a.modeStringToFlags(t):t,s=typeof s>"u"?438:s,t&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=Te.normalize(n);try{var i=a.lookupPath(n,{follow:!(t&131072)});r=i.node}catch{}}var l=!1;if(t&64)if(r){if(t&128)throw new a.ErrnoError(20)}else r=a.mknod(n,s,0),l=!0;if(!r)throw new a.ErrnoError(44);if(a.isChrdev(r.mode)&&(t&=-513),t&65536&&!a.isDir(r.mode))throw new a.ErrnoError(54);if(!l){var b=a.mayOpen(r,t);if(b)throw new a.ErrnoError(b)}t&512&&!l&&a.truncate(r,0),t&=-131713;var E=a.createStream({node:r,path:a.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return E.stream_ops.open&&E.stream_ops.open(E),e.logReadFiles&&!(t&1)&&(a.readFiles||(a.readFiles={}),n in a.readFiles||(a.readFiles[n]=1)),E},close:n=>{if(a.isClosed(n))throw new a.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(t){throw t}finally{a.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,t,s)=>{if(a.isClosed(n))throw new a.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new a.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new a.ErrnoError(28);return n.position=n.stream_ops.llseek(n,t,s),n.ungotten=[],n.position},read:(n,t,s,r,i)=>{if(r<0||i<0)throw new a.ErrnoError(28);if(a.isClosed(n))throw new a.ErrnoError(8);if((n.flags&2097155)===1)throw new a.ErrnoError(8);if(a.isDir(n.node.mode))throw new a.ErrnoError(31);if(!n.stream_ops.read)throw new a.ErrnoError(28);var l=typeof i<"u";if(!l)i=n.position;else if(!n.seekable)throw new a.ErrnoError(70);var b=n.stream_ops.read(n,t,s,r,i);return l||(n.position+=b),b},write:(n,t,s,r,i,l)=>{if(r<0||i<0)throw new a.ErrnoError(28);if(a.isClosed(n))throw new a.ErrnoError(8);if(!(n.flags&2097155))throw new a.ErrnoError(8);if(a.isDir(n.node.mode))throw new a.ErrnoError(31);if(!n.stream_ops.write)throw new a.ErrnoError(28);n.seekable&&n.flags&1024&&a.llseek(n,0,2);var b=typeof i<"u";if(!b)i=n.position;else if(!n.seekable)throw new a.ErrnoError(70);var E=n.stream_ops.write(n,t,s,r,i,l);return b||(n.position+=E),E},allocate:(n,t,s)=>{if(a.isClosed(n))throw new a.ErrnoError(8);if(t<0||s<=0)throw new a.ErrnoError(28);if(!(n.flags&2097155))throw new a.ErrnoError(8);if(!a.isFile(n.node.mode)&&!a.isDir(n.node.mode))throw new a.ErrnoError(43);if(!n.stream_ops.allocate)throw new a.ErrnoError(138);n.stream_ops.allocate(n,t,s)},mmap:(n,t,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new a.ErrnoError(2);if((n.flags&2097155)===1)throw new a.ErrnoError(2);if(!n.stream_ops.mmap)throw new a.ErrnoError(43);return n.stream_ops.mmap(n,t,s,r,i)},msync:(n,t,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,t,s,r,i):0,munmap:n=>0,ioctl:(n,t,s)=>{if(!n.stream_ops.ioctl)throw new a.ErrnoError(59);return n.stream_ops.ioctl(n,t,s)},readFile:(n,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error('Invalid encoding type "'+t.encoding+'"');var s,r=a.open(n,t.flags),i=a.stat(n),l=i.size,b=new Uint8Array(l);return a.read(r,b,0,l,0),t.encoding==="utf8"?s=$e(b,0):t.encoding==="binary"&&(s=b),a.close(r),s},writeFile:(n,t,s={})=>{s.flags=s.flags||577;var r=a.open(n,s.flags,s.mode);if(typeof t=="string"){var i=new Uint8Array(bt(t)+1),l=It(t,i,0,i.length);a.write(r,i,0,l,void 0,s.canOwn)}else if(ArrayBuffer.isView(t))a.write(r,t,0,t.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");a.close(r)},cwd:()=>a.currentPath,chdir:n=>{var t=a.lookupPath(n,{follow:!0});if(t.node===null)throw new a.ErrnoError(44);if(!a.isDir(t.node.mode))throw new a.ErrnoError(54);var s=a.nodePermissions(t.node,"x");if(s)throw new a.ErrnoError(s);a.currentPath=t.path},createDefaultDirectories:()=>{a.mkdir("/tmp"),a.mkdir("/home"),a.mkdir("/home/web_user")},createDefaultDevices:()=>{a.mkdir("/dev"),a.registerDevice(a.makedev(1,3),{read:()=>0,write:(t,s,r,i,l)=>i}),a.mkdev("/dev/null",a.makedev(1,3)),lt.register(a.makedev(5,0),lt.default_tty_ops),lt.register(a.makedev(6,0),lt.default_tty1_ops),a.mkdev("/dev/tty",a.makedev(5,0)),a.mkdev("/dev/tty1",a.makedev(6,0));var n=_r();a.createDevice("/dev","random",n),a.createDevice("/dev","urandom",n),a.mkdir("/dev/shm"),a.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{a.mkdir("/proc");var n=a.mkdir("/proc/self");a.mkdir("/proc/self/fd"),a.mount({mount:()=>{var t=a.createNode(n,"fd",16895,73);return t.node_ops={lookup:(s,r)=>{var i=+r,l=a.getStream(i);if(!l)throw new a.ErrnoError(8);var b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>l.path}};return b.parent=b,b}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?a.createDevice("/dev","stdin",e.stdin):a.symlink("/dev/tty","/dev/stdin"),e.stdout?a.createDevice("/dev","stdout",null,e.stdout):a.symlink("/dev/tty","/dev/stdout"),e.stderr?a.createDevice("/dev","stderr",null,e.stderr):a.symlink("/dev/tty1","/dev/stderr"),a.open("/dev/stdin",0),a.open("/dev/stdout",1),a.open("/dev/stderr",1)},ensureErrnoError:()=>{a.ErrnoError||(a.ErrnoError=function(t,s){this.node=s,this.setErrno=function(r){this.errno=r},this.setErrno(t),this.message="FS error"},a.ErrnoError.prototype=new Error,a.ErrnoError.prototype.constructor=a.ErrnoError,[44].forEach(n=>{a.genericErrors[n]=new a.ErrnoError(n),a.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{a.ensureErrnoError(),a.nameTable=new Array(4096),a.mount(we,{},"/"),a.createDefaultDirectories(),a.createDefaultDevices(),a.createSpecialDirectories(),a.filesystems={MEMFS:we}},init:(n,t,s)=>{a.init.initialized=!0,a.ensureErrnoError(),e.stdin=n||e.stdin,e.stdout=t||e.stdout,e.stderr=s||e.stderr,a.createStandardStreams()},quit:()=>{a.init.initialized=!1;for(var n=0;n<a.streams.length;n++){var t=a.streams[n];t&&a.close(t)}},getMode:(n,t)=>{var s=0;return n&&(s|=365),t&&(s|=146),s},findObject:(n,t)=>{var s=a.analyzePath(n,t);return s.exists?s.object:null},analyzePath:(n,t)=>{try{var s=a.lookupPath(n,{follow:!t});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=a.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=Te.basename(n),s=a.lookupPath(n,{follow:!t}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,t,s,r)=>{n=typeof n=="string"?n:a.getPath(n);for(var i=t.split("/").reverse();i.length;){var l=i.pop();if(l){var b=Te.join2(n,l);try{a.mkdir(b)}catch{}n=b}}return b},createFile:(n,t,s,r,i)=>{var l=Te.join2(typeof n=="string"?n:a.getPath(n),t),b=a.getMode(r,i);return a.create(l,b)},createDataFile:(n,t,s,r,i,l)=>{var b=t;n&&(n=typeof n=="string"?n:a.getPath(n),b=t?Te.join2(n,t):n);var E=a.getMode(r,i),W=a.create(b,E);if(s){if(typeof s=="string"){for(var V=new Array(s.length),K=0,re=s.length;K<re;++K)V[K]=s.charCodeAt(K);s=V}a.chmod(W,E|146);var C=a.open(W,577);a.write(C,s,0,s.length,0,l),a.close(C),a.chmod(W,E)}return W},createDevice:(n,t,s,r)=>{var i=Te.join2(typeof n=="string"?n:a.getPath(n),t),l=a.getMode(!!s,!!r);a.createDevice.major||(a.createDevice.major=64);var b=a.makedev(a.createDevice.major++,0);return a.registerDevice(b,{open:E=>{E.seekable=!1},close:E=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(E,W,V,K,re)=>{for(var C=0,L=0;L<K;L++){var G;try{G=s()}catch{throw new a.ErrnoError(29)}if(G===void 0&&C===0)throw new a.ErrnoError(6);if(G==null)break;C++,W[V+L]=G}return C&&(E.node.timestamp=Date.now()),C},write:(E,W,V,K,re)=>{for(var C=0;C<K;C++)try{r(W[V+C])}catch{throw new a.ErrnoError(29)}return K&&(E.node.timestamp=Date.now()),C}}),a.mkdev(i,l,b)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(ue)try{n.contents=Vt(ue(n.url),!0),n.usedBytes=n.contents.length}catch{throw new a.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,t,s,r,i)=>{function l(){this.lengthKnown=!1,this.chunks=[]}if(l.prototype.get=function(L){if(!(L>this.length-1||L<0)){var G=L%this.chunkSize,I=L/this.chunkSize|0;return this.getter(I)[G]}},l.prototype.setDataGetter=function(L){this.getter=L},l.prototype.cacheLength=function(){var L=new XMLHttpRequest;if(L.open("HEAD",s,!1),L.send(null),!(L.status>=200&&L.status<300||L.status===304))throw new Error("Couldn't load "+s+". Status: "+L.status);var G=Number(L.getResponseHeader("Content-length")),I,F=(I=L.getResponseHeader("Accept-Ranges"))&&I==="bytes",N=(I=L.getResponseHeader("Content-Encoding"))&&I==="gzip",U=1024*1024;F||(U=G);var H=($,te)=>{if($>te)throw new Error("invalid range ("+$+", "+te+") or no bytes requested!");if(te>G-1)throw new Error("only "+G+" bytes available! programmer error!");var f=new XMLHttpRequest;if(f.open("GET",s,!1),G!==U&&f.setRequestHeader("Range","bytes="+$+"-"+te),f.responseType="arraybuffer",f.overrideMimeType&&f.overrideMimeType("text/plain; charset=x-user-defined"),f.send(null),!(f.status>=200&&f.status<300||f.status===304))throw new Error("Couldn't load "+s+". Status: "+f.status);return f.response!==void 0?new Uint8Array(f.response||[]):Vt(f.responseText||"",!0)},R=this;R.setDataGetter($=>{var te=$*U,f=($+1)*U-1;if(f=Math.min(f,G-1),typeof R.chunks[$]>"u"&&(R.chunks[$]=H(te,f)),typeof R.chunks[$]>"u")throw new Error("doXHR failed!");return R.chunks[$]}),(N||!G)&&(U=G=1,G=this.getter(0).length,U=G,Fe("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=G,this._chunkSize=U,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!M)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var b=new l;Object.defineProperties(b,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var E={isDevice:!1,contents:b}}else var E={isDevice:!1,url:s};var W=a.createFile(n,t,E,r,i);E.contents?W.contents=E.contents:E.url&&(W.contents=null,W.url=E.url),Object.defineProperties(W,{usedBytes:{get:function(){return this.contents.length}}});var V={},K=Object.keys(W.stream_ops);K.forEach(C=>{var L=W.stream_ops[C];V[C]=function(){return a.forceLoadFile(W),L.apply(null,arguments)}});function re(C,L,G,I,F){var N=C.node.contents;if(F>=N.length)return 0;var U=Math.min(N.length-F,I);if(N.slice)for(var H=0;H<U;H++)L[G+H]=N[F+H];else for(var H=0;H<U;H++)L[G+H]=N.get(F+H);return U}return V.read=(C,L,G,I,F)=>(a.forceLoadFile(W),re(C,L,G,I,F)),V.mmap=(C,L,G,I,F)=>{a.forceLoadFile(W);var N=bn(L);if(!N)throw new a.ErrnoError(48);return re(C,Qe,N,L,G),{ptr:N,allocated:!0}},W.stream_ops=V,W},createPreloadedFile:(n,t,s,r,i,l,b,E,W,V)=>{var K=t?et.resolve(Te.join2(n,t)):n;function re(C){function L(G){V&&V(),E||a.createDataFile(n,t,G,r,i,W),l&&l(),kt()}Browser.handledByPreloadPlugin(C,K,L,()=>{b&&b(),kt()})||L(C)}zt(),typeof s=="string"?mr(s,C=>re(C),b):re(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var r=a.indexedDB();try{var i=r.open(a.DB_NAME(),a.DB_VERSION)}catch(l){return s(l)}i.onupgradeneeded=()=>{Fe("creating db");var l=i.result;l.createObjectStore(a.DB_STORE_NAME)},i.onsuccess=()=>{var l=i.result,b=l.transaction([a.DB_STORE_NAME],"readwrite"),E=b.objectStore(a.DB_STORE_NAME),W=0,V=0,K=n.length;function re(){V==0?t():s()}n.forEach(C=>{var L=E.put(a.analyzePath(C).object.contents,C);L.onsuccess=()=>{W++,W+V==K&&re()},L.onerror=()=>{V++,W+V==K&&re()}}),b.onerror=s},i.onerror=s},loadFilesFromDB:(n,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var r=a.indexedDB();try{var i=r.open(a.DB_NAME(),a.DB_VERSION)}catch(l){return s(l)}i.onupgradeneeded=s,i.onsuccess=()=>{var l=i.result;try{var b=l.transaction([a.DB_STORE_NAME],"readonly")}catch(C){s(C);return}var E=b.objectStore(a.DB_STORE_NAME),W=0,V=0,K=n.length;function re(){V==0?t():s()}n.forEach(C=>{var L=E.get(C);L.onsuccess=()=>{a.analyzePath(C).exists&&a.unlink(C),a.createDataFile(Te.dirname(C),Te.basename(C),L.result,!0,!0,!0),W++,W+V==K&&re()},L.onerror=()=>{V++,W+V==K&&re()}}),b.onerror=s},i.onerror=s}},ge={DEFAULT_POLLMASK:5,calculateAt:function(n,t,s){if(Te.isAbs(t))return t;var r;if(n===-100)r=a.cwd();else{var i=ge.getStreamFromFD(n);r=i.path}if(t.length==0){if(!s)throw new a.ErrnoError(44);return r}return Te.join2(r,t)},doStat:function(n,t,s){try{var r=n(t)}catch(E){if(E&&E.node&&Te.normalize(t)!==Te.normalize(a.getPath(E.node)))return-54;throw E}xe[s>>2]=r.dev,xe[s+8>>2]=r.ino,xe[s+12>>2]=r.mode,Ce[s+16>>2]=r.nlink,xe[s+20>>2]=r.uid,xe[s+24>>2]=r.gid,xe[s+28>>2]=r.rdev,Ne=[r.size>>>0,(Ie=r.size,+Math.abs(Ie)>=1?Ie>0?(Math.min(+Math.floor(Ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Ie-+(~~Ie>>>0))/4294967296)>>>0:0)],xe[s+40>>2]=Ne[0],xe[s+44>>2]=Ne[1],xe[s+48>>2]=4096,xe[s+52>>2]=r.blocks;var i=r.atime.getTime(),l=r.mtime.getTime(),b=r.ctime.getTime();return Ne=[Math.floor(i/1e3)>>>0,(Ie=Math.floor(i/1e3),+Math.abs(Ie)>=1?Ie>0?(Math.min(+Math.floor(Ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Ie-+(~~Ie>>>0))/4294967296)>>>0:0)],xe[s+56>>2]=Ne[0],xe[s+60>>2]=Ne[1],Ce[s+64>>2]=i%1e3*1e3,Ne=[Math.floor(l/1e3)>>>0,(Ie=Math.floor(l/1e3),+Math.abs(Ie)>=1?Ie>0?(Math.min(+Math.floor(Ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Ie-+(~~Ie>>>0))/4294967296)>>>0:0)],xe[s+72>>2]=Ne[0],xe[s+76>>2]=Ne[1],Ce[s+80>>2]=l%1e3*1e3,Ne=[Math.floor(b/1e3)>>>0,(Ie=Math.floor(b/1e3),+Math.abs(Ie)>=1?Ie>0?(Math.min(+Math.floor(Ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Ie-+(~~Ie>>>0))/4294967296)>>>0:0)],xe[s+88>>2]=Ne[0],xe[s+92>>2]=Ne[1],Ce[s+96>>2]=b%1e3*1e3,Ne=[r.ino>>>0,(Ie=r.ino,+Math.abs(Ie)>=1?Ie>0?(Math.min(+Math.floor(Ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Ie-+(~~Ie>>>0))/4294967296)>>>0:0)],xe[s+104>>2]=Ne[0],xe[s+108>>2]=Ne[1],0},doMsync:function(n,t,s,r,i){if(!a.isFile(t.node.mode))throw new a.ErrnoError(43);if(r&2)return 0;var l=ft.slice(n,n+s);a.msync(t,l,i,s,r)},varargs:void 0,get:function(){ge.varargs+=4;var n=xe[ge.varargs-4>>2];return n},getStr:function(n){var t=nr(n);return t},getStreamFromFD:function(n){var t=a.getStream(n);if(!t)throw new a.ErrnoError(8);return t}};function hr(n,t){try{return n=ge.getStr(n),a.chmod(n,t),0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function gr(n,t,s,r){try{if(t=ge.getStr(t),t=ge.calculateAt(n,t),s&-8)return-28;var i=a.lookupPath(t,{follow:!0}),l=i.node;if(!l)return-44;var b="";return s&4&&(b+="r"),s&2&&(b+="w"),s&1&&(b+="x"),b&&a.nodePermissions(l,b)?-2:0}catch(E){if(typeof a>"u"||!(E instanceof a.ErrnoError))throw E;return-E.errno}}function br(n,t){try{return a.fchmod(n,t),0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function yr(n,t,s){try{return a.fchown(n,t,s),0}catch(r){if(typeof a>"u"||!(r instanceof a.ErrnoError))throw r;return-r.errno}}function wr(n){return xe[xn()>>2]=n,n}function qr(n,t,s){ge.varargs=s;try{var r=ge.getStreamFromFD(n);switch(t){case 0:{var i=ge.get();if(i<0)return-28;var l;return l=a.createStream(r,i),l.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=ge.get();return r.flags|=i,0}case 5:{var i=ge.get(),b=0;return un[i+b>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return wr(28),-1;default:return-28}}catch(E){if(typeof a>"u"||!(E instanceof a.ErrnoError))throw E;return-E.errno}}function vr(n,t){try{var s=ge.getStreamFromFD(n);return ge.doStat(a.stat,s.path,t)}catch(r){if(typeof a>"u"||!(r instanceof a.ErrnoError))throw r;return-r.errno}}var Er=9007199254740992,xr=-9007199254740992;function yn(n){return n<xr||n>Er?NaN:Number(n)}function Sr(n,t){try{return t=yn(t),isNaN(t)?-61:(a.ftruncate(n,t),0)}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function Ar(n,t){try{if(t===0)return-28;var s=a.cwd(),r=bt(s)+1;return t<r?-68:(cn(s,n,t),r)}catch(i){if(typeof a>"u"||!(i instanceof a.ErrnoError))throw i;return-i.errno}}function Ir(n,t,s){ge.varargs=s;try{var r=ge.getStreamFromFD(n);switch(t){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=ge.get();return xe[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=ge.get();return a.ioctl(r,t,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(l){if(typeof a>"u"||!(l instanceof a.ErrnoError))throw l;return-l.errno}}function kr(n,t){try{return n=ge.getStr(n),ge.doStat(a.lstat,n,t)}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function Tr(n,t,s){try{return t=ge.getStr(t),t=ge.calculateAt(n,t),t=Te.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),a.mkdir(t,s,0),0}catch(r){if(typeof a>"u"||!(r instanceof a.ErrnoError))throw r;return-r.errno}}function Fr(n,t,s,r){try{t=ge.getStr(t);var i=r&256,l=r&4096;return r=r&-6401,t=ge.calculateAt(n,t,l),ge.doStat(i?a.lstat:a.stat,t,s)}catch(b){if(typeof a>"u"||!(b instanceof a.ErrnoError))throw b;return-b.errno}}function Or(n,t,s,r){ge.varargs=r;try{t=ge.getStr(t),t=ge.calculateAt(n,t);var i=r?ge.get():0;return a.open(t,s,i).fd}catch(l){if(typeof a>"u"||!(l instanceof a.ErrnoError))throw l;return-l.errno}}function Pr(n,t,s,r){try{if(t=ge.getStr(t),t=ge.calculateAt(n,t),r<=0)return-28;var i=a.readlink(t),l=Math.min(r,bt(i)),b=Qe[s+l];return cn(i,s,r+1),Qe[s+l]=b,l}catch(E){if(typeof a>"u"||!(E instanceof a.ErrnoError))throw E;return-E.errno}}function Rr(n){try{return n=ge.getStr(n),a.rmdir(n),0}catch(t){if(typeof a>"u"||!(t instanceof a.ErrnoError))throw t;return-t.errno}}function Lr(n,t){try{return n=ge.getStr(n),ge.doStat(a.stat,n,t)}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function Dr(n,t,s){try{return t=ge.getStr(t),t=ge.calculateAt(n,t),s===0?a.unlink(t):s===512?a.rmdir(t):_t("Invalid flags passed to unlinkat"),0}catch(r){if(typeof a>"u"||!(r instanceof a.ErrnoError))throw r;return-r.errno}}function Qt(n){return Ce[n>>2]+xe[n+4>>2]*4294967296}function Cr(n,t,s,r){try{if(t=ge.getStr(t),t=ge.calculateAt(n,t,!0),s){var b=Qt(s),E=xe[s+8>>2];i=b*1e3+E/(1e3*1e3),s+=16,b=Qt(s),E=xe[s+8>>2],l=b*1e3+E/(1e3*1e3)}else var i=Date.now(),l=i;return a.utime(t,i,l),0}catch(W){if(typeof a>"u"||!(W instanceof a.ErrnoError))throw W;return-W.errno}}var jr=!0;function Nr(){return jr}function Mr(n){return n%4===0&&(n%100!==0||n%400===0)}var Ur=[0,31,60,91,121,152,182,213,244,274,305,335],Br=[0,31,59,90,120,151,181,212,243,273,304,334];function zr(n){var t=Mr(n.getFullYear()),s=t?Ur:Br,r=s[n.getMonth()]+n.getDate()-1;return r}function Wr(n,t){var s=new Date(Qt(n)*1e3);xe[t>>2]=s.getSeconds(),xe[t+4>>2]=s.getMinutes(),xe[t+8>>2]=s.getHours(),xe[t+12>>2]=s.getDate(),xe[t+16>>2]=s.getMonth(),xe[t+20>>2]=s.getFullYear()-1900,xe[t+24>>2]=s.getDay();var r=zr(s)|0;xe[t+28>>2]=r,xe[t+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),l=new Date(s.getFullYear(),6,1).getTimezoneOffset(),b=i.getTimezoneOffset(),E=(l!=b&&s.getTimezoneOffset()==Math.min(b,l))|0;xe[t+32>>2]=E}function Vr(n,t,s,r,i,l,b){try{var E=ge.getStreamFromFD(r),W=a.mmap(E,n,i,t,s),V=W.ptr;return xe[l>>2]=W.allocated,Ce[b>>2]=V,0}catch(K){if(typeof a>"u"||!(K instanceof a.ErrnoError))throw K;return-K.errno}}function Qr(n,t,s,r,i,l){try{var b=ge.getStreamFromFD(i);s&2&&ge.doMsync(n,b,t,r,l),a.munmap(b)}catch(E){if(typeof a>"u"||!(E instanceof a.ErrnoError))throw E;return-E.errno}}function wn(n){var t=bt(n)+1,s=Sn(t);return s&&It(n,Qe,s,t),s}function Hr(n,t,s){var r=new Date().getFullYear(),i=new Date(r,0,1),l=new Date(r,6,1),b=i.getTimezoneOffset(),E=l.getTimezoneOffset(),W=Math.max(b,E);Ce[n>>2]=W*60,xe[t>>2]=+(b!=E);function V(G){var I=G.toTimeString().match(/\(([A-Za-z ]+)\)$/);return I?I[1]:"GMT"}var K=V(i),re=V(l),C=wn(K),L=wn(re);E<b?(Ce[s>>2]=C,Ce[s+4>>2]=L):(Ce[s>>2]=L,Ce[s+4>>2]=C)}function Gr(){return Date.now()}var qn;qn=()=>performance.now();function $r(){return 2147483648}function Jr(n){var t=Ve.buffer;try{return Ve.grow(n-t.byteLength+65535>>>16),fn(),1}catch{}}function Kr(n){var t=ft.length;n=n>>>0;var s=$r();if(n>s)return!1;let r=(W,V)=>W+(V-W%V)%V;for(var i=1;i<=4;i*=2){var l=t*(1+.2/i);l=Math.min(l,n+100663296);var b=Math.min(s,r(Math.max(n,l),65536)),E=Jr(b);if(E)return!0}return!1}var Ht={};function Xr(){return D||"./this.program"}function wt(){if(!wt.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:Xr()};for(var s in Ht)Ht[s]===void 0?delete t[s]:t[s]=Ht[s];var r=[];for(var s in t)r.push(s+"="+t[s]);wt.strings=r}return wt.strings}function Yr(n,t,s){for(var r=0;r<n.length;++r)Qe[t++>>0]=n.charCodeAt(r);s||(Qe[t>>0]=0)}function Zr(n,t){var s=0;return wt().forEach(function(r,i){var l=t+s;Ce[n+i*4>>2]=l,Yr(r,l),s+=r.length+1}),0}function es(n,t){var s=wt();Ce[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),Ce[t>>2]=r,0}function ts(n){try{var t=ge.getStreamFromFD(n);return a.close(t),0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return s.errno}}function ns(n,t){try{var s=ge.getStreamFromFD(n),r=s.tty?2:a.isDir(s.mode)?3:a.isLink(s.mode)?7:4;return Qe[t>>0]=r,0}catch(i){if(typeof a>"u"||!(i instanceof a.ErrnoError))throw i;return i.errno}}function rs(n,t,s,r){for(var i=0,l=0;l<s;l++){var b=Ce[t>>2],E=Ce[t+4>>2];t+=8;var W=a.read(n,Qe,b,E,r);if(W<0)return-1;if(i+=W,W<E)break;typeof r<"u"&&(r+=W)}return i}function ss(n,t,s,r){try{var i=ge.getStreamFromFD(n),l=rs(i,t,s);return Ce[r>>2]=l,0}catch(b){if(typeof a>"u"||!(b instanceof a.ErrnoError))throw b;return b.errno}}function is(n,t,s,r){try{if(t=yn(t),isNaN(t))return 61;var i=ge.getStreamFromFD(n);return a.llseek(i,t,s),Ne=[i.position>>>0,(Ie=i.position,+Math.abs(Ie)>=1?Ie>0?(Math.min(+Math.floor(Ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Ie-+(~~Ie>>>0))/4294967296)>>>0:0)],xe[r>>2]=Ne[0],xe[r+4>>2]=Ne[1],i.getdents&&t===0&&s===0&&(i.getdents=null),0}catch(l){if(typeof a>"u"||!(l instanceof a.ErrnoError))throw l;return l.errno}}function os(n){try{var t=ge.getStreamFromFD(n);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return s.errno}}function as(n,t,s,r){for(var i=0,l=0;l<s;l++){var b=Ce[t>>2],E=Ce[t+4>>2];t+=8;var W=a.write(n,Qe,b,E,r);if(W<0)return-1;i+=W,typeof r<"u"&&(r+=W)}return i}function ls(n,t,s,r){try{var i=ge.getStreamFromFD(n),l=as(i,t,s);return Ce[r>>2]=l,0}catch(b){if(typeof a>"u"||!(b instanceof a.ErrnoError))throw b;return b.errno}}var vn=function(n,t,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=a.nextInode++,this.name=t,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},Tt=365,Ft=146;Object.defineProperties(vn.prototype,{read:{get:function(){return(this.mode&Tt)===Tt},set:function(n){n?this.mode|=Tt:this.mode&=~Tt}},write:{get:function(){return(this.mode&Ft)===Ft},set:function(n){n?this.mode|=Ft:this.mode&=~Ft}},isFolder:{get:function(){return a.isDir(this.mode)}},isDevice:{get:function(){return a.isChrdev(this.mode)}}}),a.FSNode=vn,a.staticInit();var En={__syscall_chmod:hr,__syscall_faccessat:gr,__syscall_fchmod:br,__syscall_fchown32:yr,__syscall_fcntl64:qr,__syscall_fstat64:vr,__syscall_ftruncate64:Sr,__syscall_getcwd:Ar,__syscall_ioctl:Ir,__syscall_lstat64:kr,__syscall_mkdirat:Tr,__syscall_newfstatat:Fr,__syscall_openat:Or,__syscall_readlinkat:Pr,__syscall_rmdir:Rr,__syscall_stat64:Lr,__syscall_unlinkat:Dr,__syscall_utimensat:Cr,_emscripten_get_now_is_monotonic:Nr,_localtime_js:Wr,_mmap_js:Vr,_munmap_js:Qr,_tzset_js:Hr,emscripten_date_now:Gr,emscripten_get_now:qn,emscripten_resize_heap:Kr,environ_get:Zr,environ_sizes_get:es,fd_close:ts,fd_fdstat_get:ns,fd_read:ss,fd_seek:is,fd_sync:os,fd_write:ls,memory:Ve};fr(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)},e._sqlite3_status64=function(){return(e._sqlite3_status64=e.asm.sqlite3_status64).apply(null,arguments)},e._sqlite3_status=function(){return(e._sqlite3_status=e.asm.sqlite3_status).apply(null,arguments)},e._sqlite3_db_status=function(){return(e._sqlite3_db_status=e.asm.sqlite3_db_status).apply(null,arguments)},e._sqlite3_msize=function(){return(e._sqlite3_msize=e.asm.sqlite3_msize).apply(null,arguments)},e._sqlite3_vfs_find=function(){return(e._sqlite3_vfs_find=e.asm.sqlite3_vfs_find).apply(null,arguments)},e._sqlite3_initialize=function(){return(e._sqlite3_initialize=e.asm.sqlite3_initialize).apply(null,arguments)},e._sqlite3_malloc=function(){return(e._sqlite3_malloc=e.asm.sqlite3_malloc).apply(null,arguments)},e._sqlite3_free=function(){return(e._sqlite3_free=e.asm.sqlite3_free).apply(null,arguments)},e._sqlite3_vfs_register=function(){return(e._sqlite3_vfs_register=e.asm.sqlite3_vfs_register).apply(null,arguments)},e._sqlite3_vfs_unregister=function(){return(e._sqlite3_vfs_unregister=e.asm.sqlite3_vfs_unregister).apply(null,arguments)},e._sqlite3_malloc64=function(){return(e._sqlite3_malloc64=e.asm.sqlite3_malloc64).apply(null,arguments)},e._sqlite3_realloc=function(){return(e._sqlite3_realloc=e.asm.sqlite3_realloc).apply(null,arguments)},e._sqlite3_realloc64=function(){return(e._sqlite3_realloc64=e.asm.sqlite3_realloc64).apply(null,arguments)},e._sqlite3_value_text=function(){return(e._sqlite3_value_text=e.asm.sqlite3_value_text).apply(null,arguments)},e._sqlite3_randomness=function(){return(e._sqlite3_randomness=e.asm.sqlite3_randomness).apply(null,arguments)},e._sqlite3_stricmp=function(){return(e._sqlite3_stricmp=e.asm.sqlite3_stricmp).apply(null,arguments)},e._sqlite3_strnicmp=function(){return(e._sqlite3_strnicmp=e.asm.sqlite3_strnicmp).apply(null,arguments)},e._sqlite3_uri_parameter=function(){return(e._sqlite3_uri_parameter=e.asm.sqlite3_uri_parameter).apply(null,arguments)};var xn=e.___errno_location=function(){return(xn=e.___errno_location=e.asm.__errno_location).apply(null,arguments)};e._sqlite3_uri_boolean=function(){return(e._sqlite3_uri_boolean=e.asm.sqlite3_uri_boolean).apply(null,arguments)},e._sqlite3_serialize=function(){return(e._sqlite3_serialize=e.asm.sqlite3_serialize).apply(null,arguments)},e._sqlite3_prepare_v2=function(){return(e._sqlite3_prepare_v2=e.asm.sqlite3_prepare_v2).apply(null,arguments)},e._sqlite3_step=function(){return(e._sqlite3_step=e.asm.sqlite3_step).apply(null,arguments)},e._sqlite3_column_int64=function(){return(e._sqlite3_column_int64=e.asm.sqlite3_column_int64).apply(null,arguments)},e._sqlite3_reset=function(){return(e._sqlite3_reset=e.asm.sqlite3_reset).apply(null,arguments)},e._sqlite3_exec=function(){return(e._sqlite3_exec=e.asm.sqlite3_exec).apply(null,arguments)},e._sqlite3_column_int=function(){return(e._sqlite3_column_int=e.asm.sqlite3_column_int).apply(null,arguments)},e._sqlite3_finalize=function(){return(e._sqlite3_finalize=e.asm.sqlite3_finalize).apply(null,arguments)},e._sqlite3_file_control=function(){return(e._sqlite3_file_control=e.asm.sqlite3_file_control).apply(null,arguments)},e._sqlite3_column_name=function(){return(e._sqlite3_column_name=e.asm.sqlite3_column_name).apply(null,arguments)},e._sqlite3_column_text=function(){return(e._sqlite3_column_text=e.asm.sqlite3_column_text).apply(null,arguments)},e._sqlite3_column_type=function(){return(e._sqlite3_column_type=e.asm.sqlite3_column_type).apply(null,arguments)},e._sqlite3_errmsg=function(){return(e._sqlite3_errmsg=e.asm.sqlite3_errmsg).apply(null,arguments)},e._sqlite3_deserialize=function(){return(e._sqlite3_deserialize=e.asm.sqlite3_deserialize).apply(null,arguments)},e._sqlite3_clear_bindings=function(){return(e._sqlite3_clear_bindings=e.asm.sqlite3_clear_bindings).apply(null,arguments)},e._sqlite3_value_blob=function(){return(e._sqlite3_value_blob=e.asm.sqlite3_value_blob).apply(null,arguments)},e._sqlite3_value_bytes=function(){return(e._sqlite3_value_bytes=e.asm.sqlite3_value_bytes).apply(null,arguments)},e._sqlite3_value_double=function(){return(e._sqlite3_value_double=e.asm.sqlite3_value_double).apply(null,arguments)},e._sqlite3_value_int=function(){return(e._sqlite3_value_int=e.asm.sqlite3_value_int).apply(null,arguments)},e._sqlite3_value_int64=function(){return(e._sqlite3_value_int64=e.asm.sqlite3_value_int64).apply(null,arguments)},e._sqlite3_value_subtype=function(){return(e._sqlite3_value_subtype=e.asm.sqlite3_value_subtype).apply(null,arguments)},e._sqlite3_value_pointer=function(){return(e._sqlite3_value_pointer=e.asm.sqlite3_value_pointer).apply(null,arguments)},e._sqlite3_value_type=function(){return(e._sqlite3_value_type=e.asm.sqlite3_value_type).apply(null,arguments)},e._sqlite3_value_nochange=function(){return(e._sqlite3_value_nochange=e.asm.sqlite3_value_nochange).apply(null,arguments)},e._sqlite3_value_frombind=function(){return(e._sqlite3_value_frombind=e.asm.sqlite3_value_frombind).apply(null,arguments)},e._sqlite3_value_dup=function(){return(e._sqlite3_value_dup=e.asm.sqlite3_value_dup).apply(null,arguments)},e._sqlite3_value_free=function(){return(e._sqlite3_value_free=e.asm.sqlite3_value_free).apply(null,arguments)},e._sqlite3_result_blob=function(){return(e._sqlite3_result_blob=e.asm.sqlite3_result_blob).apply(null,arguments)},e._sqlite3_result_error_toobig=function(){return(e._sqlite3_result_error_toobig=e.asm.sqlite3_result_error_toobig).apply(null,arguments)},e._sqlite3_result_error_nomem=function(){return(e._sqlite3_result_error_nomem=e.asm.sqlite3_result_error_nomem).apply(null,arguments)},e._sqlite3_result_double=function(){return(e._sqlite3_result_double=e.asm.sqlite3_result_double).apply(null,arguments)},e._sqlite3_result_error=function(){return(e._sqlite3_result_error=e.asm.sqlite3_result_error).apply(null,arguments)},e._sqlite3_result_int=function(){return(e._sqlite3_result_int=e.asm.sqlite3_result_int).apply(null,arguments)},e._sqlite3_result_int64=function(){return(e._sqlite3_result_int64=e.asm.sqlite3_result_int64).apply(null,arguments)},e._sqlite3_result_null=function(){return(e._sqlite3_result_null=e.asm.sqlite3_result_null).apply(null,arguments)},e._sqlite3_result_pointer=function(){return(e._sqlite3_result_pointer=e.asm.sqlite3_result_pointer).apply(null,arguments)},e._sqlite3_result_subtype=function(){return(e._sqlite3_result_subtype=e.asm.sqlite3_result_subtype).apply(null,arguments)},e._sqlite3_result_text=function(){return(e._sqlite3_result_text=e.asm.sqlite3_result_text).apply(null,arguments)},e._sqlite3_result_zeroblob=function(){return(e._sqlite3_result_zeroblob=e.asm.sqlite3_result_zeroblob).apply(null,arguments)},e._sqlite3_result_zeroblob64=function(){return(e._sqlite3_result_zeroblob64=e.asm.sqlite3_result_zeroblob64).apply(null,arguments)},e._sqlite3_result_error_code=function(){return(e._sqlite3_result_error_code=e.asm.sqlite3_result_error_code).apply(null,arguments)},e._sqlite3_user_data=function(){return(e._sqlite3_user_data=e.asm.sqlite3_user_data).apply(null,arguments)},e._sqlite3_context_db_handle=function(){return(e._sqlite3_context_db_handle=e.asm.sqlite3_context_db_handle).apply(null,arguments)},e._sqlite3_vtab_nochange=function(){return(e._sqlite3_vtab_nochange=e.asm.sqlite3_vtab_nochange).apply(null,arguments)},e._sqlite3_vtab_in_first=function(){return(e._sqlite3_vtab_in_first=e.asm.sqlite3_vtab_in_first).apply(null,arguments)},e._sqlite3_vtab_in_next=function(){return(e._sqlite3_vtab_in_next=e.asm.sqlite3_vtab_in_next).apply(null,arguments)},e._sqlite3_aggregate_context=function(){return(e._sqlite3_aggregate_context=e.asm.sqlite3_aggregate_context).apply(null,arguments)},e._sqlite3_get_auxdata=function(){return(e._sqlite3_get_auxdata=e.asm.sqlite3_get_auxdata).apply(null,arguments)},e._sqlite3_set_auxdata=function(){return(e._sqlite3_set_auxdata=e.asm.sqlite3_set_auxdata).apply(null,arguments)},e._sqlite3_column_count=function(){return(e._sqlite3_column_count=e.asm.sqlite3_column_count).apply(null,arguments)},e._sqlite3_data_count=function(){return(e._sqlite3_data_count=e.asm.sqlite3_data_count).apply(null,arguments)},e._sqlite3_column_blob=function(){return(e._sqlite3_column_blob=e.asm.sqlite3_column_blob).apply(null,arguments)},e._sqlite3_column_bytes=function(){return(e._sqlite3_column_bytes=e.asm.sqlite3_column_bytes).apply(null,arguments)},e._sqlite3_column_double=function(){return(e._sqlite3_column_double=e.asm.sqlite3_column_double).apply(null,arguments)},e._sqlite3_column_value=function(){return(e._sqlite3_column_value=e.asm.sqlite3_column_value).apply(null,arguments)},e._sqlite3_bind_blob=function(){return(e._sqlite3_bind_blob=e.asm.sqlite3_bind_blob).apply(null,arguments)},e._sqlite3_bind_double=function(){return(e._sqlite3_bind_double=e.asm.sqlite3_bind_double).apply(null,arguments)},e._sqlite3_bind_int=function(){return(e._sqlite3_bind_int=e.asm.sqlite3_bind_int).apply(null,arguments)},e._sqlite3_bind_int64=function(){return(e._sqlite3_bind_int64=e.asm.sqlite3_bind_int64).apply(null,arguments)},e._sqlite3_bind_null=function(){return(e._sqlite3_bind_null=e.asm.sqlite3_bind_null).apply(null,arguments)},e._sqlite3_bind_pointer=function(){return(e._sqlite3_bind_pointer=e.asm.sqlite3_bind_pointer).apply(null,arguments)},e._sqlite3_bind_text=function(){return(e._sqlite3_bind_text=e.asm.sqlite3_bind_text).apply(null,arguments)},e._sqlite3_bind_parameter_count=function(){return(e._sqlite3_bind_parameter_count=e.asm.sqlite3_bind_parameter_count).apply(null,arguments)},e._sqlite3_bind_parameter_index=function(){return(e._sqlite3_bind_parameter_index=e.asm.sqlite3_bind_parameter_index).apply(null,arguments)},e._sqlite3_db_handle=function(){return(e._sqlite3_db_handle=e.asm.sqlite3_db_handle).apply(null,arguments)},e._sqlite3_stmt_readonly=function(){return(e._sqlite3_stmt_readonly=e.asm.sqlite3_stmt_readonly).apply(null,arguments)},e._sqlite3_stmt_isexplain=function(){return(e._sqlite3_stmt_isexplain=e.asm.sqlite3_stmt_isexplain).apply(null,arguments)},e._sqlite3_stmt_status=function(){return(e._sqlite3_stmt_status=e.asm.sqlite3_stmt_status).apply(null,arguments)},e._sqlite3_sql=function(){return(e._sqlite3_sql=e.asm.sqlite3_sql).apply(null,arguments)},e._sqlite3_expanded_sql=function(){return(e._sqlite3_expanded_sql=e.asm.sqlite3_expanded_sql).apply(null,arguments)},e._sqlite3_preupdate_old=function(){return(e._sqlite3_preupdate_old=e.asm.sqlite3_preupdate_old).apply(null,arguments)},e._sqlite3_preupdate_count=function(){return(e._sqlite3_preupdate_count=e.asm.sqlite3_preupdate_count).apply(null,arguments)},e._sqlite3_preupdate_depth=function(){return(e._sqlite3_preupdate_depth=e.asm.sqlite3_preupdate_depth).apply(null,arguments)},e._sqlite3_preupdate_blobwrite=function(){return(e._sqlite3_preupdate_blobwrite=e.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},e._sqlite3_preupdate_new=function(){return(e._sqlite3_preupdate_new=e.asm.sqlite3_preupdate_new).apply(null,arguments)},e._sqlite3_value_numeric_type=function(){return(e._sqlite3_value_numeric_type=e.asm.sqlite3_value_numeric_type).apply(null,arguments)},e._sqlite3_set_authorizer=function(){return(e._sqlite3_set_authorizer=e.asm.sqlite3_set_authorizer).apply(null,arguments)},e._sqlite3_strglob=function(){return(e._sqlite3_strglob=e.asm.sqlite3_strglob).apply(null,arguments)},e._sqlite3_strlike=function(){return(e._sqlite3_strlike=e.asm.sqlite3_strlike).apply(null,arguments)},e._sqlite3_auto_extension=function(){return(e._sqlite3_auto_extension=e.asm.sqlite3_auto_extension).apply(null,arguments)},e._sqlite3_cancel_auto_extension=function(){return(e._sqlite3_cancel_auto_extension=e.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},e._sqlite3_reset_auto_extension=function(){return(e._sqlite3_reset_auto_extension=e.asm.sqlite3_reset_auto_extension).apply(null,arguments)},e._sqlite3_prepare_v3=function(){return(e._sqlite3_prepare_v3=e.asm.sqlite3_prepare_v3).apply(null,arguments)},e._sqlite3_create_module=function(){return(e._sqlite3_create_module=e.asm.sqlite3_create_module).apply(null,arguments)},e._sqlite3_create_module_v2=function(){return(e._sqlite3_create_module_v2=e.asm.sqlite3_create_module_v2).apply(null,arguments)},e._sqlite3_drop_modules=function(){return(e._sqlite3_drop_modules=e.asm.sqlite3_drop_modules).apply(null,arguments)},e._sqlite3_declare_vtab=function(){return(e._sqlite3_declare_vtab=e.asm.sqlite3_declare_vtab).apply(null,arguments)},e._sqlite3_vtab_on_conflict=function(){return(e._sqlite3_vtab_on_conflict=e.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},e._sqlite3_vtab_collation=function(){return(e._sqlite3_vtab_collation=e.asm.sqlite3_vtab_collation).apply(null,arguments)},e._sqlite3_vtab_in=function(){return(e._sqlite3_vtab_in=e.asm.sqlite3_vtab_in).apply(null,arguments)},e._sqlite3_vtab_rhs_value=function(){return(e._sqlite3_vtab_rhs_value=e.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},e._sqlite3_vtab_distinct=function(){return(e._sqlite3_vtab_distinct=e.asm.sqlite3_vtab_distinct).apply(null,arguments)},e._sqlite3_keyword_name=function(){return(e._sqlite3_keyword_name=e.asm.sqlite3_keyword_name).apply(null,arguments)},e._sqlite3_keyword_count=function(){return(e._sqlite3_keyword_count=e.asm.sqlite3_keyword_count).apply(null,arguments)},e._sqlite3_keyword_check=function(){return(e._sqlite3_keyword_check=e.asm.sqlite3_keyword_check).apply(null,arguments)},e._sqlite3_complete=function(){return(e._sqlite3_complete=e.asm.sqlite3_complete).apply(null,arguments)},e._sqlite3_libversion=function(){return(e._sqlite3_libversion=e.asm.sqlite3_libversion).apply(null,arguments)},e._sqlite3_libversion_number=function(){return(e._sqlite3_libversion_number=e.asm.sqlite3_libversion_number).apply(null,arguments)},e._sqlite3_shutdown=function(){return(e._sqlite3_shutdown=e.asm.sqlite3_shutdown).apply(null,arguments)},e._sqlite3_last_insert_rowid=function(){return(e._sqlite3_last_insert_rowid=e.asm.sqlite3_last_insert_rowid).apply(null,arguments)},e._sqlite3_set_last_insert_rowid=function(){return(e._sqlite3_set_last_insert_rowid=e.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},e._sqlite3_changes64=function(){return(e._sqlite3_changes64=e.asm.sqlite3_changes64).apply(null,arguments)},e._sqlite3_changes=function(){return(e._sqlite3_changes=e.asm.sqlite3_changes).apply(null,arguments)},e._sqlite3_total_changes64=function(){return(e._sqlite3_total_changes64=e.asm.sqlite3_total_changes64).apply(null,arguments)},e._sqlite3_total_changes=function(){return(e._sqlite3_total_changes=e.asm.sqlite3_total_changes).apply(null,arguments)},e._sqlite3_txn_state=function(){return(e._sqlite3_txn_state=e.asm.sqlite3_txn_state).apply(null,arguments)},e._sqlite3_close_v2=function(){return(e._sqlite3_close_v2=e.asm.sqlite3_close_v2).apply(null,arguments)},e._sqlite3_busy_handler=function(){return(e._sqlite3_busy_handler=e.asm.sqlite3_busy_handler).apply(null,arguments)},e._sqlite3_progress_handler=function(){return(e._sqlite3_progress_handler=e.asm.sqlite3_progress_handler).apply(null,arguments)},e._sqlite3_busy_timeout=function(){return(e._sqlite3_busy_timeout=e.asm.sqlite3_busy_timeout).apply(null,arguments)},e._sqlite3_create_function=function(){return(e._sqlite3_create_function=e.asm.sqlite3_create_function).apply(null,arguments)},e._sqlite3_create_function_v2=function(){return(e._sqlite3_create_function_v2=e.asm.sqlite3_create_function_v2).apply(null,arguments)},e._sqlite3_create_window_function=function(){return(e._sqlite3_create_window_function=e.asm.sqlite3_create_window_function).apply(null,arguments)},e._sqlite3_overload_function=function(){return(e._sqlite3_overload_function=e.asm.sqlite3_overload_function).apply(null,arguments)},e._sqlite3_trace_v2=function(){return(e._sqlite3_trace_v2=e.asm.sqlite3_trace_v2).apply(null,arguments)},e._sqlite3_commit_hook=function(){return(e._sqlite3_commit_hook=e.asm.sqlite3_commit_hook).apply(null,arguments)},e._sqlite3_update_hook=function(){return(e._sqlite3_update_hook=e.asm.sqlite3_update_hook).apply(null,arguments)},e._sqlite3_rollback_hook=function(){return(e._sqlite3_rollback_hook=e.asm.sqlite3_rollback_hook).apply(null,arguments)},e._sqlite3_preupdate_hook=function(){return(e._sqlite3_preupdate_hook=e.asm.sqlite3_preupdate_hook).apply(null,arguments)},e._sqlite3_error_offset=function(){return(e._sqlite3_error_offset=e.asm.sqlite3_error_offset).apply(null,arguments)},e._sqlite3_errcode=function(){return(e._sqlite3_errcode=e.asm.sqlite3_errcode).apply(null,arguments)},e._sqlite3_extended_errcode=function(){return(e._sqlite3_extended_errcode=e.asm.sqlite3_extended_errcode).apply(null,arguments)},e._sqlite3_errstr=function(){return(e._sqlite3_errstr=e.asm.sqlite3_errstr).apply(null,arguments)},e._sqlite3_limit=function(){return(e._sqlite3_limit=e.asm.sqlite3_limit).apply(null,arguments)},e._sqlite3_open=function(){return(e._sqlite3_open=e.asm.sqlite3_open).apply(null,arguments)},e._sqlite3_open_v2=function(){return(e._sqlite3_open_v2=e.asm.sqlite3_open_v2).apply(null,arguments)},e._sqlite3_create_collation=function(){return(e._sqlite3_create_collation=e.asm.sqlite3_create_collation).apply(null,arguments)},e._sqlite3_create_collation_v2=function(){return(e._sqlite3_create_collation_v2=e.asm.sqlite3_create_collation_v2).apply(null,arguments)},e._sqlite3_collation_needed=function(){return(e._sqlite3_collation_needed=e.asm.sqlite3_collation_needed).apply(null,arguments)},e._sqlite3_get_autocommit=function(){return(e._sqlite3_get_autocommit=e.asm.sqlite3_get_autocommit).apply(null,arguments)},e._sqlite3_table_column_metadata=function(){return(e._sqlite3_table_column_metadata=e.asm.sqlite3_table_column_metadata).apply(null,arguments)},e._sqlite3_extended_result_codes=function(){return(e._sqlite3_extended_result_codes=e.asm.sqlite3_extended_result_codes).apply(null,arguments)},e._sqlite3_uri_key=function(){return(e._sqlite3_uri_key=e.asm.sqlite3_uri_key).apply(null,arguments)},e._sqlite3_uri_int64=function(){return(e._sqlite3_uri_int64=e.asm.sqlite3_uri_int64).apply(null,arguments)},e._sqlite3_db_name=function(){return(e._sqlite3_db_name=e.asm.sqlite3_db_name).apply(null,arguments)},e._sqlite3_db_filename=function(){return(e._sqlite3_db_filename=e.asm.sqlite3_db_filename).apply(null,arguments)},e._sqlite3_compileoption_used=function(){return(e._sqlite3_compileoption_used=e.asm.sqlite3_compileoption_used).apply(null,arguments)},e._sqlite3_compileoption_get=function(){return(e._sqlite3_compileoption_get=e.asm.sqlite3_compileoption_get).apply(null,arguments)},e._sqlite3session_diff=function(){return(e._sqlite3session_diff=e.asm.sqlite3session_diff).apply(null,arguments)},e._sqlite3session_attach=function(){return(e._sqlite3session_attach=e.asm.sqlite3session_attach).apply(null,arguments)},e._sqlite3session_create=function(){return(e._sqlite3session_create=e.asm.sqlite3session_create).apply(null,arguments)},e._sqlite3session_delete=function(){return(e._sqlite3session_delete=e.asm.sqlite3session_delete).apply(null,arguments)},e._sqlite3session_table_filter=function(){return(e._sqlite3session_table_filter=e.asm.sqlite3session_table_filter).apply(null,arguments)},e._sqlite3session_changeset=function(){return(e._sqlite3session_changeset=e.asm.sqlite3session_changeset).apply(null,arguments)},e._sqlite3session_changeset_strm=function(){return(e._sqlite3session_changeset_strm=e.asm.sqlite3session_changeset_strm).apply(null,arguments)},e._sqlite3session_patchset_strm=function(){return(e._sqlite3session_patchset_strm=e.asm.sqlite3session_patchset_strm).apply(null,arguments)},e._sqlite3session_patchset=function(){return(e._sqlite3session_patchset=e.asm.sqlite3session_patchset).apply(null,arguments)},e._sqlite3session_enable=function(){return(e._sqlite3session_enable=e.asm.sqlite3session_enable).apply(null,arguments)},e._sqlite3session_indirect=function(){return(e._sqlite3session_indirect=e.asm.sqlite3session_indirect).apply(null,arguments)},e._sqlite3session_isempty=function(){return(e._sqlite3session_isempty=e.asm.sqlite3session_isempty).apply(null,arguments)},e._sqlite3session_memory_used=function(){return(e._sqlite3session_memory_used=e.asm.sqlite3session_memory_used).apply(null,arguments)},e._sqlite3session_object_config=function(){return(e._sqlite3session_object_config=e.asm.sqlite3session_object_config).apply(null,arguments)},e._sqlite3session_changeset_size=function(){return(e._sqlite3session_changeset_size=e.asm.sqlite3session_changeset_size).apply(null,arguments)},e._sqlite3changeset_start=function(){return(e._sqlite3changeset_start=e.asm.sqlite3changeset_start).apply(null,arguments)},e._sqlite3changeset_start_v2=function(){return(e._sqlite3changeset_start_v2=e.asm.sqlite3changeset_start_v2).apply(null,arguments)},e._sqlite3changeset_start_strm=function(){return(e._sqlite3changeset_start_strm=e.asm.sqlite3changeset_start_strm).apply(null,arguments)},e._sqlite3changeset_start_v2_strm=function(){return(e._sqlite3changeset_start_v2_strm=e.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},e._sqlite3changeset_next=function(){return(e._sqlite3changeset_next=e.asm.sqlite3changeset_next).apply(null,arguments)},e._sqlite3changeset_op=function(){return(e._sqlite3changeset_op=e.asm.sqlite3changeset_op).apply(null,arguments)},e._sqlite3changeset_pk=function(){return(e._sqlite3changeset_pk=e.asm.sqlite3changeset_pk).apply(null,arguments)},e._sqlite3changeset_old=function(){return(e._sqlite3changeset_old=e.asm.sqlite3changeset_old).apply(null,arguments)},e._sqlite3changeset_new=function(){return(e._sqlite3changeset_new=e.asm.sqlite3changeset_new).apply(null,arguments)},e._sqlite3changeset_conflict=function(){return(e._sqlite3changeset_conflict=e.asm.sqlite3changeset_conflict).apply(null,arguments)},e._sqlite3changeset_fk_conflicts=function(){return(e._sqlite3changeset_fk_conflicts=e.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},e._sqlite3changeset_finalize=function(){return(e._sqlite3changeset_finalize=e.asm.sqlite3changeset_finalize).apply(null,arguments)},e._sqlite3changeset_invert=function(){return(e._sqlite3changeset_invert=e.asm.sqlite3changeset_invert).apply(null,arguments)},e._sqlite3changeset_invert_strm=function(){return(e._sqlite3changeset_invert_strm=e.asm.sqlite3changeset_invert_strm).apply(null,arguments)},e._sqlite3changeset_apply_v2=function(){return(e._sqlite3changeset_apply_v2=e.asm.sqlite3changeset_apply_v2).apply(null,arguments)},e._sqlite3changeset_apply=function(){return(e._sqlite3changeset_apply=e.asm.sqlite3changeset_apply).apply(null,arguments)},e._sqlite3changeset_apply_v2_strm=function(){return(e._sqlite3changeset_apply_v2_strm=e.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},e._sqlite3changeset_apply_strm=function(){return(e._sqlite3changeset_apply_strm=e.asm.sqlite3changeset_apply_strm).apply(null,arguments)},e._sqlite3changegroup_new=function(){return(e._sqlite3changegroup_new=e.asm.sqlite3changegroup_new).apply(null,arguments)},e._sqlite3changegroup_add=function(){return(e._sqlite3changegroup_add=e.asm.sqlite3changegroup_add).apply(null,arguments)},e._sqlite3changegroup_output=function(){return(e._sqlite3changegroup_output=e.asm.sqlite3changegroup_output).apply(null,arguments)},e._sqlite3changegroup_add_strm=function(){return(e._sqlite3changegroup_add_strm=e.asm.sqlite3changegroup_add_strm).apply(null,arguments)},e._sqlite3changegroup_output_strm=function(){return(e._sqlite3changegroup_output_strm=e.asm.sqlite3changegroup_output_strm).apply(null,arguments)},e._sqlite3changegroup_delete=function(){return(e._sqlite3changegroup_delete=e.asm.sqlite3changegroup_delete).apply(null,arguments)},e._sqlite3changeset_concat=function(){return(e._sqlite3changeset_concat=e.asm.sqlite3changeset_concat).apply(null,arguments)},e._sqlite3changeset_concat_strm=function(){return(e._sqlite3changeset_concat_strm=e.asm.sqlite3changeset_concat_strm).apply(null,arguments)},e._sqlite3session_config=function(){return(e._sqlite3session_config=e.asm.sqlite3session_config).apply(null,arguments)},e._sqlite3_sourceid=function(){return(e._sqlite3_sourceid=e.asm.sqlite3_sourceid).apply(null,arguments)},e._sqlite3__wasm_pstack_ptr=function(){return(e._sqlite3__wasm_pstack_ptr=e.asm.sqlite3__wasm_pstack_ptr).apply(null,arguments)},e._sqlite3__wasm_pstack_restore=function(){return(e._sqlite3__wasm_pstack_restore=e.asm.sqlite3__wasm_pstack_restore).apply(null,arguments)},e._sqlite3__wasm_pstack_alloc=function(){return(e._sqlite3__wasm_pstack_alloc=e.asm.sqlite3__wasm_pstack_alloc).apply(null,arguments)},e._sqlite3__wasm_pstack_remaining=function(){return(e._sqlite3__wasm_pstack_remaining=e.asm.sqlite3__wasm_pstack_remaining).apply(null,arguments)},e._sqlite3__wasm_pstack_quota=function(){return(e._sqlite3__wasm_pstack_quota=e.asm.sqlite3__wasm_pstack_quota).apply(null,arguments)},e._sqlite3__wasm_db_error=function(){return(e._sqlite3__wasm_db_error=e.asm.sqlite3__wasm_db_error).apply(null,arguments)},e._sqlite3__wasm_test_struct=function(){return(e._sqlite3__wasm_test_struct=e.asm.sqlite3__wasm_test_struct).apply(null,arguments)},e._sqlite3__wasm_enum_json=function(){return(e._sqlite3__wasm_enum_json=e.asm.sqlite3__wasm_enum_json).apply(null,arguments)},e._sqlite3__wasm_vfs_unlink=function(){return(e._sqlite3__wasm_vfs_unlink=e.asm.sqlite3__wasm_vfs_unlink).apply(null,arguments)},e._sqlite3__wasm_db_vfs=function(){return(e._sqlite3__wasm_db_vfs=e.asm.sqlite3__wasm_db_vfs).apply(null,arguments)},e._sqlite3__wasm_db_reset=function(){return(e._sqlite3__wasm_db_reset=e.asm.sqlite3__wasm_db_reset).apply(null,arguments)},e._sqlite3__wasm_db_export_chunked=function(){return(e._sqlite3__wasm_db_export_chunked=e.asm.sqlite3__wasm_db_export_chunked).apply(null,arguments)},e._sqlite3__wasm_db_serialize=function(){return(e._sqlite3__wasm_db_serialize=e.asm.sqlite3__wasm_db_serialize).apply(null,arguments)},e._sqlite3__wasm_vfs_create_file=function(){return(e._sqlite3__wasm_vfs_create_file=e.asm.sqlite3__wasm_vfs_create_file).apply(null,arguments)},e._sqlite3__wasm_posix_create_file=function(){return(e._sqlite3__wasm_posix_create_file=e.asm.sqlite3__wasm_posix_create_file).apply(null,arguments)},e._sqlite3__wasm_kvvfsMakeKeyOnPstack=function(){return(e._sqlite3__wasm_kvvfsMakeKeyOnPstack=e.asm.sqlite3__wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},e._sqlite3__wasm_kvvfs_methods=function(){return(e._sqlite3__wasm_kvvfs_methods=e.asm.sqlite3__wasm_kvvfs_methods).apply(null,arguments)},e._sqlite3__wasm_vtab_config=function(){return(e._sqlite3__wasm_vtab_config=e.asm.sqlite3__wasm_vtab_config).apply(null,arguments)},e._sqlite3__wasm_db_config_ip=function(){return(e._sqlite3__wasm_db_config_ip=e.asm.sqlite3__wasm_db_config_ip).apply(null,arguments)},e._sqlite3__wasm_db_config_pii=function(){return(e._sqlite3__wasm_db_config_pii=e.asm.sqlite3__wasm_db_config_pii).apply(null,arguments)},e._sqlite3__wasm_db_config_s=function(){return(e._sqlite3__wasm_db_config_s=e.asm.sqlite3__wasm_db_config_s).apply(null,arguments)},e._sqlite3__wasm_config_i=function(){return(e._sqlite3__wasm_config_i=e.asm.sqlite3__wasm_config_i).apply(null,arguments)},e._sqlite3__wasm_config_ii=function(){return(e._sqlite3__wasm_config_ii=e.asm.sqlite3__wasm_config_ii).apply(null,arguments)},e._sqlite3__wasm_config_j=function(){return(e._sqlite3__wasm_config_j=e.asm.sqlite3__wasm_config_j).apply(null,arguments)},e._sqlite3__wasm_qfmt_token=function(){return(e._sqlite3__wasm_qfmt_token=e.asm.sqlite3__wasm_qfmt_token).apply(null,arguments)},e._sqlite3__wasm_init_wasmfs=function(){return(e._sqlite3__wasm_init_wasmfs=e.asm.sqlite3__wasm_init_wasmfs).apply(null,arguments)},e._sqlite3__wasm_test_intptr=function(){return(e._sqlite3__wasm_test_intptr=e.asm.sqlite3__wasm_test_intptr).apply(null,arguments)},e._sqlite3__wasm_test_voidptr=function(){return(e._sqlite3__wasm_test_voidptr=e.asm.sqlite3__wasm_test_voidptr).apply(null,arguments)},e._sqlite3__wasm_test_int64_max=function(){return(e._sqlite3__wasm_test_int64_max=e.asm.sqlite3__wasm_test_int64_max).apply(null,arguments)},e._sqlite3__wasm_test_int64_min=function(){return(e._sqlite3__wasm_test_int64_min=e.asm.sqlite3__wasm_test_int64_min).apply(null,arguments)},e._sqlite3__wasm_test_int64_times2=function(){return(e._sqlite3__wasm_test_int64_times2=e.asm.sqlite3__wasm_test_int64_times2).apply(null,arguments)},e._sqlite3__wasm_test_int64_minmax=function(){return(e._sqlite3__wasm_test_int64_minmax=e.asm.sqlite3__wasm_test_int64_minmax).apply(null,arguments)},e._sqlite3__wasm_test_int64ptr=function(){return(e._sqlite3__wasm_test_int64ptr=e.asm.sqlite3__wasm_test_int64ptr).apply(null,arguments)},e._sqlite3__wasm_test_stack_overflow=function(){return(e._sqlite3__wasm_test_stack_overflow=e.asm.sqlite3__wasm_test_stack_overflow).apply(null,arguments)},e._sqlite3__wasm_test_str_hello=function(){return(e._sqlite3__wasm_test_str_hello=e.asm.sqlite3__wasm_test_str_hello).apply(null,arguments)},e._sqlite3__wasm_SQLTester_strglob=function(){return(e._sqlite3__wasm_SQLTester_strglob=e.asm.sqlite3__wasm_SQLTester_strglob).apply(null,arguments)};var Sn=e._malloc=function(){return(Sn=e._malloc=e.asm.malloc).apply(null,arguments)};e._free=function(){return(e._free=e.asm.free).apply(null,arguments)},e._realloc=function(){return(e._realloc=e.asm.realloc).apply(null,arguments)};var An=e._emscripten_builtin_memalign=function(){return(An=e._emscripten_builtin_memalign=e.asm.emscripten_builtin_memalign).apply(null,arguments)};e.stackSave=function(){return(e.stackSave=e.asm.stackSave).apply(null,arguments)},e.stackRestore=function(){return(e.stackRestore=e.asm.stackRestore).apply(null,arguments)},e.stackAlloc=function(){return(e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)},e.wasmMemory=Ve;var Ot;yt=function n(){Ot||In(),Ot||(yt=n)};function In(n){if(at>0||(rr(),at>0))return;function t(){Ot||(Ot=!0,e.calledRun=!0,!ht&&(sr(),T(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),ir()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return In(),e.postRun||(e.postRun=[]),e.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=function t(s=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>typeof n<"u"&&n.HEAPU64?!0:!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(c=>{typeof r[c]=="function"&&(r[c]=r[c]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const i=Object.create(null),l=Object.create(null),b=c=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(c)||"Unknown result code #"+c,E=c=>typeof c=="number"&&c===(c|0);class W extends Error{constructor(...d){let x;if(d.length)if(E(d[0]))if(x=d[0],d.length===1)super(b(d[0]));else{const S=b(x);typeof d[1]=="object"?super(S,d[1]):(d[0]=S+":",super(d.join(" ")))}else d.length===2&&typeof d[1]=="object"?super(...d):super(d.join(" "));this.resultCode=x||i.SQLITE_ERROR,this.name="SQLite3Error"}}W.toss=(...c)=>{throw new W(...c)};const V=W.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&V("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const K=c=>typeof c!="bigint"&&c===(c|0)&&c<=2147483647&&c>=-2147483648,re=function c(d){return c._max||(c._max=BigInt("0x7fffffffffffffff"),c._min=~c._max),d>=c._min&&d<=c._max},C=c=>c>=-0x7fffffffn-1n&&c<=0x7fffffffn,L=function c(d){return c._min||(c._min=Number.MIN_SAFE_INTEGER,c._max=Number.MAX_SAFE_INTEGER),d>=c._min&&d<=c._max},G=c=>c&&c.constructor&&K(c.constructor.BYTES_PER_ELEMENT)?c:!1,I=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,F=c=>c.buffer instanceof I,N=(c,d,x)=>F(c)?c.slice(d,x):c.subarray(d,x),U=c=>c&&(c instanceof Uint8Array||c instanceof Int8Array||c instanceof ArrayBuffer),H=c=>c&&(c instanceof Uint8Array||c instanceof Int8Array||c instanceof ArrayBuffer),R=c=>U(c)||V("Value is not of a supported TypedArray type."),$=new TextDecoder("utf-8"),te=function(c,d,x){return $.decode(N(c,d,x))},f=function(c){return H(c)?te(c instanceof ArrayBuffer?new Uint8Array(c):c):Array.isArray(c)?c.join(""):(l.isPtr(c)&&(c=l.cstrToJs(c)),c)};class w extends Error{constructor(...d){d.length===2&&typeof d[1]=="object"?super(...d):d.length?super(d.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}w.toss=(...c)=>{throw new w(...c)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(c,d,x,S,X,le,pe,be,me)=>{},sqlite3_create_function:(c,d,x,S,X,le,pe,be)=>{},sqlite3_create_window_function:(c,d,x,S,X,le,pe,be,me,he)=>{},sqlite3_prepare_v3:(c,d,x,S,X,le)=>{},sqlite3_prepare_v2:(c,d,x,S,X)=>{},sqlite3_exec:(c,d,x,S,X)=>{},sqlite3_randomness:(c,d)=>{}});const k={affirmBindableTypedArray:R,flexibleString:f,bigIntFits32:C,bigIntFits64:re,bigIntFitsDouble:L,isBindableTypedArray:U,isInt32:K,isSQLableTypedArray:H,isTypedArray:G,typedArrayToString:te,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:F,toss:function(...c){throw new Error(c.join(" "))},toss3:V,typedArrayPart:N,affirmDbHeader:function(c){c instanceof ArrayBuffer&&(c=new Uint8Array(c));const d="SQLite format 3";d.length>c.byteLength&&V("Input does not contain an SQLite3 database header.");for(let x=0;x<d.length;++x)d.charCodeAt(x)!==c[x]&&V("Input does not contain an SQLite3 database header.")},affirmIsDb:function(c){c instanceof ArrayBuffer&&(c=new Uint8Array(c));const d=c.byteLength;(d<512||d%512!==0)&&V("Byte array size",d,"is invalid for an SQLite3 db."),k.affirmDbHeader(c)}};Object.assign(l,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||V("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||V("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),l.allocFromTypedArray=function(c){c instanceof ArrayBuffer&&(c=new Uint8Array(c)),R(c);const d=l.alloc(c.byteLength||1);return l.heapForSize(c.constructor).set(c.byteLength?c:[0],d),d};{const c=r.allocExportName,d=r.deallocExportName,x=r.reallocExportName;for(const S of[c,d,x])l.exports[S]instanceof Function||V("Missing required exports[",S,"] function.");l.alloc=function S(X){return S.impl(X)||w.toss("Failed to allocate",X," bytes.")},l.alloc.impl=l.exports[c],l.realloc=function S(X,le){const pe=S.impl(X,le);return le?pe||w.toss("Failed to reallocate",le," bytes."):0},l.realloc.impl=l.exports[x],l.dealloc=l.exports[d]}l.compileOptionUsed=function c(d){if(arguments.length){if(Array.isArray(d)){const x={};return d.forEach(S=>{x[S]=i.sqlite3_compileoption_used(S)}),x}else if(typeof d=="object")return Object.keys(d).forEach(x=>{d[x]=i.sqlite3_compileoption_used(x)}),d}else{if(c._result)return c._result;c._opt||(c._rx=/^([^=]+)=(.+)/,c._rxInt=/^-?\d+$/,c._opt=function(pe,be){const me=c._rx.exec(pe);be[0]=me?me[1]:pe,be[1]=me?c._rxInt.test(me[2])?+me[2]:me[2]:!0});const x={},S=[0,0];let X=0,le;for(;le=i.sqlite3_compileoption_get(X++);)c._opt(le,S),x[S[0]]=S[1];return c._result=x}return typeof d=="string"?!!i.sqlite3_compileoption_used(d):!1},l.pstack=Object.assign(Object.create(null),{restore:l.exports.sqlite3__wasm_pstack_restore,alloc:function(c){return typeof c=="string"&&!(c=l.sizeofIR(c))&&w.toss("Invalid value for pstack.alloc(",arguments[0],")"),l.exports.sqlite3__wasm_pstack_alloc(c)||w.toss("Could not allocate",c,"bytes from the pstack.")},allocChunks:function(c,d){typeof d=="string"&&!(d=l.sizeofIR(d))&&w.toss("Invalid size value for allocChunks(",arguments[1],")");const x=l.pstack.alloc(c*d),S=[];let X=0,le=0;for(;X<c;++X,le+=d)S.push(x+le);return S},allocPtr:(c=1,d=!0)=>c===1?l.pstack.alloc(d?8:l.ptrSizeof):l.pstack.allocChunks(c,d?8:l.ptrSizeof),call:function(c){const d=l.pstack.pointer;try{return c(q)}finally{l.pstack.restore(d)}}}),Object.defineProperties(l.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3__wasm_pstack_remaining}}),i.sqlite3_randomness=(...c)=>{if(c.length===1&&k.isTypedArray(c[0])&&c[0].BYTES_PER_ELEMENT===1){const d=c[0];if(d.byteLength===0)return l.exports.sqlite3_randomness(0,0),d;const x=l.pstack.pointer;try{let S=d.byteLength,X=0;const le=l.exports.sqlite3_randomness,pe=l.heap8u(),be=S<512?S:512,me=l.pstack.alloc(be);do{const he=S>be?be:S;le(he,me),d.set(N(pe,me,me+he),X),S-=he,X+=he}while(S>0)}catch(S){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",S)}finally{l.pstack.restore(x)}return d}l.exports.sqlite3_randomness(...c)};let Z;if(i.sqlite3_wasmfs_opfs_dir=function(){if(Z!==void 0)return Z;const c=r.wasmfsOpfsDir;if(!c||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return Z="";try{return c&&l.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],c)===0?Z=c:Z=""}catch{return Z=""}},i.sqlite3_wasmfs_filename_is_persistent=function(c){const d=i.sqlite3_wasmfs_opfs_dir();return d&&c?c.startsWith(d+"/"):!1},i.sqlite3_js_db_uses_vfs=function(c,d,x=0){try{const S=i.sqlite3_vfs_find(d);return S?c?S===i.sqlite3_js_db_vfs(c,x)?S:!1:S===i.sqlite3_vfs_find(0)?S:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const c=[];let d=i.sqlite3_vfs_find(0);for(;d;){const x=new i.sqlite3_vfs(d);c.push(l.cstrToJs(x.$zName)),d=x.$pNext,x.dispose()}return c},i.sqlite3_js_db_export=function(c,d=0){c=l.xWrap.testConvertArg("sqlite3*",c),c||V("Invalid sqlite3* argument."),l.bigIntEnabled||V("BigInt64 support is not enabled.");const x=l.scopedAllocPush();let S;try{const X=l.scopedAlloc(8+l.ptrSizeof),le=X+8,pe=d?l.isPtr(d)?d:l.scopedAllocCString(""+d):0;let be=l.exports.sqlite3__wasm_db_serialize(c,pe,le,X,0);be&&V("Database serialization failed with code",q.capi.sqlite3_js_rc_str(be)),S=l.peekPtr(le);const me=l.peek(X,"i64");return be=me?l.heap8u().slice(S,S+Number(me)):new Uint8Array,be}finally{S&&l.exports.sqlite3_free(S),l.scopedAllocPop(x)}},i.sqlite3_js_db_vfs=(c,d=0)=>k.sqlite3__wasm_db_vfs(c,d),i.sqlite3_js_aggregate_context=(c,d)=>i.sqlite3_aggregate_context(c,d)||(d?w.toss("Cannot allocate",d,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(c,d,x){let S;d&&l.isPtr(d)?S=d:d instanceof ArrayBuffer||d instanceof Uint8Array?(S=l.allocFromTypedArray(d),(arguments.length<3||!k.isInt32(x)||x<0)&&(x=d.byteLength)):W.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!k.isInt32(x)||x<0)&&W.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const X=k.sqlite3__wasm_posix_create_file(c,S,x);X&&W.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(X))}finally{l.dealloc(S)}},i.sqlite3_js_vfs_create_file=function(c,d,x,S){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let X;x?(l.isPtr(x)?X=x:x instanceof ArrayBuffer&&(x=new Uint8Array(x)),x instanceof Uint8Array?(X=l.allocFromTypedArray(x),(arguments.length<4||!k.isInt32(S)||S<0)&&(S=x.byteLength)):W.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):X=0,(!k.isInt32(S)||S<0)&&(l.dealloc(X),W.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const le=k.sqlite3__wasm_vfs_create_file(c,d,X,S);le&&W.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(le))}finally{l.dealloc(X)}},i.sqlite3_js_sql_to_string=c=>{if(typeof c=="string")return c;const d=f(v);return d===v?void 0:d},k.isUIThread()){const c=function(d){const x=Object.create(null);return x.prefix="kvvfs-"+d,x.stores=[],(d==="session"||d==="")&&x.stores.push(globalThis.sessionStorage),(d==="local"||d==="")&&x.stores.push(globalThis.localStorage),x};i.sqlite3_js_kvvfs_clear=function(d=""){let x=0;const S=c(d);return S.stores.forEach(X=>{const le=[];let pe;for(pe=0;pe<X.length;++pe){const be=X.key(pe);be.startsWith(S.prefix)&&le.push(be)}le.forEach(be=>X.removeItem(be)),x+=le.length}),x},i.sqlite3_js_kvvfs_size=function(d=""){let x=0;const S=c(d);return S.stores.forEach(X=>{let le;for(le=0;le<X.length;++le){const pe=X.key(le);pe.startsWith(S.prefix)&&(x+=pe.length,x+=X.getItem(pe).length)}}),x*2}}i.sqlite3_db_config=(function(c,d,...x){switch(this.s||(this.s=l.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=l.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=l.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),d){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(c,d,x[0],x[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(c,d,x[0],x[1],x[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(c,d,x[0]);default:return i.SQLITE_MISUSE}}).bind(Object.create(null)),i.sqlite3_value_to_js=function(c,d=!0){let x;const S=i.sqlite3_value_type(c);switch(S){case i.SQLITE_INTEGER:l.bigIntEnabled?(x=i.sqlite3_value_int64(c),k.bigIntFitsDouble(x)&&(x=Number(x))):x=i.sqlite3_value_double(c);break;case i.SQLITE_FLOAT:x=i.sqlite3_value_double(c);break;case i.SQLITE_TEXT:x=i.sqlite3_value_text(c);break;case i.SQLITE_BLOB:{const X=i.sqlite3_value_bytes(c),le=i.sqlite3_value_blob(c);X&&!le&&q.WasmAllocError.toss("Cannot allocate memory for blob argument of",X,"byte(s)"),x=X?l.heap8u().slice(le,le+Number(X)):null;break}case i.SQLITE_NULL:x=null;break;default:d&&V(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",S),x=void 0}return x},i.sqlite3_values_to_js=function(c,d,x=!0){let S;const X=[];for(S=0;S<c;++S)X.push(i.sqlite3_value_to_js(l.peekPtr(d+l.ptrSizeof*S),x));return X},i.sqlite3_result_error_js=function(c,d){d instanceof w?i.sqlite3_result_error_nomem(c):i.sqlite3_result_error(c,""+d,-1)},i.sqlite3_result_js=function(c,d){if(d instanceof Error){i.sqlite3_result_error_js(c,d);return}try{switch(typeof d){case"undefined":break;case"boolean":i.sqlite3_result_int(c,d?1:0);break;case"bigint":k.bigIntFits32(d)?i.sqlite3_result_int(c,Number(d)):k.bigIntFitsDouble(d)?i.sqlite3_result_double(c,Number(d)):l.bigIntEnabled?k.bigIntFits64(d)?i.sqlite3_result_int64(c,d):V("BigInt value",d.toString(),"is too BigInt for int64."):V("BigInt value",d.toString(),"is too BigInt.");break;case"number":{let x;k.isInt32(d)?x=i.sqlite3_result_int:l.bigIntEnabled&&Number.isInteger(d)&&k.bigIntFits64(BigInt(d))?x=i.sqlite3_result_int64:x=i.sqlite3_result_double,x(c,d);break}case"string":{const[x,S]=l.allocCString(d,!0);i.sqlite3_result_text(c,x,S,i.SQLITE_WASM_DEALLOC);break}case"object":if(d===null){i.sqlite3_result_null(c);break}else if(k.isBindableTypedArray(d)){const x=l.allocFromTypedArray(d);i.sqlite3_result_blob(c,x,d.byteLength,i.SQLITE_WASM_DEALLOC);break}default:V("Don't not how to handle this UDF result value:",typeof d,d)}}catch(x){i.sqlite3_result_error_js(c,x)}},i.sqlite3_column_js=function(c,d,x=!0){const S=i.sqlite3_column_value(c,d);return S===0?void 0:i.sqlite3_value_to_js(S,x)};const p=(function(c,d,x){x=i[x],this.ptr?l.pokePtr(this.ptr,0):this.ptr=l.allocPtr();const S=x(c,d,this.ptr);if(S)return W.toss(S,arguments[2]+"() failed with code "+S);const X=l.peekPtr(this.ptr);return X?i.sqlite3_value_to_js(X,!0):void 0}).bind(Object.create(null));i.sqlite3_preupdate_new_js=(c,d)=>p(c,d,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(c,d)=>p(c,d,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(c,d)=>p(c,d,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(c,d)=>p(c,d,"sqlite3changeset_old");const q={WasmAllocError:w,SQLite3Error:W,capi:i,util:k,wasm:l,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function c(){if(c.isReady instanceof Promise)return c.isReady;let d=t.initializersAsync;delete t.initializersAsync;const x=async()=>(q.__isUnderTest||(delete q.util,delete q.StructBinder),q),S=le=>{throw r.error("an async sqlite3 initializer failed:",le),le};if(!d||!d.length)return c.isReady=x().catch(S);d=d.map(le=>le instanceof Function?async pe=>le(q):le),d.push(x);let X=Promise.resolve(q);for(;d.length;)X=X.then(d.shift());return c.isReady=X.catch(S)},scriptInfo:void 0};try{t.initializers.forEach(c=>{c(q)})}catch(c){throw console.error("sqlite3 bootstrap initializer threw:",c),c}return delete t.initializers,t.sqlite3=q,q},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const s=(...f)=>{throw new Error(f.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const r=t.pointerIR||"i32",i=t.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),l=Object.create(null);l.heapSize=0,l.memory=null,l.freeFuncIndexes=[],l.scopedAlloc=[],l.utf8Decoder=new TextDecoder,l.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=f=>{switch(f){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+f).endsWith("*")?i:void 0}};const b=function(){if(!l.memory)l.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(l.heapSize===l.memory.buffer.byteLength)return l;const f=l.memory.buffer;return l.HEAP8=new Int8Array(f),l.HEAP8U=new Uint8Array(f),l.HEAP16=new Int16Array(f),l.HEAP16U=new Uint16Array(f),l.HEAP32=new Int32Array(f),l.HEAP32U=new Uint32Array(f),t.bigIntEnabled&&(l.HEAP64=new BigInt64Array(f),l.HEAP64U=new BigUint64Array(f)),l.HEAP32F=new Float32Array(f),l.HEAP64F=new Float64Array(f),l.heapSize=f.byteLength,l};t.heap8=()=>b().HEAP8,t.heap8u=()=>b().HEAP8U,t.heap16=()=>b().HEAP16,t.heap16u=()=>b().HEAP16U,t.heap32=()=>b().HEAP32,t.heap32u=()=>b().HEAP32U,t.heapForSize=function(f,w=!0){const k=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:b();switch(f){case Int8Array:return k.HEAP8;case Uint8Array:return k.HEAP8U;case Int16Array:return k.HEAP16;case Uint16Array:return k.HEAP16U;case Int32Array:return k.HEAP32;case Uint32Array:return k.HEAP32U;case 8:return w?k.HEAP8U:k.HEAP8;case 16:return w?k.HEAP16U:k.HEAP16;case 32:return w?k.HEAP32U:k.HEAP32;case 64:if(k.HEAP64)return w?k.HEAP64U:k.HEAP64;break;default:if(t.bigIntEnabled){if(f===globalThis.BigUint64Array)return k.HEAP64U;if(f===globalThis.BigInt64Array)return k.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(f){const w=t.functionTable();return f<w.length?w.get(f):void 0},t.jsFuncToWasm=function f(w,k){if(f._||(f._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(q,c,d){d<128?q[c](d):q[c](d%128|128,d>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(q){const c=f._.rxJSig.exec(q);return c?c[2]:q.substr(1)},letterType:q=>f._.sigTypes[q]||s("Invalid signature letter:",q),pushSigType:(q,c)=>q.push(f._.typeCodes[f._.letterType(c)])}),typeof w=="string"){const q=k;k=w,w=q}const Z=f._.sigParams(k),p=[1,96];f._.uleb128Encode(p,"push",Z.length);for(const q of Z)f._.pushSigType(p,q);return k[0]==="v"?p.push(0):(p.push(1),f._.pushSigType(p,k[0])),f._.uleb128Encode(p,"unshift",p.length),p.unshift(0,97,115,109,1,0,0,0,1),p.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(p)),{e:{f:w}}).exports.f};const E=function(w,k,Z){if(Z&&!l.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof w=="string"){const d=k;k=w,w=d}(typeof k!="string"||!(w instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const p=t.functionTable(),q=p.length;let c;for(;l.freeFuncIndexes.length&&(c=l.freeFuncIndexes.pop(),p.get(c));){c=null;continue}c||(c=q,p.grow(1));try{return p.set(c,w),Z&&l.scopedAlloc[l.scopedAlloc.length-1].push(c),c}catch(d){if(!(d instanceof TypeError))throw c===q&&l.freeFuncIndexes.push(q),d}try{const d=t.jsFuncToWasm(w,k);p.set(c,d),Z&&l.scopedAlloc[l.scopedAlloc.length-1].push(c)}catch(d){throw c===q&&l.freeFuncIndexes.push(q),d}return c};t.installFunction=(f,w)=>E(f,w,!1),t.scopedInstallFunction=(f,w)=>E(f,w,!0),t.uninstallFunction=function(f){if(!f&&f!==0)return;const w=l.freeFuncIndexes,k=t.functionTable();w.push(f);const Z=k.get(f);return k.set(f,null),Z},t.peek=function(w,k="i8"){k.endsWith("*")&&(k=r);const Z=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:b(),p=Array.isArray(w)?[]:void 0;let q;do{switch(p&&(w=arguments[0].shift()),k){case"i1":case"i8":q=Z.HEAP8[w>>0];break;case"i16":q=Z.HEAP16[w>>1];break;case"i32":q=Z.HEAP32[w>>2];break;case"float":case"f32":q=Z.HEAP32F[w>>2];break;case"double":case"f64":q=Number(Z.HEAP64F[w>>3]);break;case"i64":if(t.bigIntEnabled){q=BigInt(Z.HEAP64[w>>3]);break}default:s("Invalid type for peek():",k)}p&&p.push(q)}while(p&&arguments[0].length);return p||q},t.poke=function(f,w,k="i8"){k.endsWith("*")&&(k=r);const Z=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:b();for(const p of Array.isArray(f)?f:[f])switch(k){case"i1":case"i8":Z.HEAP8[p>>0]=w;continue;case"i16":Z.HEAP16[p>>1]=w;continue;case"i32":Z.HEAP32[p>>2]=w;continue;case"float":case"f32":Z.HEAP32F[p>>2]=w;continue;case"double":case"f64":Z.HEAP64F[p>>3]=w;continue;case"i64":if(Z.HEAP64){Z.HEAP64[p>>3]=BigInt(w);continue}default:s("Invalid type for poke(): "+k)}return this},t.peekPtr=(...f)=>t.peek(f.length===1?f[0]:f,r),t.pokePtr=(f,w=0)=>t.poke(f,w,r),t.peek8=(...f)=>t.peek(f.length===1?f[0]:f,"i8"),t.poke8=(f,w)=>t.poke(f,w,"i8"),t.peek16=(...f)=>t.peek(f.length===1?f[0]:f,"i16"),t.poke16=(f,w)=>t.poke(f,w,"i16"),t.peek32=(...f)=>t.peek(f.length===1?f[0]:f,"i32"),t.poke32=(f,w)=>t.poke(f,w,"i32"),t.peek64=(...f)=>t.peek(f.length===1?f[0]:f,"i64"),t.poke64=(f,w)=>t.poke(f,w,"i64"),t.peek32f=(...f)=>t.peek(f.length===1?f[0]:f,"f32"),t.poke32f=(f,w)=>t.poke(f,w,"f32"),t.peek64f=(...f)=>t.peek(f.length===1?f[0]:f,"f64"),t.poke64f=(f,w)=>t.poke(f,w,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=f=>typeof f=="number"&&f===(f|0)&&f>=0,t.isPtr=t.isPtr32,t.cstrlen=function(f){if(!f||!t.isPtr(f))return null;const w=b().HEAP8U;let k=f;for(;w[k]!==0;++k);return k-f};const W=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,V=function(f,w,k){return l.utf8Decoder.decode(f.buffer instanceof W?f.slice(w,k):f.subarray(w,k))};t.cstrToJs=function(f){const w=t.cstrlen(f);return w?V(b().HEAP8U,f,f+w):w===null?w:""},t.jstrlen=function(f){if(typeof f!="string")return null;const w=f.length;let k=0;for(let Z=0;Z<w;++Z){let p=f.charCodeAt(Z);p>=55296&&p<=57343&&(p=65536+((p&1023)<<10)|f.charCodeAt(++Z)&1023),p<=127?++k:p<=2047?k+=2:p<=65535?k+=3:k+=4}return k},t.jstrcpy=function(f,w,k=0,Z=-1,p=!0){if((!w||!(w instanceof Int8Array)&&!(w instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),Z<0&&(Z=w.length-k),!(Z>0)||!(k>=0))return 0;let q=0,c=f.length;const d=k,x=k+Z-(p?1:0);for(;q<c&&k<x;++q){let S=f.charCodeAt(q);if(S>=55296&&S<=57343&&(S=65536+((S&1023)<<10)|f.charCodeAt(++q)&1023),S<=127){if(k>=x)break;w[k++]=S}else if(S<=2047){if(k+1>=x)break;w[k++]=192|S>>6,w[k++]=128|S&63}else if(S<=65535){if(k+2>=x)break;w[k++]=224|S>>12,w[k++]=128|S>>6&63,w[k++]=128|S&63}else{if(k+3>=x)break;w[k++]=240|S>>18,w[k++]=128|S>>12&63,w[k++]=128|S>>6&63,w[k++]=128|S&63}}return p&&(w[k++]=0),k-d},t.cstrncpy=function(f,w,k){if((!f||!w)&&s("cstrncpy() does not accept NULL strings."),k<0)k=t.cstrlen(strPtr)+1;else if(!(k>0))return 0;const Z=t.heap8u();let p=0,q;for(;p<k&&(q=Z[w+p]);++p)Z[f+p]=q;return p<k&&(Z[f+p++]=0),p},t.jstrToUintArray=(f,w=!1)=>l.utf8Encoder.encode(w?f+"\0":f);const K=(f,w)=>{(!(f.alloc instanceof Function)||!(f.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",w+"().")},re=function(f,w,k,Z){if(K(t,Z),typeof f!="string")return null;{const p=l.utf8Encoder.encode(f),q=k(p.length+1),c=b().HEAP8U;return c.set(p,q),c[q+p.length]=0,w?[q,p.length]:q}};t.allocCString=(f,w=!1)=>re(f,w,t.alloc,"allocCString()"),t.scopedAllocPush=function(){K(t,"scopedAllocPush");const f=[];return l.scopedAlloc.push(f),f},t.scopedAllocPop=function(f){K(t,"scopedAllocPop");const w=arguments.length?l.scopedAlloc.indexOf(f):l.scopedAlloc.length-1;w<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(f=l.scopedAlloc[w]),l.scopedAlloc.splice(w,1);for(let k;k=f.pop();)t.functionEntry(k)?t.uninstallFunction(k):t.dealloc(k)},t.scopedAlloc=function(f){l.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const w=t.alloc(f);return l.scopedAlloc[l.scopedAlloc.length-1].push(w),w},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>l.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),t.scopedAllocCString=(f,w=!1)=>re(f,w,t.scopedAlloc,"scopedAllocCString()");const C=function(f,w){const k=t[f?"scopedAlloc":"alloc"]((w.length+1)*t.ptrSizeof);let Z=0;return w.forEach(p=>{t.pokePtr(k+t.ptrSizeof*Z++,t[f?"scopedAllocCString":"allocCString"](""+p))}),t.pokePtr(k+t.ptrSizeof*Z,0),k};t.scopedAllocMainArgv=f=>C(!0,f),t.allocMainArgv=f=>C(!1,f),t.cArgvToJs=(f,w)=>{const k=[];for(let Z=0;Z<f;++Z){const p=t.peekPtr(w+t.ptrSizeof*Z);k.push(p?t.cstrToJs(p):null)}return k},t.scopedAllocCall=function(f){t.scopedAllocPush();try{return f()}finally{t.scopedAllocPop()}};const L=function(f,w,k){K(t,k);const Z=w?"i64":r;let p=t[k](f*(w?8:i));if(t.poke(p,0,Z),f===1)return p;const q=[p];for(let c=1;c<f;++c)p+=w?8:i,q[c]=p,t.poke(p,0,Z);return q};t.allocPtr=(f=1,w=!0)=>L(f,w,"alloc"),t.scopedAllocPtr=(f=1,w=!0)=>L(f,w,"scopedAlloc"),t.xGet=function(f){return t.exports[f]||s("Cannot find exported symbol:",f)};const G=(f,w)=>s(f+"() requires",w,"argument(s).");t.xCall=function(f,...w){const k=f instanceof Function?f:t.xGet(f);return k instanceof Function||s("Exported symbol",f,"is not a function."),k.length!==w.length&&G(k===f?k.name:f,k.length),arguments.length===2&&Array.isArray(arguments[1])?k.apply(null,arguments[1]):k.apply(null,w)},l.xWrap=Object.create(null),l.xWrap.convert=Object.create(null),l.xWrap.convert.arg=new Map,l.xWrap.convert.result=new Map;const I=l.xWrap.convert.arg,F=l.xWrap.convert.result;t.bigIntEnabled&&I.set("i64",f=>BigInt(f));const N=r==="i32"?f=>f|0:f=>BigInt(f)|BigInt(0);I.set("i32",N).set("i16",f=>(f|0)&65535).set("i8",f=>(f|0)&255).set("f32",f=>Number(f).valueOf()).set("float",I.get("f32")).set("f64",I.get("f32")).set("double",I.get("f64")).set("int",I.get("i32")).set("null",f=>f).set(null,I.get("null")).set("**",N).set("*",N),F.set("*",N).set("pointer",N).set("number",f=>Number(f)).set("void",f=>{}).set("null",f=>f).set(null,F.get("null"));{const f=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&f.push("i64");const w=I.get(r);for(const k of f)I.set(k+"*",w),F.set(k+"*",w),F.set(k,I.get(k)||s("Missing arg converter:",k))}const U=function(f){return typeof f=="string"?t.scopedAllocCString(f):f?N(f):null};I.set("string",U).set("utf8",U).set("pointer",U),F.set("string",f=>t.cstrToJs(f)).set("utf8",F.get("string")).set("string:dealloc",f=>{try{return f?t.cstrToJs(f):null}finally{t.dealloc(f)}}).set("utf8:dealloc",F.get("string:dealloc")).set("json",f=>JSON.parse(t.cstrToJs(f))).set("json:dealloc",f=>{try{return f?JSON.parse(t.cstrToJs(f)):null}finally{t.dealloc(f)}});const H=class{constructor(f){this.name=f.name||"unnamed adapter"}convertArg(f,w,k){s("AbstractArgAdapter must be subclassed.")}};I.FuncPtrAdapter=class tt extends H{constructor(w){super(w),I.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",w),this.name=w.name||"unnamed",this.signature=w.signature,w.contextKey instanceof Function&&(this.contextKey=w.contextKey,w.bindScope||(w.bindScope="context")),this.bindScope=w.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),tt.bindScopes.indexOf(w.bindScope)<0&&s("Invalid options.bindScope ("+w.bindMod+") for FuncPtrAdapter. Expecting one of: ("+tt.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=w.callProxy instanceof Function?w.callProxy:void 0}contextKey(w,k){return this}contextMap(w){const k=this.__cmap||(this.__cmap=new Map);let Z=k.get(w);return Z===void 0&&k.set(w,Z=[]),Z}convertArg(w,k,Z){let p=this.singleton;if(!p&&this.isContext&&(p=this.contextMap(this.contextKey(k,Z))),p&&p[0]===w)return p[1];if(w instanceof Function){this.callProxy&&(w=this.callProxy(w));const q=E(w,this.signature,this.isTransient);if(tt.debugFuncInstall&&tt.debugOut("FuncPtrAdapter installed",this,this.contextKey(k,Z),"@"+q,w),p){if(p[1]){tt.debugFuncInstall&&tt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,Z),"@"+p[1],w);try{l.scopedAlloc[l.scopedAlloc.length-1].push(p[1])}catch{}}p[0]=w,p[1]=q}return q}else if(t.isPtr(w)||w===null||w===void 0){if(p&&p[1]&&p[1]!==w){tt.debugFuncInstall&&tt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(k,Z),"@"+p[1],w);try{l.scopedAlloc[l.scopedAlloc.length-1].push(p[1])}catch{}p[0]=p[1]=w|0}return w||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},I.FuncPtrAdapter.warnOnUse=!1,I.FuncPtrAdapter.debugFuncInstall=!1,I.FuncPtrAdapter.debugOut=console.debug.bind(console),I.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const R=f=>I.get(f)||s("Argument adapter not found:",f),$=f=>F.get(f)||s("Result adapter not found:",f);l.xWrap.convertArg=(f,...w)=>R(f)(...w),l.xWrap.convertArgNoCheck=(f,...w)=>I.get(f)(...w),l.xWrap.convertResult=(f,w)=>f===null?w:f?$(f)(w):void 0,l.xWrap.convertResultNoCheck=(f,w)=>f===null?w:f?F.get(f)(w):void 0,t.xWrap=function(f,w,...k){arguments.length===3&&Array.isArray(arguments[2])&&(k=arguments[2]),t.isPtr(f)&&(f=t.functionEntry(f)||s("Function pointer not found in WASM function table."));const Z=f instanceof Function,p=Z?f:t.xGet(f);if(Z&&(f=p.name||"unnamed function"),k.length!==p.length&&G(f,p.length),w===null&&p.length===0)return p;w!=null&&$(w);for(const c of k)c instanceof H?I.set(c,(...d)=>c.convertArg(...d)):R(c);const q=l.xWrap;return p.length===0?(...c)=>c.length?G(f,p.length):q.convertResult(w,p.call(null)):function(...c){c.length!==p.length&&G(f,p.length);const d=t.scopedAllocPush();try{let x=0;for(;x<c.length;++x)c[x]=q.convertArgNoCheck(k[x],c[x],c,x);return q.convertResultNoCheck(w,p.apply(null,c))}finally{t.scopedAllocPop(d)}}};const te=function(f,w,k,Z,p,q){if(typeof k=="string"){if(w===1)return q.get(k);if(w===2){if(Z)Z instanceof Function||s(p,"requires a function argument.");else return delete q.get(k),f;return q.set(k,Z),f}}s("Invalid arguments to",p)};return t.xWrap.resultAdapter=function f(w,k){return te(f,arguments.length,w,k,"resultAdapter()",F)},t.xWrap.argAdapter=function f(w,k){return te(f,arguments.length,w,k,"argAdapter()",I)},t.xWrap.FuncPtrAdapter=I.FuncPtrAdapter,t.xCallWrapped=function(f,w,k,...Z){return Array.isArray(arguments[3])&&(Z=arguments[3]),t.xWrap(f,w,k||[]).apply(null,Z||[])},t.xWrap.testConvertArg=l.xWrap.convertArg,t.xWrap.testConvertResult=l.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const s=()=>fetch(t.uri,{credentials:"same-origin"}),r=this,i=function(b){if(t.wasmUtilTarget){const E=(...V)=>{throw new Error(V.join(" "))},W=t.wasmUtilTarget;if(W.module=b.module,W.instance=b.instance,W.instance.exports.memory||(W.memory=t.imports&&t.imports.env&&t.imports.env.memory||E("Missing 'memory' object!")),!W.alloc&&b.instance.exports.malloc){const V=b.instance.exports;W.alloc=function(K){return V.malloc(K)||E("Allocation of",K,"bytes failed.")},W.dealloc=function(K){V.free(K)}}r(W)}return t.onload&&t.onload(b,t),b};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),t.imports||{}).then(i)}:function(){return s().then(E=>E.arrayBuffer()).then(E=>WebAssembly.instantiate(E,t.imports||{})).then(i)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(s){const r=(...g)=>{throw new Error(g.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(g){s[g]instanceof Function||r("Config option '"+g+"' must be a function.")});const i=t,l=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),b=s.alloc,E=s.dealloc,W=s.log||console.log.bind(console),V=s.memberPrefix||"",K=s.memberSuffix||"",re=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,C=globalThis.BigInt,L=globalThis.BigInt64Array,G=s.ptrSizeof||4,I=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(g=null){g&&g.__flags&&(g=g.__flags);const P=function j(Q){return arguments.length===0?j.__flags:(Q<0?(delete j.__flags.getter,delete j.__flags.setter,delete j.__flags.alloc,delete j.__flags.dealloc):(j.__flags.getter=(1&Q)!==0,j.__flags.setter=(2&Q)!==0,j.__flags.alloc=(4&Q)!==0,j.__flags.dealloc=(8&Q)!==0),j._flags)};return Object.defineProperty(P,"__flags",{iterable:!1,writable:!1,value:Object.create(g)}),g||P(0),P},i.debugFlags=i.__makeDebugFlags());const F=function(){const g=new ArrayBuffer(2);return new DataView(g).setInt16(0,256,!0),new Int16Array(g)[0]===256}(),N=g=>g[1]==="(",U=g=>g==="P",H=g=>N(g)?"p":g[0],R=function(g){switch(H(g)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return I;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",g)},$=L?()=>!0:()=>r("BigInt64Array is not available."),te=function(g){switch(H(g)){case"p":case"P":case"s":{switch(G){case 4:return"getInt32";case 8:return $()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return $()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",g)},f=function(g){switch(H(g)){case"p":case"P":case"s":{switch(G){case 4:return"setInt32";case 8:return $()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return $()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",g)},w=function(g){switch(H(g)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return $()&&C;case"p":case"P":case"s":switch(G){case 4:return Number;case 8:return $()&&C}break}r("Unhandled DataView set wrapper for signature:",g)},k=(g,P)=>g+"::"+P,Z=function(g,P){return()=>r(k(g,P),"is read-only.")},p=new WeakMap,q="(pointer-is-external)",c=function(g,P,j){if(j||(j=p.get(P)),j){if(p.delete(P),Array.isArray(P.ondispose)){let Q;for(;Q=P.ondispose.shift();)try{Q instanceof Function?Q.call(P):Q instanceof se?Q.dispose():typeof Q=="number"&&E(Q)}catch(ie){console.warn("ondispose() for",g.structName,"@",j,"threw. NOT propagating it.",ie)}}else if(P.ondispose instanceof Function)try{P.ondispose()}catch(Q){console.warn("ondispose() for",g.structName,"@",j,"threw. NOT propagating it.",Q)}delete P.ondispose,g.debugFlags.__flags.dealloc&&W("debug.dealloc:",P[q]?"EXTERNAL":"",g.structName,"instance:",g.structInfo.sizeof,"bytes @"+j),P[q]||E(j)}},d=g=>({configurable:!1,writable:!1,iterable:!1,value:g}),x=function(g,P,j){let Q=!j;j?Object.defineProperty(P,q,d(j)):(j=b(g.structInfo.sizeof),j||r("Allocation of",g.structName,"structure failed."));try{g.debugFlags.__flags.alloc&&W("debug.alloc:",Q?"":"EXTERNAL",g.structName,"instance:",g.structInfo.sizeof,"bytes @"+j),Q&&l().fill(0,j,j+g.structInfo.sizeof),p.set(P,j)}catch(ie){throw c(g,P,j),ie}},S=function(){const g=this.pointer;return g?new Uint8Array(l().slice(g,g+this.structInfo.sizeof)):null},le=d(g=>V+g+K),pe=function(g,P,j=!0){let Q=g.members[P];if(!Q&&(V||K)){for(const ie of Object.values(g.members))if(ie.key===P){Q=ie;break}!Q&&j&&r(k(g.name,P),"is not a mapped struct member.")}return Q},be=function g(P,j,Q=!1){g._||(g._=de=>de.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const ie=pe(P.structInfo,j,!0);return Q?g._(ie.signature):ie.signature},me={configurable:!1,enumerable:!1,get:function(){return p.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},he=d(function(){const g=[];for(const P of Object.keys(this.structInfo.members))g.push(this.memberKey(P));return g}),Ee=new TextDecoder("utf-8"),Ae=new TextEncoder,Oe=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Pe=function(g,P,j){return Ee.decode(g.buffer instanceof Oe?g.slice(P,j):g.subarray(P,j))},Me=function(g,P,j=!1){const Q=pe(g.structInfo,P,j);return Q&&Q.signature.length===1&&Q.signature[0]==="s"?Q:!1},De=function(g){g.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(g))},B=function(P,j){const Q=pe(P.structInfo,j,!0);De(Q);const ie=P[Q.key];if(!ie)return null;let de=ie;const ye=l();for(;ye[de]!==0;++de);return ie===de?"":Pe(ye,ie,de)},J=function(g,...P){g.ondispose?Array.isArray(g.ondispose)||(g.ondispose=[g.ondispose]):g.ondispose=[],g.ondispose.push(...P)},Y=function(g){const P=Ae.encode(g),j=b(P.length+1);j||r("Allocation error while duplicating string:",g);const Q=l();return Q.set(P,j),Q[j+P.length]=0,j},oe=function(g,P,j){const Q=pe(g.structInfo,P,!0);De(Q);const ie=Y(j);return g[Q.key]=ie,J(g,ie),g},se=function(P,j){arguments[2]!==d&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:d(P),structInfo:d(j)})};se.prototype=Object.create(null,{dispose:d(function(){c(this.constructor,this)}),lookupMember:d(function(g,P=!0){return pe(this.structInfo,g,P)}),memberToJsString:d(function(g){return B(this,g)}),memberIsString:d(function(g,P=!0){return Me(this,g,P)}),memberKey:le,memberKeys:he,memberSignature:d(function(g,P=!1){return be(this,g,P)}),memoryDump:d(S),pointer:me,setMemberCString:d(function(g,P){return oe(this,g,P)})}),Object.assign(se.prototype,{addOnDispose:function(...g){return J(this,...g),this}}),Object.defineProperties(se,{allocCString:d(Y),isA:d(g=>g instanceof se),hasExternalPointer:d(g=>g instanceof se&&!!g[q]),memberKey:le});const fe=g=>Number.isFinite(g)||g instanceof(C||Number),ee=function g(P,j,Q){if(!g._){g._={getters:{},setters:{},sw:{}};const Ue=["i","c","C","p","P","s","f","d","v()"];re&&Ue.push("j"),Ue.forEach(function(Ze){g._.getters[Ze]=te(Ze),g._.setters[Ze]=f(Ze),g._.sw[Ze]=w(Ze)});const cs=/^[ipPsjfdcC]$/,us=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;g.sigCheck=function(Ze,fs,kn,Gt){Object.prototype.hasOwnProperty.call(Ze,kn)&&r(Ze.structName,"already has a property named",kn+"."),cs.test(Gt)||us.test(Gt)||r("Malformed signature for",k(Ze.structName,fs)+":",Gt)}}const ie=P.memberKey(j);g.sigCheck(P.prototype,j,ie,Q.signature),Q.key=ie,Q.name=j;const de=H(Q.signature),ye=k(P.prototype.structName,ie),ke=P.prototype.debugFlags.__flags,He=Object.create(null);He.configurable=!1,He.enumerable=!1,He.get=function(){ke.getter&&W("debug.getter:",g._.getters[de],"for",R(de),ye,"@",this.pointer,"+",Q.offset,"sz",Q.sizeof);let Ue=new DataView(l().buffer,this.pointer+Q.offset,Q.sizeof)[g._.getters[de]](0,F);return ke.getter&&W("debug.getter:",ye,"result =",Ue),Ue},Q.readOnly?He.set=Z(P.prototype.structName,ie):He.set=function(Ue){if(ke.setter&&W("debug.setter:",g._.setters[de],"for",R(de),ye,"@",this.pointer,"+",Q.offset,"sz",Q.sizeof,Ue),this.pointer||r("Cannot set struct property on disposed instance."),Ue===null)Ue=0;else for(;!fe(Ue);){if(U(Q.signature)&&Ue instanceof se){Ue=Ue.pointer||0,ke.setter&&W("debug.setter:",ye,"resolved to",Ue);break}r("Invalid value for pointer-type",ye+".")}new DataView(l().buffer,this.pointer+Q.offset,Q.sizeof)[g._.setters[de]](0,g._.sw[de](Ue),F)},Object.defineProperty(P.prototype,ie,He)},y=function g(P,j){arguments.length===1?(j=P,P=j.name):j.name||(j.name=P),P||r("Struct name is required.");let Q=!1;Object.keys(j.members).forEach(ye=>{const ke=j.members[ye];ke.sizeof?ke.sizeof===1?ke.signature==="c"||ke.signature==="C"||r("Unexpected sizeof==1 member",k(j.name,ye),"with signature",ke.signature):(ke.sizeof%4!==0&&(console.warn("Invalid struct member description =",ke,"from",j),r(P,"member",ye,"sizeof is not aligned. sizeof="+ke.sizeof)),ke.offset%4!==0&&(console.warn("Invalid struct member description =",ke,"from",j),r(P,"member",ye,"offset is not aligned. offset="+ke.offset))):r(P,"member",ye,"is missing sizeof."),(!Q||Q.offset<ke.offset)&&(Q=ke)}),Q?j.sizeof<Q.offset+Q.sizeof&&r("Invalid struct config:",P,"max member offset ("+Q.offset+") ","extends past end of struct (sizeof="+j.sizeof+")."):r("No member property descriptions found.");const ie=d(i.__makeDebugFlags(g.debugFlags)),de=function ye(ke){this instanceof ye?arguments.length?((ke!==(ke|0)||ke<=0)&&r("Invalid pointer value for",P,"constructor."),x(ye,this,ke)):x(ye,this):r("The",P,"constructor may only be called via 'new'.")};return Object.defineProperties(de,{debugFlags:ie,isA:d(ye=>ye instanceof de),memberKey:le,memberKeys:he,methodInfoForKey:d(function(ye){}),structInfo:d(j),structName:d(P)}),de.prototype=new se(P,j,d),Object.defineProperties(de.prototype,{debugFlags:ie,constructor:d(de)}),Object.keys(j.members).forEach(ye=>ee(de,ye,j.members[ye])),de};return y.StructType=se,y.config=s,y.allocCString=Y,y.debugFlags||(y.debugFlags=i.__makeDebugFlags(i.debugFlags)),y},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=(...I)=>{throw new Error(I.join(" "))};t.SQLite3Error.toss;const r=t.capi,i=t.wasm,l=t.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(I,F)=>I[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:I=>I[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:I=>{let F;return(N,U,H,R)=>{try{const $=i.cArgvToJs(U,H);return F||(F=i.cArgvToJs(U,R)),I($,F)|0}catch($){return $.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(I,F)=>I[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:I=>I[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(I,F)=>I[0],callProxy:I=>(F,N,U,H,R,$)=>{try{return U=U&&i.cstrToJs(U),H=H&&i.cstrToJs(H),R=R&&i.cstrToJs(R),$=$&&i.cstrToJs($),I(F,N,U,H,R,$)||0}catch(te){return te.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(I,F)=>I[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(I,F)=>I[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:I=>I[0],callProxy:I=>(F,N,U,H,R,$,te)=>{I(F,N,U,i.cstrToJs(H),i.cstrToJs(R),$,te)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:I=>I[0],callProxy:I=>(F,N,U,H,R)=>{I(F,N,i.cstrToJs(U),i.cstrToJs(H),R)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const I={signature:"i(ps)",callProxy:F=>(N,U)=>{try{return F(N,i.cstrToJs(U))|0}catch(H){return H.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...I}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...I,contextKey:(F,N)=>F[0]}),"*"]])}i.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const I=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",R=>I(l.flexibleString(R))),i.xWrap.argAdapter("string:static",(function(R){return i.isPtr(R)?R:(R=""+R,this[R]||(this[R]=i.allocCString(R)))}).bind(Object.create(null)));const F=i.xWrap.argAdapter("*"),N=function(){};i.xWrap.argAdapter("sqlite3_filename",F)("sqlite3_context*",F)("sqlite3_value*",F)("void*",F)("sqlite3_changegroup*",F)("sqlite3_changeset_iter*",F)("sqlite3_session*",F)("sqlite3_stmt*",R=>{var $;return F(R instanceof((($=t==null?void 0:t.oo1)==null?void 0:$.Stmt)||N)?R.pointer:R)})("sqlite3*",R=>{var $;return F(R instanceof((($=t==null?void 0:t.oo1)==null?void 0:$.DB)||N)?R.pointer:R)})("sqlite3_index_info*",R=>F(R instanceof(r.sqlite3_index_info||N)?R.pointer:R))("sqlite3_module*",R=>F(R instanceof(r.sqlite3_module||N)?R.pointer:R))("sqlite3_vfs*",R=>typeof R=="string"?r.sqlite3_vfs_find(R)||t.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",R):F(R instanceof(r.sqlite3_vfs||N)?R.pointer:R));const U=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",U)("sqlite3_context*",U)("sqlite3_stmt*",U)("sqlite3_value*",U)("sqlite3_vfs*",U)("void*",U),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const R of i.bindingSignatures)r[R[0]]=i.xWrap.apply(null,R);for(const R of i.bindingSignatures.wasmInternal)l[R[0]]=i.xWrap.apply(null,R);const H=function(R){return()=>s(R+"() is unavailable due to lack","of BigInt support in this build.")};for(const R of i.bindingSignatures.int64)r[R[0]]=i.bigIntEnabled?i.xWrap.apply(null,R):H(R[0]);if(delete i.bindingSignatures,i.exports.sqlite3__wasm_db_error){const R=i.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");l.sqlite3__wasm_db_error=function($,te,f){return te instanceof t.WasmAllocError?(te=r.SQLITE_NOMEM,f=0):te instanceof Error&&(f=f||""+te,te=te.resultCode||r.SQLITE_ERROR),$?R($,te,f):te}}else l.sqlite3__wasm_db_error=function(R,$,te){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),$}}{const I=i.xCall("sqlite3__wasm_enum_json");I||s("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(I));const F=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&F.push("serialize","session","vtab");for(const H of F)for(const R of Object.entries(i.ctype[H]))r[R[0]]=R[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const N=Object.create(null);for(const H of["resultCodes"])for(const R of Object.entries(i.ctype[H]))N[R[1]]=R[0];r.sqlite3_js_rc_str=H=>N[H];const U=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!l.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const H of i.ctype.structs)U[H.name]||(r[H.name]=t.StructBinder(H));if(r.sqlite3_index_info){for(const H of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[H]=r[H],delete r[H];r.sqlite3_vtab_config=i.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const b=(I,F,N)=>l.sqlite3__wasm_db_error(I,r.SQLITE_MISUSE,F+"() requires "+N+" argument"+(N===1?"":"s")+"."),E=I=>l.sqlite3__wasm_db_error(I,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),W=I=>i.xWrap.argAdapter("sqlite3*")(I),V=I=>i.isPtr(I)?i.cstrToJs(I):I,K=(function(I,F){I=W(I);let N=this.dbMap.get(I);if(F)!N&&F>0&&this.dbMap.set(I,N=Object.create(null));else return this.dbMap.delete(I),N;return N}).bind(Object.assign(Object.create(null),{dbMap:new Map}));K.addCollation=function(I,F){const N=K(I,1);N.collation||(N.collation=new Set),N.collation.add(V(F).toLowerCase())},K._addUDF=function(I,F,N,U){F=V(F).toLowerCase();let H=U.get(F);H||U.set(F,H=new Set),H.add(N<0?-1:N)},K.addFunction=function(I,F,N){const U=K(I,1);U.udf||(U.udf=new Map),this._addUDF(I,F,N,U.udf)},K.addWindowFunc=function(I,F,N){const U=K(I,1);U.wudf||(U.wudf=new Map),this._addUDF(I,F,N,U.wudf)},K.cleanup=function(I){I=W(I);const F=[I];for(const H of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const R=i.exports[H];F.length=R.length;try{r[H](...F)}catch($){console.warn("close-time call of",H+"(",F,") threw:",$)}}const N=K(I,0);if(!N)return;if(N.collation){for(const H of N.collation)try{r.sqlite3_create_collation_v2(I,H,r.SQLITE_UTF8,0,0,0)}catch{}delete N.collation}let U;for(U=0;U<2;++U){const H=U?N.wudf:N.udf;if(!H)continue;const R=U?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const $ of H){const te=$[0],f=$[1],w=[I,te,0,r.SQLITE_UTF8,0,0,0,0,0];U&&w.push(0);for(const k of f)try{w[2]=k,R.apply(null,w)}catch{}f.clear()}H.clear()}delete N.udf,delete N.wudf};{const I=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(F){if(arguments.length!==1)return b(F,"sqlite3_close_v2",1);if(F)try{K.cleanup(F)}catch{}return I(F)}}if(r.sqlite3session_table_filter){const I=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(F){if(arguments.length!==1)return b(pDb,"sqlite3session_delete",1);F&&r.sqlite3session_table_filter(F,0,0),I(F)}}{const I=(N,U)=>"argv["+U+"]:"+N[0]+":"+i.cstrToJs(N[1]).toLowerCase(),F=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:I}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:I})]);r.sqlite3_create_collation_v2=function(N,U,H,R,$,te){if(arguments.length!==6)return b(N,"sqlite3_create_collation_v2",6);if(!(H&15))H|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(H&15))return E(N);try{const f=F(N,U,H,R,$,te);return f===0&&$ instanceof Function&&K.addCollation(N,U),f}catch(f){return l.sqlite3__wasm_db_error(N,f)}},r.sqlite3_create_collation=(N,U,H,R,$)=>arguments.length===5?r.sqlite3_create_collation_v2(N,U,H,R,$,0):b(N,"sqlite3_create_collation",5)}{const I=function(H,R){return H[0]+":"+(H[2]<0?-1:H[2])+":"+R+":"+i.cstrToJs(H[1]).toLowerCase()},F=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:I,callProxy:H=>(R,$,te)=>{try{H(R,...r.sqlite3_values_to_js($,te))}catch(f){r.sqlite3_result_error_js(R,f)}}},xFinalAndValue:{signature:"v(p)",contextKey:I,callProxy:H=>R=>{try{r.sqlite3_result_js(R,H(R))}catch($){r.sqlite3_result_error_js(R,$)}}},xFunc:{signature:"v(pip)",contextKey:I,callProxy:H=>(R,$,te)=>{try{r.sqlite3_result_js(R,H(R,...r.sqlite3_values_to_js($,te)))}catch(f){r.sqlite3_result_error_js(R,f)}}},xDestroy:{signature:"v(p)",contextKey:I,callProxy:H=>R=>{try{H(R)}catch($){console.error("UDF xDestroy method threw:",$)}}}}),N=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...F.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...F.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...F.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...F.xDestroy})]),U=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...F.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...F.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...F.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...F.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...F.xDestroy})]);r.sqlite3_create_function_v2=function H(R,$,te,f,w,k,Z,p,q){if(H.length!==arguments.length)return b(R,"sqlite3_create_function_v2",H.length);if(!(f&15))f|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(f&15))return E(R);try{const c=N(R,$,te,f,w,k,Z,p,q);return c===0&&(k instanceof Function||Z instanceof Function||p instanceof Function||q instanceof Function)&&K.addFunction(R,$,te),c}catch(c){return console.error("sqlite3_create_function_v2() setup threw:",c),l.sqlite3__wasm_db_error(R,c,"Creation of UDF threw: "+c)}},r.sqlite3_create_function=function H(R,$,te,f,w,k,Z,p){return H.length===arguments.length?r.sqlite3_create_function_v2(R,$,te,f,w,k,Z,p,0):b(R,"sqlite3_create_function",H.length)},r.sqlite3_create_window_function=function H(R,$,te,f,w,k,Z,p,q,c){if(H.length!==arguments.length)return b(R,"sqlite3_create_window_function",H.length);if(!(f&15))f|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(f&15))return E(R);try{const d=U(R,$,te,f,w,k,Z,p,q,c);return d===0&&(k instanceof Function||Z instanceof Function||p instanceof Function||q instanceof Function||c instanceof Function)&&K.addWindowFunc(R,$,te),d}catch(d){return console.error("sqlite3_create_window_function() setup threw:",d),l.sqlite3__wasm_db_error(R,d,"Creation of UDF threw: "+d)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const I=(N,U)=>(typeof N=="string"?U=-1:l.isSQLableTypedArray(N)?(U=N.byteLength,N=l.typedArrayToString(N instanceof ArrayBuffer?new Uint8Array(N):N)):Array.isArray(N)&&(N=N.join(""),U=-1),[N,U]),F={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function N(U,H,R,$,te,f){if(N.length!==arguments.length)return b(U,"sqlite3_prepare_v3",N.length);const[w,k]=I(H,R);switch(typeof w){case"string":return F.basic(U,w,k,$,te,null);case"number":return F.full(U,w,k,$,te,f);default:return l.sqlite3__wasm_db_error(U,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function N(U,H,R,$,te){return N.length===arguments.length?r.sqlite3_prepare_v3(U,H,R,0,$,te):b(U,"sqlite3_prepare_v2",N.length)}}{const I=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),F=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function N(U,H,R,$,te){if(N.length!==arguments.length)return b(r.sqlite3_db_handle(U),"sqlite3_bind_text",N.length);if(i.isPtr(R)||R===null)return I(U,H,R,$,te);R instanceof ArrayBuffer?R=new Uint8Array(R):Array.isArray(pMem)&&(R=pMem.join(""));let f,w;try{if(l.isSQLableTypedArray(R))f=i.allocFromTypedArray(R),w=R.byteLength;else if(typeof R=="string")[f,w]=i.allocCString(R);else return l.sqlite3__wasm_db_error(r.sqlite3_db_handle(U),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return I(U,H,f,w,r.SQLITE_WASM_DEALLOC)}catch(k){return i.dealloc(f),l.sqlite3__wasm_db_error(r.sqlite3_db_handle(U),k)}},r.sqlite3_bind_blob=function N(U,H,R,$,te){if(N.length!==arguments.length)return b(r.sqlite3_db_handle(U),"sqlite3_bind_blob",N.length);if(i.isPtr(R)||R===null)return F(U,H,R,$,te);R instanceof ArrayBuffer?R=new Uint8Array(R):Array.isArray(R)&&(R=R.join(""));let f,w;try{if(l.isBindableTypedArray(R))f=i.allocFromTypedArray(R),w=$>=0?$:R.byteLength;else if(typeof R=="string")[f,w]=i.allocCString(R);else return l.sqlite3__wasm_db_error(r.sqlite3_db_handle(U),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return F(U,H,f,w,r.SQLITE_WASM_DEALLOC)}catch(k){return i.dealloc(f),l.sqlite3__wasm_db_error(r.sqlite3_db_handle(U),k)}}}r.sqlite3_config=function(I,...F){if(arguments.length<2)return r.SQLITE_MISUSE;switch(I){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3__wasm_config_i(I,F[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3__wasm_config_ii(I,F[0],F[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3__wasm_config_j(I,F[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const I=new Set;r.sqlite3_auto_extension=function(F){if(F instanceof Function)F=i.installFunction("i(ppp)",F);else if(arguments.length!==1||!i.isPtr(F))return r.SQLITE_MISUSE;const N=i.exports.sqlite3_auto_extension(F);return F!==arguments[0]&&(N===0?I.add(F):i.uninstallFunction(F)),N},r.sqlite3_cancel_auto_extension=function(F){return!F||arguments.length!==1||!i.isPtr(F)?0:i.exports.sqlite3_cancel_auto_extension(F)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const F of I)i.uninstallFunction(F);I.clear()}}const re=r.sqlite3_vfs_find("kvvfs");if(re)if(l.isUIThread()){const I=new r.sqlite3_kvvfs_methods(i.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const F=i.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,N=i.pstack,U=R=>i.peek(R)===115?sessionStorage:localStorage,H={xRead:(R,$,te,f)=>{const w=N.pointer,k=i.scopedAllocPush();try{const Z=F(R,$);if(!Z)return-3;const p=i.cstrToJs(Z),q=U(R).getItem(p);if(!q)return-1;const c=q.length;if(f<=0)return c;if(f===1)return i.poke(te,0),c;const d=i.scopedAllocCString(q);return f>c+1&&(f=c+1),i.heap8u().copyWithin(te,d,d+f-1),i.poke(te+f-1,0),f-1}catch(Z){return console.error("kvstorageRead()",Z),-2}finally{N.restore(w),i.scopedAllocPop(k)}},xWrite:(R,$,te)=>{const f=N.pointer;try{const w=F(R,$);if(!w)return 1;const k=i.cstrToJs(w);return U(R).setItem(k,i.cstrToJs(te)),0}catch(w){return console.error("kvstorageWrite()",w),r.SQLITE_IOERR}finally{N.restore(f)}},xDelete:(R,$)=>{const te=N.pointer;try{const f=F(R,$);return f?(U(R).removeItem(i.cstrToJs(f)),0):1}catch(f){return console.error("kvstorageDelete()",f),r.SQLITE_IOERR}finally{N.restore(te)}}};for(const R of Object.keys(H))I[I.memberKey(R)]=i.installFunction(I.memberSignature(R),H[R])}else r.sqlite3_vfs_unregister(re);i.xWrap.FuncPtrAdapter.warnOnUse=!0;const C=t.StructBinder,L=function I(F,N,U,H=I.installMethodArgcCheck){if(F instanceof C.StructType?!(U instanceof Function)&&!i.isPtr(U)&&s("Usage errror: expecting a Function or WASM pointer to one."):s("Usage error: target object is-not-a StructType."),arguments.length===1)return(f,w)=>I(F,f,w,H);I.argcProxy||(I.argcProxy=function(f,w,k,Z){return function(...p){return k.length!==arguments.length&&s("Argument mismatch for",f.structInfo.name+"::"+w+": Native signature is:",Z),k.apply(this,p)}},I.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((f,w)=>{if(typeof f=="number")try{i.uninstallFunction(f)}catch{}}),delete this.ondispose.__removeFuncList)});const R=F.memberSignature(N);R.length<2&&s("Member",N,"does not have a function pointer signature:",R);const $=F.memberKey(N),te=H&&!i.isPtr(U)?I.argcProxy(F,$,U,R):U;if(i.isPtr(te))te&&!i.functionEntry(te)&&s("Pointer",te,"is not a WASM function table entry."),F[$]=te;else{const f=i.installFunction(te,F.memberSignature(N,!0));F[$]=f,(!F.ondispose||!F.ondispose.__removeFuncList)&&(F.addOnDispose("ondispose.__removeFuncList handler",I.removeFuncList),F.ondispose.__removeFuncList=[]),F.ondispose.__removeFuncList.push($,f)}return(f,w)=>I(F,f,w,H)};L.installMethodArgcCheck=!1;const G=function(I,F,N=L.installMethodArgcCheck){const U=new Map;for(const H of Object.keys(F)){const R=F[H],$=U.get(R);if($){const te=I.memberKey(H);I[te]=I[I.memberKey($)]}else L(I,H,R,N),U.set(R,H)}return I};C.StructType.prototype.installMethod=function(F,N,U=L.installMethodArgcCheck){return arguments.length<3&&F&&typeof F=="object"?G(this,...arguments):L(this,...arguments)},C.StructType.prototype.installMethods=function(I,F=L.installMethodArgcCheck){return G(this,I,F)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.46.1",libVersionNumber:3046001,sourceId:"2024-08-13 09:16:08 c9c2ab54ba1f5f46360f1b4f35d849cd3f080e6fc2b6c60e91b16c63f69a1e33",downloadVersion:3460100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=(...p)=>{throw new t.SQLite3Error(...p)},r=t.capi,i=t.wasm,l=t.util,b=new WeakMap,E=new WeakMap,W=(p,q,c)=>{const d=Object.getOwnPropertyDescriptor(p,q);return d?d.value:c},V=function(p,q){return q&&(p instanceof L&&(p=p.pointer),s(q,"sqlite3 result code",q+":",p?r.sqlite3_errmsg(p):r.sqlite3_errstr(q))),arguments[0]},K=i.installFunction("i(ippp)",(function(p,q,c,d){r.SQLITE_TRACE_STMT===p&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+q+":",i.cstrToJs(d))}).bind({counter:0})),re=Object.create(null),C=function p(...q){if(!p._name2vfs){p._name2vfs=Object.create(null);const he=typeof importScripts=="function"?Ee=>s("The VFS for",Ee,"is only available in the main window thread."):!1;p._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:he||(()=>"local")},p._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:he||(()=>"session")}}const c=p.normalizeArgs(...q);let d=c.filename,x=c.vfs,S=c.flags;(typeof d!="string"&&typeof d!="number"||typeof S!="string"||x&&typeof x!="string"&&typeof x!="number")&&(t.config.error("Invalid DB ctor args",c,arguments),s("Invalid arguments for DB constructor."));let X=typeof d=="number"?i.cstrToJs(d):d;const le=p._name2vfs[X];le&&(x=le.vfs,d=X=le.filename(X));let pe,be=0;S.indexOf("c")>=0&&(be|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),S.indexOf("w")>=0&&(be|=r.SQLITE_OPEN_READWRITE),be===0&&(be|=r.SQLITE_OPEN_READONLY),be|=r.SQLITE_OPEN_EXRESCODE;const me=i.pstack.pointer;try{const he=i.pstack.allocPtr();let Ee=r.sqlite3_open_v2(d,he,be,x||0);pe=i.peekPtr(he),V(pe,Ee),r.sqlite3_extended_result_codes(pe,1),S.indexOf("t")>=0&&r.sqlite3_trace_v2(pe,r.SQLITE_TRACE_STMT,K,pe)}catch(he){throw pe&&r.sqlite3_close_v2(pe),he}finally{i.pstack.restore(me)}this.filename=X,b.set(this,pe),E.set(this,Object.create(null));try{const he=r.sqlite3_js_db_vfs(pe)||s("Internal error: cannot get VFS for new db handle."),Ee=re[he];Ee&&(Ee instanceof Function?Ee(this,t):V(pe,r.sqlite3_exec(pe,Ee,0,0,0)))}catch(he){throw this.close(),he}};C.setVfsPostOpenSql=function(p,q){re[p]=q},C.normalizeArgs=function(p=":memory:",q="c",c=null){const d={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(d,arguments[0]),d.flags===void 0&&(d.flags="c"),d.vfs===void 0&&(d.vfs=null),d.filename===void 0&&(d.filename=":memory:")):(d.filename=p,d.flags=q,d.vfs=c),d};const L=function(...p){C.apply(this,p)};L.dbCtorHelper=C;const G={null:1,number:2,string:3,boolean:4,blob:5};G.undefined==G.null,i.bigIntEnabled&&(G.bigint=G.number);const I=function(){G!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],b.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},F=function(p){return p.pointer||s("DB has been closed."),p},N=function(p,q){return(q!==(q|0)||q<0||q>=p.columnCount)&&s("Column index",q,"is out of range."),p},U=function(p,q){const c=Object.create(null);switch(c.opt=Object.create(null),q.length){case 1:typeof q[0]=="string"||l.isSQLableTypedArray(q[0])||Array.isArray(q[0])?c.sql=q[0]:q[0]&&typeof q[0]=="object"&&(c.opt=q[0],c.sql=c.opt.sql);break;case 2:c.sql=q[0],c.opt=q[1];break;default:s("Invalid argument count for exec().")}c.sql=l.flexibleString(c.sql),typeof c.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const d=c.opt;switch(d.returnValue){case"resultRows":d.resultRows||(d.resultRows=[]),c.returnVal=()=>d.resultRows;break;case"saveSql":d.saveSql||(d.saveSql=[]),c.returnVal=()=>d.saveSql;break;case void 0:case"this":c.returnVal=()=>p;break;default:s("Invalid returnValue value:",d.returnValue)}if(!d.callback&&!d.returnValue&&d.rowMode!==void 0&&(d.resultRows||(d.resultRows=[]),c.returnVal=()=>d.resultRows),d.callback||d.resultRows)switch(d.rowMode===void 0?"array":d.rowMode){case"object":c.cbArg=(x,S)=>{S.columnNames||(S.columnNames=x.getColumnNames([]));const X=x.get([]),le=Object.create(null);for(const pe in S.columnNames)le[S.columnNames[pe]]=X[pe];return le};break;case"array":c.cbArg=x=>x.get([]);break;case"stmt":Array.isArray(d.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),c.cbArg=x=>x;break;default:if(l.isInt32(d.rowMode)){c.cbArg=x=>x.get(d.rowMode);break}else if(typeof d.rowMode=="string"&&d.rowMode.length>1&&d.rowMode[0]==="$"){const x=d.rowMode.substr(1);c.cbArg=S=>{const X=S.get(Object.create(null))[x];return X===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",x):X};break}s("Invalid rowMode:",d.rowMode)}return c},H=(p,q,c,...d)=>{const x=p.prepare(q);try{const S=x.bind(c).step()?x.get(...d):void 0;return x.reset(),S}finally{x.finalize()}},R=(p,q,c,d)=>p.exec({sql:q,bind:c,rowMode:d,returnValue:"resultRows"});L.checkRc=(p,q)=>V(p,q),L.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return F(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const p=this.pointer;if(Object.keys(E.get(this)).forEach((q,c)=>{if(c&&c.pointer)try{c.finalize()}catch{}}),b.delete(this),E.delete(this),r.sqlite3_close_v2(p),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(p=!1,q=!1){const c=F(this).pointer;return p?q?r.sqlite3_total_changes64(c):r.sqlite3_total_changes(c):q?r.sqlite3_changes64(c):r.sqlite3_changes(c)},dbFilename:function(p="main"){return r.sqlite3_db_filename(F(this).pointer,p)},dbName:function(p=0){return r.sqlite3_db_name(F(this).pointer,p)},dbVfsName:function(p=0){let q;const c=r.sqlite3_js_db_vfs(F(this).pointer,p);if(c){const d=new r.sqlite3_vfs(c);try{q=i.cstrToJs(d.$zName)}finally{d.dispose()}}return q},prepare:function(p){F(this);const q=i.pstack.pointer;let c,d;try{c=i.pstack.alloc(8),L.checkRc(this,r.sqlite3_prepare_v2(this.pointer,p,-1,c,null)),d=i.peekPtr(c)}finally{i.pstack.restore(q)}d||s("Cannot prepare empty SQL.");const x=new I(this,d,G);return E.get(this)[d]=x,x},exec:function(){F(this);const p=U(this,arguments);if(!p.sql)return s("exec() requires an SQL string.");const q=p.opt,c=q.callback,d=Array.isArray(q.resultRows)?q.resultRows:void 0;let x,S=q.bind,X=!!(p.cbArg||q.columnNames||d);const le=i.scopedAllocPush(),pe=Array.isArray(q.saveSql)?q.saveSql:void 0;try{const be=l.isSQLableTypedArray(p.sql);let me=be?p.sql.byteLength:i.jstrlen(p.sql);const he=i.scopedAlloc(2*i.ptrSizeof+(me+1)),Ee=he+i.ptrSizeof;let Ae=Ee+i.ptrSizeof;const Oe=Ae+me;for(be?i.heap8().set(p.sql,Ae):i.jstrcpy(p.sql,i.heap8(),Ae,me,!1),i.poke(Ae+me,0);Ae&&i.peek(Ae,"i8");){i.pokePtr([he,Ee],0),L.checkRc(this,r.sqlite3_prepare_v3(this.pointer,Ae,me,0,he,Ee));const Pe=i.peekPtr(he);if(Ae=i.peekPtr(Ee),me=Oe-Ae,!!Pe){if(pe&&pe.push(r.sqlite3_sql(Pe).trim()),x=new I(this,Pe,G),S&&x.parameterCount&&(x.bind(S),S=null),X&&x.columnCount){let Me=Array.isArray(q.columnNames)?0:1;if(X=!1,p.cbArg||d){const De=Object.create(null);for(;x.step();x._lockedByExec=!1){Me++===0&&x.getColumnNames(De.columnNames=q.columnNames||[]),x._lockedByExec=!0;const B=p.cbArg(x,De);if(d&&d.push(B),c&&c.call(q,B,x)===!1)break}x._lockedByExec=!1}Me===0&&x.getColumnNames(q.columnNames)}else x.step();x.reset().finalize(),x=null}}}finally{i.scopedAllocPop(le),x&&(delete x._lockedByExec,x.finalize())}return p.returnVal()},createFunction:function(q,c,d){const x=De=>De instanceof Function;switch(arguments.length){case 1:d=q,q=d.name,c=d.xFunc||0;break;case 2:x(c)||(d=c,c=d.xFunc||0);break}d||(d={}),typeof q!="string"&&s("Invalid arguments: missing function name.");let S=d.xStep||0,X=d.xFinal||0;const le=d.xValue||0,pe=d.xInverse||0;let be;x(c)?(be=!1,(x(S)||x(X))&&s("Ambiguous arguments: scalar or aggregate?"),S=X=null):x(S)?(x(X)||s("Missing xFinal() callback for aggregate or window UDF."),c=null):x(X)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),be===!1?(x(le)||x(pe))&&s("xValue and xInverse are not permitted for non-window UDFs."):x(le)?(x(pe)||s("xInverse must be provided if xValue is."),be=!0):x(pe)&&s("xValue must be provided if xInverse is.");const me=d.pApp;me!=null&&(typeof me!="number"||!l.isInt32(me))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const he=d.xDestroy||0;he&&!x(he)&&s("xDestroy property must be a function.");let Ee=0;W(d,"deterministic")&&(Ee|=r.SQLITE_DETERMINISTIC),W(d,"directOnly")&&(Ee|=r.SQLITE_DIRECTONLY),W(d,"innocuous")&&(Ee|=r.SQLITE_INNOCUOUS),q=q.toLowerCase();const Ae=c||S,Oe=W(d,"arity"),Pe=typeof Oe=="number"?Oe:Ae.length?Ae.length-1:0;let Me;return be?Me=r.sqlite3_create_window_function(this.pointer,q,Pe,r.SQLITE_UTF8|Ee,me||0,S,X,le,pe,he):Me=r.sqlite3_create_function_v2(this.pointer,q,Pe,r.SQLITE_UTF8|Ee,me||0,c,S,X,he),L.checkRc(this,Me),this},selectValue:function(p,q,c){return H(this,p,q,0,c)},selectValues:function(p,q,c){const d=this.prepare(p),x=[];try{for(d.bind(q);d.step();)x.push(d.get(0,c));d.reset()}finally{d.finalize()}return x},selectArray:function(p,q){return H(this,p,q,[])},selectObject:function(p,q){return H(this,p,q,{})},selectArrays:function(p,q){return R(this,p,q,"array")},selectObjects:function(p,q){return R(this,p,q,"object")},openStatementCount:function(){return this.pointer?Object.keys(E.get(this)).length:0},transaction:function(p){let q="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),q+=" "+arguments[0],p=arguments[1]),F(this).exec(q);try{const c=p(this);return this.exec("COMMIT"),c}catch(c){throw this.exec("ROLLBACK"),c}},savepoint:function(p){F(this).exec("SAVEPOINT oo1");try{const q=p(this);return this.exec("RELEASE oo1"),q}catch(q){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),q}},checkRc:function(p){return V(this,p)}};const $=function(p){return p.pointer||s("Stmt has been closed."),p},te=function(p){let q=G[p==null?"null":typeof p];switch(q){case G.boolean:case G.null:case G.number:case G.string:return q;case G.bigint:if(i.bigIntEnabled)return q;default:return l.isBindableTypedArray(p)?G.blob:void 0}},f=function(p){return te(p)||s("Unsupported bind() argument type:",typeof p)},w=function(p,q){const c=typeof q=="number"?q:r.sqlite3_bind_parameter_index(p.pointer,q);return c===0||!l.isInt32(c)?s("Invalid bind() parameter name: "+q):(c<1||c>p.parameterCount)&&s("Bind index",q,"is out of range."),c},k=function(p,q){return p._lockedByExec&&s("Operation is illegal when statement is locked:",q),p},Z=function p(q,c,d,x){k($(q),"bind()"),p._||(p._tooBigInt=X=>s("BigInt value is too big to store without precision loss:",X),p._={string:function(X,le,pe,be){const[me,he]=i.allocCString(pe,!0);return(be?r.sqlite3_bind_blob:r.sqlite3_bind_text)(X.pointer,le,me,he,r.SQLITE_WASM_DEALLOC)}}),f(x),c=w(q,c);let S=0;switch(x==null?G.null:d){case G.null:S=r.sqlite3_bind_null(q.pointer,c);break;case G.string:S=p._.string(q,c,x,!1);break;case G.number:{let X;l.isInt32(x)?X=r.sqlite3_bind_int:typeof x=="bigint"?l.bigIntFits64(x)?i.bigIntEnabled?X=r.sqlite3_bind_int64:l.bigIntFitsDouble(x)?(x=Number(x),X=r.sqlite3_bind_double):p._tooBigInt(x):p._tooBigInt(x):(x=Number(x),i.bigIntEnabled&&Number.isInteger(x)?X=r.sqlite3_bind_int64:X=r.sqlite3_bind_double),S=X(q.pointer,c,x);break}case G.boolean:S=r.sqlite3_bind_int(q.pointer,c,x?1:0);break;case G.blob:{if(typeof x=="string"){S=p._.string(q,c,x,!0);break}else x instanceof ArrayBuffer?x=new Uint8Array(x):l.isBindableTypedArray(x)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const X=i.alloc(x.byteLength||1);i.heap8().set(x.byteLength?x:[0],X),S=r.sqlite3_bind_blob(q.pointer,c,X,x.byteLength,r.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",x),s("Unsupported bind() argument type: "+typeof x)}return S&&L.checkRc(q.db.pointer,S),q._mayGet=!1,q};I.prototype={finalize:function(){if(this.pointer){k(this,"finalize()");const p=r.sqlite3_finalize(this.pointer);return delete E.get(this.db)[this.pointer],b.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,p}},clearBindings:function(){return k($(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(p){k(this,"reset()"),p&&this.clearBindings();const q=r.sqlite3_reset($(this).pointer);return this._mayGet=!1,V(this.db,q),this},bind:function(){$(this);let p,q;switch(arguments.length){case 1:p=1,q=arguments[0];break;case 2:p=arguments[0],q=arguments[1];break;default:s("Invalid bind() arguments.")}return q===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,q===null?Z(this,p,G.null,q):Array.isArray(q)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),q.forEach((c,d)=>Z(this,d+1,f(c),c)),this):(q instanceof ArrayBuffer&&(q=new Uint8Array(q)),typeof q=="object"&&!l.isBindableTypedArray(q)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(q).forEach(c=>Z(this,c,f(q[c]),q[c])),this):Z(this,p,f(q),q)))},bindAsBlob:function(p,q){$(this),arguments.length===1&&(q=p,p=1);const c=f(q);return G.string!==c&&G.blob!==c&&G.null!==c&&s("Invalid value type for bindAsBlob()"),Z(this,p,G.blob,q)},step:function(){k(this,"step()");const p=r.sqlite3_step($(this).pointer);switch(p){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",p,r.sqlite3_js_rc_str(p),"SQL =",r.sqlite3_sql(this.pointer)),L.checkRc(this.db.pointer,p)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const p=this.step();return this.reset(),p}finally{try{this.finalize()}catch{}}},get:function(p,q){if($(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(p)){let c=0;const d=this.columnCount;for(;c<d;)p[c]=this.get(c++);return p}else if(p&&typeof p=="object"){let c=0;const d=this.columnCount;for(;c<d;)p[r.sqlite3_column_name(this.pointer,c)]=this.get(c++);return p}switch(N(this,p),q===void 0?r.sqlite3_column_type(this.pointer,p):q){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const c=r.sqlite3_column_int64(this.pointer,p);return c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c).valueOf():c}else{const c=r.sqlite3_column_double(this.pointer,p);return(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+c),l.isInt32(c)?c|0:c}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,p);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,p);case r.SQLITE_BLOB:{const c=r.sqlite3_column_bytes(this.pointer,p),d=r.sqlite3_column_blob(this.pointer,p),x=new Uint8Array(c);return c&&x.set(i.heap8u().slice(d,d+c),0),c&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(x.buffer),x}default:s("Don't know how to translate","type of result column #"+p+".")}s("Not reached.")},getInt:function(p){return this.get(p,r.SQLITE_INTEGER)},getFloat:function(p){return this.get(p,r.SQLITE_FLOAT)},getString:function(p){return this.get(p,r.SQLITE_TEXT)},getBlob:function(p){return this.get(p,r.SQLITE_BLOB)},getJSON:function(p){const q=this.get(p,r.SQLITE_STRING);return q===null?q:JSON.parse(q)},getColumnName:function(p){return r.sqlite3_column_name(N($(this),p).pointer,p)},getColumnNames:function(p=[]){N($(this),0);const q=this.columnCount;for(let c=0;c<q;++c)p.push(r.sqlite3_column_name(this.pointer,c));return p},getParamIndex:function(p){return $(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,p):void 0}};{const p={enumerable:!0,get:function(){return b.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(I.prototype,"pointer",p),Object.defineProperty(L.prototype,"pointer",p)}if(Object.defineProperty(I.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),t.oo1={DB:L,Stmt:I},l.isUIThread()){t.oo1.JsStorageDb=function(q="session"){const c=C.normalizeArgs(...arguments);q=c.filename,q!=="session"&&q!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),c.vfs="kvvfs",C.call(this,c)};const p=t.oo1.JsStorageDb;p.prototype=Object.create(L.prototype),p.clearStorage=r.sqlite3_js_kvvfs_clear,p.prototype.clearStorage=function(){return p.clearStorage(F(this).filename)},p.storageSize=r.sqlite3_js_kvvfs_size,p.prototype.storageSize=function(){return p.storageSize(F(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.util;t.initWorker1API=(function(){const r=(...C)=>{throw new Error(C.join(" "))};globalThis.WorkerGlobalScope instanceof Function||r("initWorker1API() must be run from a Worker thread.");const i=this.sqlite3||r("Missing this.sqlite3 object."),l=i.oo1.DB,b=function(C){let L=E.idMap.get(C);return L||(L="db#"+ ++E.idSeq+"@"+C.pointer,E.idMap.set(C,L),L)},E={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(C){const L=new l(C);return this.dbs[b(L)]=L,this.dbList.indexOf(L)<0&&this.dbList.push(L),L},close:function(C,L){if(C){delete this.dbs[b(C)];const G=C.filename,I=s.sqlite3__wasm_db_vfs(C.pointer,0);C.close();const F=this.dbList.indexOf(C);F>=0&&this.dbList.splice(F,1),L&&G&&I&&s.sqlite3__wasm_vfs_unlink(I,G)}},post:function(C,L){L&&L.length?(globalThis.postMessage(C,Array.from(L)),L.length=0):globalThis.postMessage(C)},dbs:Object.create(null),getDb:function(C,L=!0){return this.dbs[C]||(L?r("Unknown (or closed) DB ID:",C):void 0)}},W=function(C=E.dbList[0]){return C&&C.pointer?C:r("DB is not opened.")},V=function(C,L=!0){const G=E.getDb(C.dbId,!1)||E.dbList[0];return L?W(G):G},K=function(){return E.dbList[0]&&b(E.dbList[0])},re={open:function(C){const L=Object.create(null),G=C.args||Object.create(null);G.simulateError&&r("Throwing because of simulateError flag.");const I=Object.create(null);L.vfs=G.vfs,L.filename=G.filename||"";const F=E.open(L);return I.filename=F.filename,I.persistent=!!i.capi.sqlite3_js_db_uses_vfs(F.pointer,"opfs"),I.dbId=b(F),I.vfs=F.dbVfsName(),I},close:function(C){const L=V(C,!1),G={filename:L&&L.filename};if(L){const I=C.args&&typeof C.args=="object"?!!C.args.unlink:!1;E.close(L,I)}return G},exec:function(C){const L=typeof C.args=="string"?{sql:C.args}:C.args||Object.create(null);L.rowMode==="stmt"?r("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):L.sql||r("'exec' requires input SQL.");const G=V(C);(L.callback||Array.isArray(L.resultRows))&&(G._blobXfer=E.xfer);const I=L.callback;let F=0;const N=!!L.columnNames;typeof I=="string"&&(N||(L.columnNames=[]),L.callback=function(U,H){E.post({type:I,columnNames:L.columnNames,rowNumber:++F,row:U},E.xfer)});try{const U=L.countChanges?G.changes(!0,L.countChanges===64):void 0;G.exec(L),U!==void 0&&(L.changeCount=G.changes(!0,L.countChanges===64)-U),L.callback instanceof Function&&(L.callback=I,E.post({type:I,columnNames:L.columnNames,rowNumber:null,row:void 0}))}finally{delete G._blobXfer,L.callback&&(L.callback=I)}return L},"config-get":function(){const C=Object.create(null),L=i.config;return["bigIntEnabled"].forEach(function(G){Object.getOwnPropertyDescriptor(L,G)&&(C[G]=L[G])}),C.version=i.version,C.vfsList=i.capi.sqlite3_js_vfs_list(),C.opfsEnabled=!!i.opfs,C},export:function(C){const L=V(C),G={byteArray:i.capi.sqlite3_js_db_export(L.pointer),filename:L.filename,mimetype:"application/x-sqlite3"};return E.xfer.push(G.byteArray.buffer),G},toss:function(C){r("Testing worker exception")},"opfs-tree":async function(C){return i.opfs||r("OPFS support is unavailable."),await i.opfs.treeList()}};globalThis.onmessage=async function(C){C=C.data;let L,G=C.dbId,I=C.type;const F=performance.now();try{re.hasOwnProperty(I)&&re[I]instanceof Function?L=await re[I](C):r("Unknown db worker message type:",C.type)}catch(N){I="error",L={operation:C.type,message:N.message,errorClass:N.name,input:C},N.stack&&(L.stack=typeof N.stack=="string"?N.stack.split(/\n\s*/):N.stack)}G||(G=L.dbId||K()),E.post({type:I,dbId:G,messageId:C.messageId,workerReceivedTime:F,workerRespondTime:performance.now(),departureTime:C.departureTime,result:L},E.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.wasm,r=t.capi,i=t.util.toss3,l=Object.create(null);t.vfs=l,r.sqlite3_vfs.prototype.registerVfs=function(b=!1){this instanceof t.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const E=r.sqlite3_vfs_register(this,b?1:0);return E&&i("sqlite3_vfs_register(",this,") failed with rc",E),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},l.installVfs=function(b){let E=0;const W=["io","vfs"];for(const V of W){const K=b[V];K&&(++E,K.struct.installMethods(K.methods,!!K.applyArgcCheck),V==="vfs"&&(!K.struct.$zName&&typeof K.name=="string"&&K.struct.addOnDispose(K.struct.$zName=s.allocCString(K.name)),K.struct.registerVfs(!!K.asDefault)))}return E||i("Misuse: installVfs() options object requires at least","one of:",W),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.wasm,r=t.capi,i=t.util.toss3,l=Object.create(null);t.vtab=l;const b=r.sqlite3_index_info;b.prototype.nthConstraint=function(V,K=!1){if(V<0||V>=this.$nConstraint)return!1;const re=this.$aConstraint+b.sqlite3_index_constraint.structInfo.sizeof*V;return K?re:new b.sqlite3_index_constraint(re)},b.prototype.nthConstraintUsage=function(V,K=!1){if(V<0||V>=this.$nConstraint)return!1;const re=this.$aConstraintUsage+b.sqlite3_index_constraint_usage.structInfo.sizeof*V;return K?re:new b.sqlite3_index_constraint_usage(re)},b.prototype.nthOrderBy=function(V,K=!1){if(V<0||V>=this.$nOrderBy)return!1;const re=this.$aOrderBy+b.sqlite3_index_orderby.structInfo.sizeof*V;return K?re:new b.sqlite3_index_orderby(re)};const E=function(V,K){return(function(re,C=!1){if(arguments.length===0&&(re=new K),re instanceof K)return this.set(re.pointer,re),re;s.isPtr(re)||t.SQLite3Error.toss("Invalid argument to",V+"()");let L=this.get(re);return C&&this.delete(re),L}).bind(new Map)},W=function(V,K){const re=E(V,K);return Object.assign(Object.create(null),{StructType:K,create:C=>{const L=re();return s.pokePtr(C,L.pointer),L},get:C=>re(C),unget:C=>re(C,!0),dispose:C=>{const L=re(C,!0);L&&L.dispose()}})};l.xVtab=W("xVtab",r.sqlite3_vtab),l.xCursor=W("xCursor",r.sqlite3_vtab_cursor),l.xIndexInfo=V=>new r.sqlite3_index_info(V),l.xError=function V(K,re,C){if(V.errorReporter instanceof Function)try{V.errorReporter("sqlite3_module::"+K+"(): "+re.message)}catch{}let L;return re instanceof t.WasmAllocError?L=r.SQLITE_NOMEM:arguments.length>2?L=C:re instanceof t.SQLite3Error&&(L=re.resultCode),L||r.SQLITE_ERROR},l.xError.errorReporter=console.error.bind(console),l.xRowid=(V,K)=>s.poke(V,K,"i64"),l.setupModule=function(V){let K=!1;const re=this instanceof r.sqlite3_module?this:V.struct||(K=new r.sqlite3_module);try{const C=V.methods||i("Missing 'methods' object.");for(const L of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const G=L[0],I=L[1];C[G]===!0?C[G]=C[I]:C[I]===!0&&(C[I]=C[G])}if(V.catchExceptions){const L=function(F,N){return["xConnect","xCreate"].indexOf(F)>=0?function(U,H,R,$,te,f){try{return N(...arguments)||0}catch(w){return w instanceof t.WasmAllocError||(s.dealloc(s.peekPtr(f)),s.pokePtr(f,s.allocCString(w.message))),l.xError(F,w)}}:function(...U){try{return N(...U)||0}catch(H){return l.xError(F,H)}}},G=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],I=Object.create(null);for(const F of G){const N=C[F];if(N instanceof Function)F==="xConnect"&&C.xCreate===N?I[F]=C.xCreate:F==="xCreate"&&C.xConnect===N?I[F]=C.xConnect:I[F]=L(F,N);else continue}re.installMethods(I,!1)}else re.installMethods(C,!!V.applyArgcCheck);if(re.$iVersion===0){let L;typeof V.iVersion=="number"?L=V.iVersion:re.$xShadowName?L=3:re.$xSavePoint||re.$xRelease||re.$xRollbackTo?L=2:L=1,re.$iVersion=L}}catch(C){throw K&&K.dispose(),C}return re},r.sqlite3_module.prototype.setupModule=function(V){return l.setupModule.call(this,V)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=function r(i){var E;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((E=navigator==null?void 0:navigator.storage)!=null&&E.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const l=new URL(globalThis.location.href).searchParams;return l.has("opfs-disable")?Promise.resolve(t):(i.verbose===void 0&&(i.verbose=l.has("opfs-verbose")?+l.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=l.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(W,V){const K=[t.config.error,t.config.warn,t.config.log],re=(B,...J)=>{i.verbose>B&&K[B]("OPFS syncer:",...J)},C=(...B)=>re(2,...B),L=(...B)=>re(1,...B),G=(...B)=>re(0,...B),I=t.util.toss,F=t.capi,N=t.util,U=t.wasm,H=F.sqlite3_vfs,R=F.sqlite3_file,$=F.sqlite3_io_methods,te=Object.create(null),f=()=>{var B;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((B=navigator==null?void 0:navigator.storage)==null?void 0:B.getDirectory)};te.metrics={dump:function(){let B,J=0,Y=0,oe=0;for(B in S.opIds){const se=X[B];J+=se.count,Y+=se.time,oe+=se.wait,se.avgTime=se.count&&se.time?se.time/se.count:0,se.avgWait=se.count&&se.wait?se.wait/se.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",X,`
Total of`,J,"op(s) for",Y,"ms (incl. "+oe+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",X.s11n),c.postMessage({type:"opfs-async-metrics"})},reset:function(){let B;const J=oe=>oe.count=oe.time=oe.wait=0;for(B in S.opIds)J(X[B]=Object.create(null));let Y=X.s11n=Object.create(null);Y=Y.serialize=Object.create(null),Y.count=Y.time=0,Y=X.s11n.deserialize=Object.create(null),Y.count=Y.time=0}};const w=new $,k=new H().addOnDispose(()=>w.dispose());let Z;const p=B=>(Z=!0,k.dispose(),V(B)),q=()=>(Z=!1,W(t)),c=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-8f1cb468.js",self.location));setTimeout(()=>{Z===void 0&&p(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),c._originalOnError=c.onerror,c.onerror=function(B){G("Error initializing OPFS asyncer:",B),p(new Error("Loading OPFS async Worker failed for unknown reasons."))};const d=F.sqlite3_vfs_find(null),x=d?new H(d):null;w.$iVersion=1,k.$iVersion=2,k.$szOsFile=F.sqlite3_file.structInfo.sizeof,k.$mxPathname=1024,k.$zName=U.allocCString("opfs"),k.$xDlOpen=k.$xDlError=k.$xDlSym=k.$xDlClose=null,k.addOnDispose("$zName",k.$zName,"cleanup default VFS wrapper",()=>x?x.dispose():null);const S=Object.create(null);S.verbose=i.verbose,S.littleEndian=(()=>{const B=new ArrayBuffer(2);return new DataView(B).setInt16(0,256,!0),new Int16Array(B)[0]===256})(),S.asyncIdleWaitTime=150,S.asyncS11nExceptions=1,S.fileBufferSize=1024*64,S.sabS11nOffset=S.fileBufferSize,S.sabS11nSize=k.$mxPathname*2,S.sabIO=new SharedArrayBuffer(S.fileBufferSize+S.sabS11nSize),S.opIds=Object.create(null);const X=Object.create(null);{let B=0;S.opIds.whichOp=B++,S.opIds.rc=B++,S.opIds.xAccess=B++,S.opIds.xClose=B++,S.opIds.xDelete=B++,S.opIds.xDeleteNoWait=B++,S.opIds.xFileSize=B++,S.opIds.xLock=B++,S.opIds.xOpen=B++,S.opIds.xRead=B++,S.opIds.xSleep=B++,S.opIds.xSync=B++,S.opIds.xTruncate=B++,S.opIds.xUnlock=B++,S.opIds.xWrite=B++,S.opIds.mkdir=B++,S.opIds["opfs-async-metrics"]=B++,S.opIds["opfs-async-shutdown"]=B++,S.opIds.retry=B++,S.sabOP=new SharedArrayBuffer(B*4),te.metrics.reset()}S.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(B=>{(S.sq3Codes[B]=F[B])===void 0&&I("Maintenance required: not found:",B)}),S.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const le=(B,...J)=>{const Y=S.opIds[B]||I("Invalid op ID:",B);S.s11n.serialize(...J),Atomics.store(S.sabOPView,S.opIds.rc,-1),Atomics.store(S.sabOPView,S.opIds.whichOp,Y),Atomics.notify(S.sabOPView,S.opIds.whichOp);const oe=performance.now();for(;Atomics.wait(S.sabOPView,S.opIds.rc,-1)!=="not-equal";);const se=Atomics.load(S.sabOPView,S.opIds.rc);if(X[B].wait+=performance.now()-oe,se&&S.asyncS11nExceptions){const fe=S.s11n.deserialize();fe&&G(B+"() async error:",...fe)}return se};te.debug={asyncShutdown:()=>{L("Shutting down OPFS async listener. The OPFS VFS will no longer work."),le("opfs-async-shutdown")},asyncRestart:()=>{L("Attempting to restart OPFS VFS async listener. Might work, might not."),c.postMessage({type:"opfs-async-restart"})}};const pe=()=>{if(S.s11n)return S.s11n;const B=new TextDecoder,J=new TextEncoder("utf-8"),Y=new Uint8Array(S.sabIO,S.sabS11nOffset,S.sabS11nSize),oe=new DataView(S.sabIO,S.sabS11nOffset,S.sabS11nSize);S.s11n=Object.create(null);const se=Object.create(null);se.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},se.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},se.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},se.string={id:4};const fe=y=>se[typeof y]||I("Maintenance required: this value type cannot be serialized.",y),ee=y=>{switch(y){case se.number.id:return se.number;case se.bigint.id:return se.bigint;case se.boolean.id:return se.boolean;case se.string.id:return se.string;default:I("Invalid type ID:",y)}};return S.s11n.deserialize=function(y=!1){++X.s11n.deserialize.count;const g=performance.now(),P=Y[0],j=P?[]:null;if(P){const Q=[];let ie=1,de,ye,ke;for(de=0;de<P;++de,++ie)Q.push(ee(Y[ie]));for(de=0;de<P;++de){const He=Q[de];He.getter?(ke=oe[He.getter](ie,S.littleEndian),ie+=He.size):(ye=oe.getInt32(ie,S.littleEndian),ie+=4,ke=B.decode(Y.slice(ie,ie+ye)),ie+=ye),j.push(ke)}}return y&&(Y[0]=0),X.s11n.deserialize.time+=performance.now()-g,j},S.s11n.serialize=function(...y){const g=performance.now();if(++X.s11n.serialize.count,y.length){const P=[];let j=0,Q=1;for(Y[0]=y.length&255;j<y.length;++j,++Q)P.push(fe(y[j])),Y[Q]=P[j].id;for(j=0;j<y.length;++j){const ie=P[j];if(ie.setter)oe[ie.setter](Q,y[j],S.littleEndian),Q+=ie.size;else{const de=J.encode(y[j]);oe.setInt32(Q,de.byteLength,S.littleEndian),Q+=4,Y.set(de,Q),Q+=de.byteLength}}}else Y[0]=0;X.s11n.serialize.time+=performance.now()-g},S.s11n},be=function B(J=16){B._chars||(B._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",B._n=B._chars.length);const Y=[];let oe=0;for(;oe<J;++oe){const se=Math.random()*(B._n*64)%B._n|0;Y[oe]=B._chars[se]}return Y.join("")},me=Object.create(null),he=Object.create(null);he.op=void 0,he.start=void 0;const Ee=B=>{he.start=performance.now(),he.op=B,++X[B].count},Ae=()=>X[he.op].time+=performance.now()-he.start,Oe={xCheckReservedLock:function(B,J){return U.poke(J,0,"i32"),0},xClose:function(B){Ee("xClose");let J=0;const Y=me[B];return Y&&(delete me[B],J=le("xClose",B),Y.sq3File&&Y.sq3File.dispose()),Ae(),J},xDeviceCharacteristics:function(B){return F.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(B,J,Y){return F.SQLITE_NOTFOUND},xFileSize:function(B,J){Ee("xFileSize");let Y=le("xFileSize",B);if(Y==0)try{const oe=S.s11n.deserialize()[0];U.poke(J,oe,"i64")}catch(oe){G("Unexpected error reading xFileSize() result:",oe),Y=S.sq3Codes.SQLITE_IOERR}return Ae(),Y},xLock:function(B,J){Ee("xLock");const Y=me[B];let oe=0;return Y.lockType?Y.lockType=J:(oe=le("xLock",B,J),oe===0&&(Y.lockType=J)),Ae(),oe},xRead:function(B,J,Y,oe){Ee("xRead");const se=me[B];let fe;try{fe=le("xRead",B,Y,Number(oe)),(fe===0||F.SQLITE_IOERR_SHORT_READ===fe)&&U.heap8u().set(se.sabView.subarray(0,Y),J)}catch(ee){G("xRead(",arguments,") failed:",ee,se),fe=F.SQLITE_IOERR_READ}return Ae(),fe},xSync:function(B,J){Ee("xSync"),++X.xSync.count;const Y=le("xSync",B,J);return Ae(),Y},xTruncate:function(B,J){Ee("xTruncate");const Y=le("xTruncate",B,Number(J));return Ae(),Y},xUnlock:function(B,J){Ee("xUnlock");const Y=me[B];let oe=0;return F.SQLITE_LOCK_NONE===J&&Y.lockType&&(oe=le("xUnlock",B,J)),oe===0&&(Y.lockType=J),Ae(),oe},xWrite:function(B,J,Y,oe){Ee("xWrite");const se=me[B];let fe;try{se.sabView.set(U.heap8u().subarray(J,J+Y)),fe=le("xWrite",B,Y,Number(oe))}catch(ee){G("xWrite(",arguments,") failed:",ee,se),fe=F.SQLITE_IOERR_WRITE}return Ae(),fe}},Pe={xAccess:function(B,J,Y,oe){Ee("xAccess");const se=le("xAccess",U.cstrToJs(J));return U.poke(oe,se?0:1,"i32"),Ae(),0},xCurrentTime:function(B,J){return U.poke(J,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(B,J){return U.poke(J,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(B,J,Y){Ee("xDelete");const oe=le("xDelete",U.cstrToJs(J),Y,!1);return Ae(),oe},xFullPathname:function(B,J,Y,oe){return U.cstrncpy(oe,J,Y)<Y?0:F.SQLITE_CANTOPEN},xGetLastError:function(B,J,Y){return L("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(J,Y,oe,se,fe){Ee("xOpen");let ee=0;Y===0?Y=be():U.isPtr(Y)&&(F.sqlite3_uri_boolean(Y,"opfs-unlock-asap",0)&&(ee|=S.opfsFlags.OPFS_UNLOCK_ASAP),F.sqlite3_uri_boolean(Y,"delete-before-open",0)&&(ee|=S.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),Y=U.cstrToJs(Y));const y=Object.create(null);y.fid=oe,y.filename=Y,y.sab=new SharedArrayBuffer(S.fileBufferSize),y.flags=se;const g=le("xOpen",oe,Y,se,ee);return g||(y.readOnly&&U.poke(fe,F.SQLITE_OPEN_READONLY,"i32"),me[oe]=y,y.sabView=S.sabFileBufView,y.sq3File=new R(oe),y.sq3File.$pMethods=w.pointer,y.lockType=F.SQLITE_LOCK_NONE),Ae(),g}};x&&(k.$xRandomness=x.$xRandomness,k.$xSleep=x.$xSleep),k.$xRandomness||(Pe.xRandomness=function(B,J,Y){const oe=U.heap8u();let se=0;for(;se<J;++se)oe[Y+se]=Math.random()*255e3&255;return se}),k.$xSleep||(Pe.xSleep=function(B,J){return Atomics.wait(S.sabOPView,S.opIds.xSleep,0,J),0}),te.getResolvedPath=function(B,J){const Y=new URL(B,"file://irrelevant").pathname;return J?Y.split("/").filter(oe=>!!oe):Y},te.getDirForFilename=async function(J,Y=!1){const oe=te.getResolvedPath(J,!0),se=oe.pop();let fe=te.rootDirectory;for(const ee of oe)ee&&(fe=await fe.getDirectoryHandle(ee,{create:!!Y}));return[fe,se]},te.mkdir=async function(B){try{return await te.getDirForFilename(B+"/filepart",!0),!0}catch{return!1}},te.entryExists=async function(B){try{const[J,Y]=await te.getDirForFilename(B);return await J.getFileHandle(Y),!0}catch{return!1}},te.randomFilename=be,te.treeList=async function(){const B=async function Y(oe,se){se.name=oe.name,se.dirs=[],se.files=[];for await(const fe of oe.values())if(fe.kind==="directory"){const ee=Object.create(null);se.dirs.push(ee),await Y(fe,ee)}else se.files.push(fe.name)},J=Object.create(null);return await B(te.rootDirectory,J),J},te.rmfr=async function(){const B=te.rootDirectory,J={recurse:!0};for await(const Y of B.values())B.removeEntry(Y.name,J)},te.unlink=async function(B,J=!1,Y=!1){try{const[oe,se]=await te.getDirForFilename(B,!1);return await oe.removeEntry(se,{recursive:J}),!0}catch(oe){if(Y)throw new Error("unlink(",arguments[0],") failed: "+oe.message,{cause:oe});return!1}},te.traverse=async function(B){const J={recursive:!0,directory:te.rootDirectory};typeof B=="function"&&(B={callback:B}),B=Object.assign(J,B||{}),async function oe(se,fe){for await(const ee of se.values()){if(B.callback(ee,se,fe)===!1)return!1;if(B.recursive&&ee.kind==="directory"&&await oe(ee,fe+1)===!1)break}}(B.directory,0)};const Me=async function(B,J){const[Y,oe]=await te.getDirForFilename(B,!0);let fe=await(await Y.getFileHandle(oe,{create:!0})).createSyncAccessHandle(),ee=0,y,g=!1;try{for(fe.truncate(0);(y=await J())!==void 0;)y instanceof ArrayBuffer&&(y=new Uint8Array(y)),ee===0&&y.byteLength>=15&&(N.affirmDbHeader(y),g=!0),fe.write(y,{at:ee}),ee+=y.byteLength;if((ee<512||ee%512!==0)&&I("Input size",ee,"is not correct for an SQLite database."),!g){const P=new Uint8Array(20);fe.read(P,{at:0}),N.affirmDbHeader(P)}return fe.write(new Uint8Array([1,1]),{at:18}),ee}catch(P){throw await fe.close(),fe=void 0,await Y.removeEntry(oe).catch(()=>{}),P}finally{fe&&await fe.close()}};if(te.importDb=async function(B,J){if(J instanceof Function)return Me(B,J);J instanceof ArrayBuffer&&(J=new Uint8Array(J)),N.affirmIsDb(J);const Y=J.byteLength,[oe,se]=await te.getDirForFilename(B,!0);let fe,ee=0;try{return fe=await(await oe.getFileHandle(se,{create:!0})).createSyncAccessHandle(),fe.truncate(0),ee=fe.write(J,{at:0}),ee!=Y&&I("Expected to write "+Y+" bytes but wrote "+ee+"."),fe.write(new Uint8Array([1,1]),{at:18}),ee}catch(y){throw fe&&(await fe.close(),fe=void 0),await oe.removeEntry(se).catch(()=>{}),y}finally{fe&&await fe.close()}},t.oo1){const B=function(...J){const Y=t.oo1.DB.dbCtorHelper.normalizeArgs(...J);Y.vfs=k.$zName,t.oo1.DB.dbCtorHelper.call(this,Y)};B.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=B,B.importDb=te.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenSql(k.pointer,function(J,Y){Y.capi.sqlite3_busy_timeout(J,1e4),Y.capi.sqlite3_exec(J,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const De=function(){const B=U.scopedAllocPush(),J=new R;try{const Y=J.pointer,oe=F.SQLITE_OPEN_CREATE|F.SQLITE_OPEN_READWRITE|F.SQLITE_OPEN_MAIN_DB,se=U.scopedAlloc(8),fe="/sanity/check/file"+be(8),ee=U.scopedAllocCString(fe);let y;if(S.s11n.serialize("This is  string."),y=S.s11n.deserialize(),C("deserialize() says:",y),y[0]!=="This is  string."&&I("String d13n error."),Pe.xAccess(k.pointer,ee,0,se),y=U.peek(se,"i32"),C("xAccess(",fe,") exists ?=",y),y=Pe.xOpen(k.pointer,ee,Y,oe,se),C("open rc =",y,"state.sabOPView[xOpen] =",S.sabOPView[S.opIds.xOpen]),y!==0){G("open failed with code",y);return}Pe.xAccess(k.pointer,ee,0,se),y=U.peek(se,"i32"),y||I("xAccess() failed to detect file."),y=Oe.xSync(J.pointer,0),y&&I("sync failed w/ rc",y),y=Oe.xTruncate(J.pointer,1024),y&&I("truncate failed w/ rc",y),U.poke(se,0,"i64"),y=Oe.xFileSize(J.pointer,se),y&&I("xFileSize failed w/ rc",y),C("xFileSize says:",U.peek(se,"i64")),y=Oe.xWrite(J.pointer,ee,10,1),y&&I("xWrite() failed!");const g=U.scopedAlloc(16);y=Oe.xRead(J.pointer,g,6,2),U.poke(g+6,0);let P=U.cstrToJs(g);C("xRead() got:",P),P!=="sanity"&&I("Unexpected xRead() value."),Pe.xSleep&&(C("xSleep()ing before close()ing..."),Pe.xSleep(k.pointer,2e3),C("waking up from xSleep()")),y=Oe.xClose(Y),C("xClose rc =",y,"sabOPView =",S.sabOPView),C("Deleting file:",fe),Pe.xDelete(k.pointer,ee,4660),Pe.xAccess(k.pointer,ee,0,se),y=U.peek(se,"i32"),y&&I("Expecting 0 from xAccess(",fe,") after xDelete()."),L("End of OPFS sanity checks.")}finally{J.dispose(),U.scopedAllocPop(B)}};c.onmessage=function({data:B}){switch(B.type){case"opfs-unavailable":p(new Error(B.payload.join(" ")));break;case"opfs-async-loaded":c.postMessage({type:"opfs-async-init",args:S});break;case"opfs-async-inited":{if(Z===!0)break;try{t.vfs.installVfs({io:{struct:w,methods:Oe},vfs:{struct:k,methods:Pe}}),S.sabOPView=new Int32Array(S.sabOP),S.sabFileBufView=new Uint8Array(S.sabIO,0,S.fileBufferSize),S.sabS11nView=new Uint8Array(S.sabIO,S.sabS11nOffset,S.sabS11nSize),pe(),i.sanityChecks&&(L("Running sanity checks because of opfs-sanity-check URL arg..."),De()),f()?navigator.storage.getDirectory().then(J=>{c.onerror=c._originalOnError,delete c._originalOnError,t.opfs=te,te.rootDirectory=J,C("End of OPFS sqlite3_vfs setup.",k),q()}).catch(p):q()}catch(J){G(J),p(J)}break}default:{const J="Unexpected message from the OPFS async worker: "+JSON.stringify(B);G(J),p(new Error(J));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(l=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",l.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var me,he,Ee,Ae,Oe,Pe,Me,De,B,J,Y,oe,Ct,fe;const s=t.util.toss,r=t.util.toss3,i=Object.create(null),l=t.capi,b=t.util,E=t.wasm,W=4096,V=512,K=4,re=8,C=V+K,L=V,G=C,I=W,F=l.SQLITE_OPEN_MAIN_DB|l.SQLITE_OPEN_MAIN_JOURNAL|l.SQLITE_OPEN_SUPER_JOURNAL|l.SQLITE_OPEN_WAL,N=".opaque",U=()=>Math.random().toString(36).slice(2),H=new TextDecoder,R=new TextEncoder,$=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),te=[t.config.error,t.config.warn,t.config.log];t.config.log;const f=t.config.warn;t.config.error;const w=new Map,k=ee=>w.get(ee),Z=(ee,y)=>{y?w.set(ee,y):w.delete(ee)},p=new Map,q=ee=>p.get(ee),c=(ee,y)=>{y?p.set(ee,y):p.delete(ee)},d={xCheckReservedLock:function(ee,y){const g=q(ee);return g.log("xCheckReservedLock"),g.storeErr(),E.poke32(y,1),0},xClose:function(ee){const y=q(ee);y.storeErr();const g=y.getOFileForS3File(ee);if(g)try{y.log(`xClose ${g.path}`),y.mapS3FileToOFile(ee,!1),g.sah.flush(),g.flags&l.SQLITE_OPEN_DELETEONCLOSE&&y.deletePath(g.path)}catch(P){return y.storeErr(P,l.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(ee){return l.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(ee,y,g){return l.SQLITE_NOTFOUND},xFileSize:function(ee,y){const g=q(ee);g.log("xFileSize");const j=g.getOFileForS3File(ee).sah.getSize()-I;return E.poke64(y,BigInt(j)),0},xLock:function(ee,y){const g=q(ee);g.log(`xLock ${y}`),g.storeErr();const P=g.getOFileForS3File(ee);return P.lockType=y,0},xRead:function(ee,y,g,P){const j=q(ee);j.storeErr();const Q=j.getOFileForS3File(ee);j.log(`xRead ${Q.path} ${g} @ ${P}`);try{const ie=Q.sah.read(E.heap8u().subarray(y,y+g),{at:I+Number(P)});return ie<g?(E.heap8u().fill(0,y+ie,y+g),l.SQLITE_IOERR_SHORT_READ):0}catch(ie){return j.storeErr(ie,l.SQLITE_IOERR)}},xSectorSize:function(ee){return W},xSync:function(ee,y){const g=q(ee);g.log(`xSync ${y}`),g.storeErr();const P=g.getOFileForS3File(ee);try{return P.sah.flush(),0}catch(j){return g.storeErr(j,l.SQLITE_IOERR)}},xTruncate:function(ee,y){const g=q(ee);g.log(`xTruncate ${y}`),g.storeErr();const P=g.getOFileForS3File(ee);try{return P.sah.truncate(I+Number(y)),0}catch(j){return g.storeErr(j,l.SQLITE_IOERR)}},xUnlock:function(ee,y){const g=q(ee);g.log("xUnlock");const P=g.getOFileForS3File(ee);return P.lockType=y,0},xWrite:function(ee,y,g,P){const j=q(ee);j.storeErr();const Q=j.getOFileForS3File(ee);j.log(`xWrite ${Q.path} ${g} ${P}`);try{const ie=Q.sah.write(E.heap8u().subarray(y,y+g),{at:I+Number(P)});return g===ie?0:s("Unknown write() failure.")}catch(ie){return j.storeErr(ie,l.SQLITE_IOERR)}}},x=new l.sqlite3_io_methods;x.$iVersion=1,t.vfs.installVfs({io:{struct:x,methods:d}});const S={xAccess:function(ee,y,g,P){const j=k(ee);j.storeErr();try{const Q=j.getPath(y);E.poke32(P,j.hasFilename(Q)?1:0)}catch{E.poke32(P,0)}return 0},xCurrentTime:function(ee,y){return E.poke(y,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(ee,y){return E.poke(y,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(ee,y,g){const P=k(ee);P.log(`xDelete ${E.cstrToJs(y)}`),P.storeErr();try{return P.deletePath(P.getPath(y)),0}catch(j){return P.storeErr(j),l.SQLITE_IOERR_DELETE}},xFullPathname:function(ee,y,g,P){return E.cstrncpy(P,y,g)<g?0:l.SQLITE_CANTOPEN},xGetLastError:function(ee,y,g){const P=k(ee),j=P.popErr();if(P.log(`xGetLastError ${y} e =`,j),j){const Q=E.scopedAllocPush();try{const[ie,de]=E.scopedAllocCString(j.message,!0);E.cstrncpy(g,ie,y),de>y&&E.poke8(g+y-1,0)}catch{return l.SQLITE_NOMEM}finally{E.scopedAllocPop(Q)}}return j?j.sqlite3Rc||l.SQLITE_IOERR:0},xOpen:function(y,g,P,j,Q){const ie=k(y);try{ie.log(`xOpen ${E.cstrToJs(g)} ${j}`);const de=g&&E.peek8(g)?ie.getPath(g):U();let ye=ie.getSAHForPath(de);!ye&&j&l.SQLITE_OPEN_CREATE&&(ie.getFileCount()<ie.getCapacity()?(ye=ie.nextAvailableSAH(),ie.setAssociatedPath(ye,de,j)):s("SAH pool is full. Cannot create file",de)),ye||s("file not found:",de);const ke={path:de,flags:j,sah:ye};ie.mapS3FileToOFile(P,ke),ke.lockType=l.SQLITE_LOCK_NONE;const He=new l.sqlite3_file(P);return He.$pMethods=x.pointer,He.dispose(),E.poke32(Q,j),0}catch(de){return ie.storeErr(de),l.SQLITE_CANTOPEN}}},X=function(ee){t.capi.sqlite3_vfs_find(ee)&&r("VFS name is already registered:",ee);const y=new l.sqlite3_vfs,g=l.sqlite3_vfs_find(null),P=g?new l.sqlite3_vfs(g):null;return y.$iVersion=2,y.$szOsFile=l.sqlite3_file.structInfo.sizeof,y.$mxPathname=V,y.addOnDispose(y.$zName=E.allocCString(ee),()=>Z(y.pointer,0)),P&&(y.$xRandomness=P.$xRandomness,y.$xSleep=P.$xSleep,P.dispose()),!y.$xRandomness&&!S.xRandomness&&(S.xRandomness=function(j,Q,ie){const de=E.heap8u();let ye=0;for(;ye<Q;++ye)de[ie+ye]=Math.random()*255e3&255;return ye}),!y.$xSleep&&!S.xSleep&&(S.xSleep=(j,Q)=>0),t.vfs.installVfs({vfs:{struct:y,methods:S}}),y};class le{constructor(y=Object.create(null)){ze(this,oe);Tn(this,"vfsDir");ze(this,me,void 0);ze(this,he,void 0);ze(this,Ee,void 0);ze(this,Ae,new Map);ze(this,Oe,new Map);ze(this,Pe,new Set);ze(this,Me,new Map);ze(this,De,new Uint8Array(C));ze(this,B,void 0);ze(this,J,void 0);ze(this,Y,void 0);Ye(this,Y,y.verbosity??$.verbosity),this.vfsName=y.name||$.name,Ye(this,J,X(this.vfsName)),Z(_e(this,J).pointer,this),this.vfsDir=y.directory||"."+this.vfsName,Ye(this,B,new DataView(_e(this,De).buffer,_e(this,De).byteOffset)),this.isReady=this.reset(!!(y.clearOnInit??$.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(y.initialCapacity||$.initialCapacity)})}log(...y){Pt(this,oe,Ct).call(this,2,...y)}warn(...y){Pt(this,oe,Ct).call(this,1,...y)}error(...y){Pt(this,oe,Ct).call(this,0,...y)}getVfs(){return _e(this,J)}getCapacity(){return _e(this,Ae).size}getFileCount(){return _e(this,Oe).size}getFileNames(){const y=[],g=_e(this,Oe).keys();for(const P of g)y.push(P);return y}async addCapacity(y){for(let g=0;g<y;++g){const P=U(),Q=await(await _e(this,he).getFileHandle(P,{create:!0})).createSyncAccessHandle();_e(this,Ae).set(Q,P),this.setAssociatedPath(Q,"",0)}return this.getCapacity()}async reduceCapacity(y){let g=0;for(const P of Array.from(_e(this,Pe))){if(g===y||this.getFileCount()===this.getCapacity())break;const j=_e(this,Ae).get(P);P.close(),await _e(this,he).removeEntry(j),_e(this,Ae).delete(P),_e(this,Pe).delete(P),++g}return g}releaseAccessHandles(){for(const y of _e(this,Ae).keys())y.close();_e(this,Ae).clear(),_e(this,Oe).clear(),_e(this,Pe).clear()}async acquireAccessHandles(y){const g=[];for await(const[P,j]of _e(this,he))j.kind==="file"&&g.push([P,j]);return Promise.all(g.map(async([P,j])=>{try{const Q=await j.createSyncAccessHandle();if(_e(this,Ae).set(Q,P),y)Q.truncate(I),this.setAssociatedPath(Q,"",0);else{const ie=this.getAssociatedPath(Q);ie?_e(this,Oe).set(ie,Q):_e(this,Pe).add(Q)}}catch(Q){throw this.storeErr(Q),this.releaseAccessHandles(),Q}}))}getAssociatedPath(y){y.read(_e(this,De),{at:0});const g=_e(this,B).getUint32(L);if(_e(this,De)[0]&&(g&l.SQLITE_OPEN_DELETEONCLOSE||!(g&F)))return f(`Removing file with unexpected flags ${g.toString(16)}`,_e(this,De)),this.setAssociatedPath(y,"",0),"";const P=new Uint32Array(re/4);y.read(P,{at:G});const j=this.computeDigest(_e(this,De));if(P.every((Q,ie)=>Q===j[ie])){const Q=_e(this,De).findIndex(ie=>ie===0);return Q===0&&y.truncate(I),Q?H.decode(_e(this,De).subarray(0,Q)):""}else return f("Disassociating file with bad digest."),this.setAssociatedPath(y,"",0),""}setAssociatedPath(y,g,P){const j=R.encodeInto(g,_e(this,De));V<=j.written+1&&s("Path too long:",g),_e(this,De).fill(0,j.written,V),_e(this,B).setUint32(L,P);const Q=this.computeDigest(_e(this,De));y.write(_e(this,De),{at:0}),y.write(Q,{at:G}),y.flush(),g?(_e(this,Oe).set(g,y),_e(this,Pe).delete(y)):(y.truncate(I),_e(this,Pe).add(y))}computeDigest(y){let g=3735928559,P=1103547991;for(const j of y)g=31*g+j*307,P=31*P+j*307;return new Uint32Array([g>>>0,P>>>0])}async reset(y){await this.isReady;let g=await navigator.storage.getDirectory(),P;for(const j of this.vfsDir.split("/"))j&&(P=g,g=await g.getDirectoryHandle(j,{create:!0}));return Ye(this,me,g),Ye(this,Ee,P),Ye(this,he,await _e(this,me).getDirectoryHandle(N,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(y)}getPath(y){return E.isPtr(y)&&(y=E.cstrToJs(y)),(y instanceof URL?y:new URL(y,"file://localhost/")).pathname}deletePath(y){const g=_e(this,Oe).get(y);return g&&(_e(this,Oe).delete(y),this.setAssociatedPath(g,"",0)),!!g}storeErr(y,g){return y&&(y.sqlite3Rc=g||l.SQLITE_IOERR,this.error(y)),this.$error=y,g}popErr(){const y=this.$error;return this.$error=void 0,y}nextAvailableSAH(){const[y]=_e(this,Pe).keys();return y}getOFileForS3File(y){return _e(this,Me).get(y)}mapS3FileToOFile(y,g){g?(_e(this,Me).set(y,g),c(y,this)):(_e(this,Me).delete(y),c(y,!1))}hasFilename(y){return _e(this,Oe).has(y)}getSAHForPath(y){return _e(this,Oe).get(y)}async removeVfs(){if(!_e(this,J).pointer||!_e(this,he))return!1;l.sqlite3_vfs_unregister(_e(this,J).pointer),_e(this,J).dispose();try{this.releaseAccessHandles(),await _e(this,me).removeEntry(N,{recursive:!0}),Ye(this,he,void 0),await _e(this,Ee).removeEntry(_e(this,me).name,{recursive:!0}),Ye(this,me,Ye(this,Ee,void 0))}catch(y){t.config.error(this.vfsName,"removeVfs() failed:",y)}return!0}exportFile(y){const g=_e(this,Oe).get(y)||s("File not found:",y),P=g.getSize()-I,j=new Uint8Array(P>0?P:0);if(P>0){const Q=g.read(j,{at:I});Q!=P&&s("Expected to read "+P+" bytes but read "+Q+".")}return j}async importDbChunked(y,g){const P=_e(this,Oe).get(y)||this.nextAvailableSAH()||s("No available handles to import to.");P.truncate(0);let j=0,Q,ie=!1;try{for(;(Q=await g())!==void 0;)Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q)),j===0&&Q.byteLength>=15&&(b.affirmDbHeader(Q),ie=!0),P.write(Q,{at:I+j}),j+=Q.byteLength;if((j<512||j%512!==0)&&s("Input size",j,"is not correct for an SQLite database."),!ie){const de=new Uint8Array(20);P.read(de,{at:0}),b.affirmDbHeader(de)}P.write(new Uint8Array([1,1]),{at:I+18})}catch(de){throw this.setAssociatedPath(P,"",0),de}return this.setAssociatedPath(P,y,l.SQLITE_OPEN_MAIN_DB),j}importDb(y,g){if(g instanceof ArrayBuffer)g=new Uint8Array(g);else if(g instanceof Function)return this.importDbChunked(y,g);const P=_e(this,Oe).get(y)||this.nextAvailableSAH()||s("No available handles to import to."),j=g.byteLength;(j<512||j%512!=0)&&s("Byte array size is invalid for an SQLite db.");const Q="SQLite format 3";for(let de=0;de<Q.length;++de)Q.charCodeAt(de)!==g[de]&&s("Input does not contain an SQLite database header.");const ie=P.write(g,{at:I});return ie!=j?(this.setAssociatedPath(P,"",0),s("Expected to write "+j+" bytes but wrote "+ie+".")):(P.write(new Uint8Array([1,1]),{at:I+18}),this.setAssociatedPath(P,y,l.SQLITE_OPEN_MAIN_DB)),ie}}me=new WeakMap,he=new WeakMap,Ee=new WeakMap,Ae=new WeakMap,Oe=new WeakMap,Pe=new WeakMap,Me=new WeakMap,De=new WeakMap,B=new WeakMap,J=new WeakMap,Y=new WeakMap,oe=new WeakSet,Ct=function(y,...g){_e(this,Y)>y&&te[y](this.vfsName+":",...g)};class pe{constructor(y){ze(this,fe,void 0);Ye(this,fe,y),this.vfsName=y.vfsName}async addCapacity(y){return _e(this,fe).addCapacity(y)}async reduceCapacity(y){return _e(this,fe).reduceCapacity(y)}getCapacity(){return _e(this,fe).getCapacity(_e(this,fe))}getFileCount(){return _e(this,fe).getFileCount()}getFileNames(){return _e(this,fe).getFileNames()}async reserveMinimumCapacity(y){const g=_e(this,fe).getCapacity();return g<y?_e(this,fe).addCapacity(y-g):g}exportFile(y){return _e(this,fe).exportFile(y)}importDb(y,g){return _e(this,fe).importDb(y,g)}async wipeFiles(){return _e(this,fe).reset(!0)}unlink(y){return _e(this,fe).deletePath(y)}async removeVfs(){return _e(this,fe).removeVfs()}}fe=new WeakMap;const be=async()=>{const ee=await navigator.storage.getDirectory(),y=".opfs-sahpool-sync-check-"+U(),j=(await(await ee.getFileHandle(y,{create:!0})).createSyncAccessHandle()).close();return await j,await ee.removeEntry(y),j!=null&&j.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(ee=Object.create(null)){var g;const y=ee.name||$.name;return i[y]?i[y]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((g=navigator==null?void 0:navigator.storage)!=null&&g.getDirectory)?i[y]=Promise.reject(new Error("Missing required OPFS APIs.")):i[y]=be().then(async function(){if(ee.$testThrowInInit)throw ee.$testThrowInInit;const P=new le(ee);return P.isReady.then(async()=>{const j=new pe(P);if(t.oo1){const Q=t.oo1,ie=P.getVfs(),de=function(...ye){const ke=Q.DB.dbCtorHelper.normalizeArgs(...ye);ke.vfs=ie.$zName,Q.DB.dbCtorHelper.call(this,ke)};de.prototype=Object.create(Q.DB.prototype),j.OpfsSAHPoolDb=de,Q.DB.dbCtorHelper.setVfsPostOpenSql(ie.pointer,function(ye,ke){ke.capi.sqlite3_exec(ye,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return P.log("VFS initialized."),j}).catch(async j=>{throw await P.removeVfs().catch(()=>{}),j})}).catch(P=>i[y]=Promise.reject(P))}}),typeof n<"u"){const t=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),u.ready}})();const Ws=function(){var u,e;const h=an;if(!h)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const o=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(u=globalThis==null?void 0:globalThis.document)==null?void 0:u.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(e=globalThis==null?void 0:globalThis.location)!=null&&e.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(o.debugModule=o.urlParams.has("sqlite3.debugModule")?(...T)=>console.warn("sqlite3.debugModule:",...T):()=>{},o.urlParams.has("sqlite3.dir"))o.sqlite3Dir=o.urlParams.get("sqlite3.dir")+"/";else if(o.moduleScript){const T=o.moduleScript.src.split("/");T.pop(),o.sqlite3Dir=T.join("/")+"/"}if(globalThis.sqlite3InitModule=function T(..._){return h(..._).then(m=>{const A=m.sqlite3;A.scriptInfo=o,T.__isUnderTest&&(A.__isUnderTest=!0);const O=A.asyncPostInit;return delete A.asyncPostInit,O()}).catch(m=>{throw console.error("Exception loading sqlite3 module:",m),m})},globalThis.sqlite3InitModule.ready=h.ready,globalThis.sqlite3InitModuleState.moduleScript){const T=globalThis.sqlite3InitModuleState;let _=T.moduleScript.src.split("/");_.pop(),T.scriptDir=_.join("/")+"/"}return o.debugModule("sqlite3InitModuleState =",o),globalThis.sqlite3InitModule}();an=Ws;const Vs=an;globalThis.sqlite3Worker1Promiser=function h(o=h.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const M=o;o=Object.assign(Object.create(null),h.defaultConfig),o.onready=M}else o=Object.assign(Object.create(null),h.defaultConfig,o);const u=Object.create(null),e=function(){},T=o.onerror||e,_=o.debug||e,m=o.generateMessageId?void 0:Object.create(null),A=o.generateMessageId||function(M){return M.type+"#"+(m[M.type]=(m[M.type]||0)+1)},O=(...M)=>{throw new Error(M.join(" "))};o.worker||(o.worker=h.defaultConfig.worker),typeof o.worker=="function"&&(o.worker=o.worker());let D,z;return o.worker.onmessage=function(M){M=M.data,_("worker1.onmessage",M);let ne=u[M.messageId];if(!ne){if(M&&M.type==="sqlite3-api"&&M.result==="worker1-ready"){o.onready&&o.onready(z);return}if(ne=u[M.type],ne&&ne.onrow){ne.onrow(M);return}o.onunhandled?o.onunhandled(arguments[0]):T("sqlite3Worker1Promiser() unhandled worker message:",M);return}switch(delete u[M.messageId],M.type){case"error":ne.reject(M);return;case"open":D||(D=M.dbId);break;case"close":M.dbId===D&&(D=void 0);break}try{ne.resolve(M)}catch(ae){ne.reject(ae)}},z=function(){let M;arguments.length===1?M=arguments[0]:arguments.length===2?(M=Object.create(null),M.type=arguments[0],M.args=arguments[1],M.dbId=M.args.dbId):O("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!M.dbId&&M.type!=="open"&&(M.dbId=D),M.messageId=A(M),M.departureTime=performance.now();const ne=Object.create(null);ne.message=M;let ae;M.type==="exec"&&M.args&&(typeof M.args.callback=="function"?(ae=M.messageId+":row",ne.onrow=M.args.callback,M.args.callback=ae,u[ae]=ne):typeof M.args.callback=="string"&&O("exec callback may not be a string when using the Promise interface."));let ue=new Promise(function(ce,ve){ne.resolve=ce,ne.reject=ve,u[M.messageId]=ne,_("Posting",M.type,"message to Worker dbId="+(D||"default")+":",M),o.worker.postMessage(M)});return ae&&(ue=ue.finally(()=>delete u[ae])),ue}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-5007bb93.js",self.location),{type:"module"})},onerror:(...h)=>console.error("worker1 promiser error",...h)};sqlite3Worker1Promiser.v2=(function(h){let o;typeof h=="function"?(o=h,h={}):typeof(h==null?void 0:h.onready)=="function"&&(o=h.onready,delete h.onready);const u=Object.create(null);h=Object.assign(h||Object.create(null),{onready:async function(T){try{o&&await o(T),u.resolve(T)}catch(_){u.reject(_)}}});const e=new Promise(function(T,_){u.resolve=T,u.reject=_});try{this.original(h)}catch(T){u.reject(T)}return e}).bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;const Qs=async()=>{const h=await Vs();return console.log("Running SQLite3 version",h.version.libVersion),new h.oo1.DB("/railsdb.sqlite3","ct")};let pt=null;const tr=async h=>pt||(h==null||h.updateStep("Initializing SQLite database..."),pt=await Qs(),h==null||h.updateStep("SQLite database created."),pt);let dt=null;const ln=async(h,o={})=>{if(dt)return dt;pt||await tr(h),zs(self,pt);let u=!0;return dt=await Os("/app.wasm",{database:{adapter:"sqlite3_wasm"},progressCallback:e=>{h==null||h.updateStep(e)},outputCallback:e=>{u&&(h==null||h.notify(e))},...o}),h==null||h.updateStep("Preparing database..."),dt.eval("ActiveRecord::Tasks::DatabaseTasks.prepare_all"),u=!1,dt},Hs=()=>{dt=null},Gs=async()=>{const h=new zn;await h.attach(self),await tr(h),await ln(h)};self.addEventListener("activate",h=>{console.log("[rails-web] Activate Service Worker")});self.addEventListener("install",h=>{console.log("[rails-web] Install Service Worker"),h.waitUntil(Gs().then(()=>self.skipWaiting()))});const $s=new Bs(ln,{assumeSSL:!0});self.addEventListener("fetch",h=>{if(["/boot","/boot.js","/boot.html","/rails.sw.js"].find(e=>new URL(h.request.url).pathname.endsWith(e))){console.log("[rails-web] Fetching boot files from network:",h.request.url),h.respondWith(fetch(h.request.url));return}if(["node_modules","@vite"].find(e=>h.request.url.includes(e))){console.log("[rails-web] Fetching Vite files from network:",h.request.url),h.respondWith(fetch(h.request.url));return}return h.respondWith($s.handle(h.request))});self.addEventListener("message",async h=>{if(console.log("[rails-web] Received worker message:",h.data),h.data.type==="reload-rails"){const o=new zn;await o.attach(self),o.updateStep("Reloading Rails application..."),Hs(),await ln(o,{debug:h.data.debug})}});
